{"version":3,"file":"ui.8fb9eb9c2ba639db99c3.bundle.js","mappings":"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","sources":["webpack://webao/./node_modules/golden-layout/src/ts/config/config.ts","webpack://webao/./node_modules/golden-layout/src/ts/config/resolved-config.ts","webpack://webao/./node_modules/golden-layout/src/ts/container/component-container.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/browser-popout.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/drag-proxy.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/drag-source.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/drop-target-indicator.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/header-button.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/header.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/splitter.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/tab.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/tabs-container.ts","webpack://webao/./node_modules/golden-layout/src/ts/controls/transition-indicator.ts","webpack://webao/./node_modules/golden-layout/src/ts/errors/external-error.ts","webpack://webao/./node_modules/golden-layout/src/ts/errors/internal-error.ts","webpack://webao/./node_modules/golden-layout/src/ts/golden-layout.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/component-item.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/component-parentable-item.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/content-item.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/ground-item.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/row-or-column.ts","webpack://webao/./node_modules/golden-layout/src/ts/items/stack.ts","webpack://webao/./node_modules/golden-layout/src/ts/layout-manager.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/config-minifier.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/drag-listener.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/event-emitter.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/event-hub.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/i18n-strings.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/jquery-legacy.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/style-constants.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/types.ts","webpack://webao/./node_modules/golden-layout/src/ts/utils/utils.ts","webpack://webao/./node_modules/golden-layout/src/ts/virtual-layout.ts","webpack://webao/webpack/bootstrap","webpack://webao/webpack/runtime/define property getters","webpack://webao/webpack/runtime/hasOwnProperty shorthand","webpack://webao/webpack/runtime/make namespace object","webpack://webao/./webAO/ui.js"],"sourcesContent":["import { ConfigurationError } from '../errors/external-error';\nimport { AssertError, UnreachableCaseError } from '../errors/internal-error';\nimport { ItemType, JsonValue, ResponsiveMode, Side } from '../utils/types';\nimport {\n    ResolvedComponentItemConfig,\n    ResolvedHeaderedItemConfig,\n    ResolvedItemConfig,\n    ResolvedLayoutConfig,\n    ResolvedPopoutLayoutConfig,\n    ResolvedRootItemConfig,\n    ResolvedRowOrColumnItemConfig,\n    ResolvedStackItemConfig\n} from \"./resolved-config\";\n\n/** @public */\nexport interface ItemConfig {\n    /**\n     * The type of the item. Possible values are 'row', 'column', 'stack', 'component'.\n     */\n    type: ItemType;\n\n    /**\n     * An array of configurations for items that will be created as children of this item.\n     */\n    content?: ItemConfig[];\n\n    /**\n     * The width of this item, relative to the other children of its parent in percent\n     */\n    width?: number;\n\n    /**\n     * The minimum width of this item in pixels\n     * CAUTION - Not tested - do not use\n     */\n    minWidth?: number;\n\n    /**\n     * The height of this item, relative to the other children of its parent in percent\n     */\n    height?: number;\n\n    /**\n     * The minimum height of this item in pixels\n     * CAUTION - Not tested - do not use\n     */\n    minHeight?: number;\n\n    /**\n     * A string that can be used to identify a ContentItem.\n     * Do NOT assign an array.  This only exists for legacy purposes.  If an array is assigned, the first element\n     * will become the id.\n     */\n    id?: string;\n\n    /**\n     * Determines if the item is closable. If false, the x on the items tab will be hidden and container.close()\n     * will return false\n     * Default: true\n     */\n    isClosable?: boolean;\n\n    /**\n     * The title of the item as displayed on its tab and on popout windows\n     * Default: componentType.toString() or ''\n     */\n    title?: string;\n}\n\n/** @public */\nexport namespace ItemConfig {\n    export function resolve(itemConfig: ItemConfig): ResolvedItemConfig {\n        switch (itemConfig.type) {\n            case ItemType.ground:\n                throw new ConfigurationError('ItemConfig cannot specify type ground', JSON.stringify(itemConfig));\n            case ItemType.row:\n            case ItemType.column:\n                return RowOrColumnItemConfig.resolve(itemConfig as RowOrColumnItemConfig);\n\n            case ItemType.stack:\n                return StackItemConfig.resolve(itemConfig as StackItemConfig);\n\n            case ItemType.component:\n                return ComponentItemConfig.resolve(itemConfig as ComponentItemConfig);\n\n            default:\n                throw new UnreachableCaseError('UCUICR55499', itemConfig.type);\n        }\n    }\n\n    export function resolveContent(content: ItemConfig[] | undefined): ResolvedItemConfig[] {\n        if (content === undefined) {\n            return [];\n        } else {\n            const count = content.length;\n            const result = new Array<ResolvedItemConfig>(count);\n            for (let i = 0; i < count; i++) {\n                result[i] = ItemConfig.resolve(content[i]);\n            }\n            return result;\n        }\n    }\n\n    export function resolveId(id: string | string[] | undefined): string {\n        if (id === undefined) {\n            return ResolvedItemConfig.defaults.id;\n        } else {\n            if (Array.isArray(id)) {\n                if (id.length === 0) {\n                    return ResolvedItemConfig.defaults.id;\n                } else {\n                    return id[0];\n                }\n            } else {\n                return id;\n            }\n        }\n\n    }\n\n    export function isGround(config: ItemConfig): config is ItemConfig {\n        return config.type === ItemType.ground;\n    }\n    export function isRow(config: ItemConfig): config is ItemConfig {\n        return config.type === ItemType.row;\n    }\n    export function isColumn(config: ItemConfig): config is ItemConfig {\n        return config.type === ItemType.column;\n    }\n    export function isStack(config: ItemConfig): config is ItemConfig {\n        return config.type === ItemType.stack;\n    }\n    export function isComponent(config: ItemConfig): config is ComponentItemConfig {\n        return config.type === ItemType.component;\n    }\n}\n\n// Stack or Component\n/** @public */\nexport interface HeaderedItemConfig extends ItemConfig {\n    /** @deprecated use {@link (HeaderedItemConfig:namespace).(Header:interface).show} instead */\n    hasHeaders?: boolean;\n    header?: HeaderedItemConfig.Header;\n    maximised?: boolean;\n}\n\n/** @public */\nexport namespace HeaderedItemConfig {\n    const legacyMaximisedId = '__glMaximised';\n\n    export interface Header {\n        show?: false | Side;\n        popout?: false | string;\n        dock?: false | string;\n        maximise?: false | string;\n        close?: string;\n        minimise?: string;\n        tabDropdown?: false | string;\n    }\n\n    export namespace Header {\n        export function resolve(header: Header | undefined, hasHeaders: boolean | undefined): ResolvedHeaderedItemConfig.Header | undefined {\n            if (header === undefined && hasHeaders === undefined) {\n                return undefined;\n            } else {\n                const result: ResolvedHeaderedItemConfig.Header = {\n                    show: header?.show ?? (hasHeaders === undefined ? undefined : hasHeaders ? ResolvedLayoutConfig.Header.defaults.show : false),\n                    popout: header?.popout,\n                    maximise: header?.maximise,\n                    close: header?.close,\n                    minimise: header?.minimise,\n                    tabDropdown: header?.tabDropdown,\n                }\n                return result;\n            }\n        }\n    }\n\n    export function resolveIdAndMaximised(config: HeaderedItemConfig): { id: string, maximised: boolean} {\n        let id: string;\n        // To support legacy configs with Id saved as an array of string, assign config.id to a type which includes string array\n        let legacyId: string | string[] | undefined = config.id;\n        let legacyMaximised = false;\n        if (legacyId === undefined) {\n            id = ResolvedItemConfig.defaults.id;\n        } else {\n            if (Array.isArray(legacyId)) {\n                const idx = legacyId.findIndex((id) => id === legacyMaximisedId)\n                if (idx > 0) {\n                    legacyMaximised = true;\n                    legacyId = legacyId.splice(idx, 1);\n                }\n                if (legacyId.length > 0) {\n                    id = legacyId[0];\n                } else {\n                    id = ResolvedItemConfig.defaults.id;\n                }\n            } else {\n                id = legacyId;\n            }\n        }\n\n        let maximised: boolean;\n        if (config.maximised !== undefined) {\n            maximised = config.maximised;\n        } else {\n            maximised = legacyMaximised;\n        }\n\n        return { id, maximised }\n    }\n}\n\n/** @public */\nexport interface StackItemConfig extends HeaderedItemConfig {\n    type: 'stack';\n    content: ComponentItemConfig[];\n    /** The index of the item in content which is to be active*/\n    activeItemIndex?: number;\n}\n\n/** @public */\nexport namespace StackItemConfig {\n    export function resolve(itemConfig: StackItemConfig): ResolvedStackItemConfig {\n        const { id, maximised } = HeaderedItemConfig.resolveIdAndMaximised(itemConfig);\n        const result: ResolvedStackItemConfig = {\n            type: ItemType.stack,\n            content: resolveContent(itemConfig.content),\n            width: itemConfig.width ?? ResolvedItemConfig.defaults.width,\n            minWidth: itemConfig.minWidth ?? ResolvedItemConfig.defaults.minWidth,\n            height: itemConfig.height ?? ResolvedItemConfig.defaults.height,\n            minHeight: itemConfig.minHeight ?? ResolvedItemConfig.defaults.minHeight,\n            id,\n            maximised,\n            isClosable: itemConfig.isClosable ?? ResolvedItemConfig.defaults.isClosable,\n            activeItemIndex: itemConfig.activeItemIndex ?? ResolvedStackItemConfig.defaultActiveItemIndex,\n            header: HeaderedItemConfig.Header.resolve(itemConfig.header, itemConfig.hasHeaders),\n        };\n        return result;\n    }\n\n    export function resolveContent(content: ComponentItemConfig[] | undefined): ResolvedComponentItemConfig[] {\n        if (content === undefined) {\n            return [];\n        } else {\n            const count = content.length;\n            const result = new Array<ResolvedComponentItemConfig>(count);\n            for (let i = 0; i < count; i++) {\n                const childItemConfig = content[i];\n                const itemConfig = ItemConfig.resolve(childItemConfig);\n                if (!ResolvedItemConfig.isComponentItem(itemConfig)) {\n                    throw new AssertError('UCUSICRC91114', JSON.stringify(itemConfig));\n                } else {\n                    result[i] = itemConfig;\n                }\n            }\n            return result;\n        }\n    }\n}\n\n/** @public */\nexport interface ComponentItemConfig extends HeaderedItemConfig {\n    type: 'component';\n    readonly content?: [];\n    /**\n     * The type of the component.\n     * @deprecated use {@link (ComponentItemConfig:interface).componentType} instead\n     */\n    componentName?: string;\n\n    /**\n     * The type of the component.\n     * `componentType` must be of type `string` if it is registered with any of the following functions:\n     * * {@link (GoldenLayout:class).registerComponent} (deprecated)\n     * * {@link (GoldenLayout:class).registerComponentConstructor}\n     * * {@link (GoldenLayout:class).registerComponentFactoryFunction}\n     */\n    componentType: JsonValue;\n    /**\n     * The state information with which a component will be initialised with.\n     * Will be passed to the component constructor function and will be the value returned by\n     * container.initialState.\n     */\n    componentState?: JsonValue;\n\n    /**\n     * Default: true\n     */\n    reorderEnabled?: boolean;  // Takes precedence over LayoutConfig.reorderEnabled.\n}\n\n/** @public */\nexport namespace ComponentItemConfig {\n    export function resolve(itemConfig: ComponentItemConfig): ResolvedComponentItemConfig {\n        let componentType: JsonValue | undefined = itemConfig.componentType;\n        if (componentType === undefined) {\n            componentType = itemConfig.componentName;\n        }\n        if (componentType === undefined) {\n            throw new Error('ComponentItemConfig.componentType is undefined');\n        } else {\n            const { id, maximised } = HeaderedItemConfig.resolveIdAndMaximised(itemConfig);\n            let title: string;\n            if (itemConfig.title === undefined || itemConfig.title === '') {\n                title = ComponentItemConfig.componentTypeToTitle(componentType);\n            } else {\n                title = itemConfig.title;\n            }\n            const result: ResolvedComponentItemConfig = {\n                type: itemConfig.type,\n                content: [],\n                width: itemConfig.width ?? ResolvedItemConfig.defaults.width,\n                minWidth: itemConfig.minWidth ?? ResolvedItemConfig.defaults.minWidth,\n                height: itemConfig.height ?? ResolvedItemConfig.defaults.height,\n                minHeight: itemConfig.minHeight ?? ResolvedItemConfig.defaults.minHeight,\n                id,\n                maximised,\n                isClosable: itemConfig.isClosable ?? ResolvedItemConfig.defaults.isClosable,\n                reorderEnabled: itemConfig.reorderEnabled ?? ResolvedComponentItemConfig.defaultReorderEnabled,\n                title,\n                header: HeaderedItemConfig.Header.resolve(itemConfig.header, itemConfig.hasHeaders),\n                componentType,\n                componentState: itemConfig.componentState ?? {},\n            };\n            return result;\n        }\n    }\n\n    export function componentTypeToTitle(componentType: JsonValue): string {\n        const componentTypeType = typeof componentType;\n        switch (componentTypeType) {\n            case 'string': return componentType as string;\n            case 'number': return (componentType as number).toString();\n            case 'boolean': return (componentType as boolean).toString();\n            default: return '';\n        }\n    }\n}\n\n// RowOrColumn\n/** @public */\nexport interface RowOrColumnItemConfig extends ItemConfig {\n    type: 'row' | 'column';\n    content: (RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig)[];\n}\n\n/** @public */\nexport namespace RowOrColumnItemConfig {\n    export type ChildItemConfig = RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig;\n\n    export function isChildItemConfig(itemConfig: ItemConfig): itemConfig is ChildItemConfig {\n        switch (itemConfig.type) {\n            case ItemType.row:\n            case ItemType.column:\n            case ItemType.stack:\n            case ItemType.component:\n                return true;\n            case ItemType.ground:\n                return false;\n            default:\n                throw new UnreachableCaseError('UROCOSPCICIC13687', itemConfig.type);\n        }\n    }\n\n    export function resolve(itemConfig: RowOrColumnItemConfig): ResolvedRowOrColumnItemConfig {\n        const result: ResolvedRowOrColumnItemConfig = {\n            type: itemConfig.type,\n            content: RowOrColumnItemConfig.resolveContent(itemConfig.content),\n            width: itemConfig.width ?? ResolvedItemConfig.defaults.width,\n            minWidth: itemConfig.width ?? ResolvedItemConfig.defaults.minWidth,\n            height: itemConfig.height ?? ResolvedItemConfig.defaults.height,\n            minHeight: itemConfig.height ?? ResolvedItemConfig.defaults.minHeight,\n            id: ItemConfig.resolveId(itemConfig.id),\n            isClosable: itemConfig.isClosable ?? ResolvedItemConfig.defaults.isClosable,\n        }\n        return result;\n    }\n    export function resolveContent(content: ChildItemConfig[] | undefined): ResolvedRowOrColumnItemConfig.ChildItemConfig[] {\n        if (content === undefined) {\n            return [];\n        } else {\n            const count = content.length;\n            const result = new Array<ResolvedRowOrColumnItemConfig.ChildItemConfig>(count);\n            for (let i = 0; i < count; i++) {\n                const childItemConfig = content[i];\n                if (!RowOrColumnItemConfig.isChildItemConfig(childItemConfig)) {\n                    throw new ConfigurationError('ItemConfig is not Row, Column or Stack', childItemConfig);\n                } else {\n                    const resolvedChildItemConfig = ItemConfig.resolve(childItemConfig);\n                    if (!ResolvedRowOrColumnItemConfig.isChildItemConfig(resolvedChildItemConfig)) {\n                        throw new AssertError('UROCOSPIC99512', JSON.stringify(resolvedChildItemConfig));\n                    } else {\n                        result[i] = resolvedChildItemConfig;\n                    }\n                }\n            }\n            return result;\n        }\n    }\n}\n\n/** @public */\nexport type RootItemConfig = RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig;\n\n/** @public */\nexport namespace RootItemConfig {\n    export function isRootItemConfig(itemConfig: ItemConfig): itemConfig is RootItemConfig {\n        switch (itemConfig.type) {\n            case ItemType.row:\n            case ItemType.column:\n            case ItemType.stack:\n            case ItemType.component:\n                return true;\n            case ItemType.ground:\n                return false;\n            default:\n                throw new UnreachableCaseError('URICIR23687', itemConfig.type);\n        }\n    }\n\n    export function resolve(itemConfig: RootItemConfig | undefined): ResolvedRootItemConfig | undefined {\n        if (itemConfig === undefined) {\n            return undefined;\n        } else {\n            const result = ItemConfig.resolve(itemConfig);\n            if (!ResolvedRootItemConfig.isRootItemConfig(result)) {\n                throw new ConfigurationError('ItemConfig is not Row, Column or Stack', JSON.stringify(itemConfig));\n            } else {\n                return result;\n            }\n        }\n    }\n}\n\n/** @public */\nexport interface LayoutConfig {\n    root: RootItemConfig;\n    /** @deprecated Use {@link (LayoutConfig:interface).root} */\n    content?: (RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig)[];\n    openPopouts?: PopoutLayoutConfig[];\n    dimensions?: LayoutConfig.Dimensions;\n    settings?: LayoutConfig.Settings;\n    /** @deprecated use {@link (LayoutConfig:interface).header} instead */\n    labels?: LayoutConfig.Labels;\n    header?: LayoutConfig.Header;\n}\n\n/** Use to specify LayoutConfig with defaults or deserialise a LayoutConfig.\n * Deserialisation will handle backwards compatibility.\n * Note that LayoutConfig should be used for serialisation (not LayoutConfig)\n * @public\n */\nexport namespace LayoutConfig {\n    export interface Settings {\n        /**\n         * @deprecated use ${@link (LayoutConfig:namespace).(Header:interface).show} instead\n         */\n        hasHeaders?: boolean;\n\n        /**\n         * Constrains the area in which items can be dragged to the layout's container. Will be set to false\n         * automatically when layout.createDragSource() is called.\n         * Default: true\n         */\n        constrainDragToContainer?: boolean;\n\n        /**\n         * If true, the user can re-arrange the layout by dragging items by their tabs to the desired location.\n         * Can be overridden by ItemConfig.reorderEnabled for specific ItemConfigs\n         * Default: true\n         */\n        reorderEnabled?: boolean;\n\n        /**\n         * Decides what will be opened in a new window if the user clicks the popout icon. If true the entire stack will\n         * be transferred to the new window, if false only the active component will be opened.\n         * Default: false\n         */\n        popoutWholeStack?: boolean;\n\n        /**\n         * Specifies if an error is thrown when a popout is blocked by the browser (e.g. by opening it programmatically).\n         * If false, the popout call will fail silently.\n         * Default: true\n         */\n        blockedPopoutsThrowError?: boolean;\n\n        /**\n         * Specifies if all popouts should be closed when the page that created them is closed. Popouts don't have a\n         * strong dependency on their parent and can exist on their own, but can be quite annoying to close by hand. In\n         * addition, any changes made to popouts won't be stored after the parent is closed.\n         * Default: true\n         */\n        closePopoutsOnUnload?: boolean;\n\n        /**\n         * Specifies if the popout icon should be displayed in the header-bar.\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).popout} instead\n         */\n        showPopoutIcon?: boolean;\n\n        /**\n         * Specifies if the maximise icon should be displayed in the header-bar.\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).maximise} instead\n         */\n        showMaximiseIcon?: boolean;\n\n        /**\n         * Specifies if the close icon should be displayed in the header-bar.\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).close} instead\n         */\n        showCloseIcon?: boolean;\n\n        /**\n         * Specifies Responsive Mode (more info needed).\n         * Default: none\n         */\n        responsiveMode?: ResponsiveMode;\n\n        /**\n         * Specifies Maximum pixel overlap per tab.\n         * Default: 0\n         */\n        tabOverlapAllowance?: number;\n\n        /**\n         *\n         * Default: true\n         */\n        reorderOnTabMenuClick?: boolean;\n\n        /**\n         * Default: 10\n         */\n        tabControlOffset?: number;\n\n        /**\n         * Specifies whether to pop in elements when closing a popout window.\n         * Default: false\n         */\n        popInOnClose?: boolean;\n    }\n\n    export namespace Settings {\n        export function resolve(settings: Settings | undefined): ResolvedLayoutConfig.Settings {\n            const result: ResolvedLayoutConfig.Settings = {\n                constrainDragToContainer: settings?.constrainDragToContainer ?? ResolvedLayoutConfig.Settings.defaults.constrainDragToContainer,\n                reorderEnabled: settings?.reorderEnabled ?? ResolvedLayoutConfig.Settings.defaults.reorderEnabled,\n                popoutWholeStack: settings?.popoutWholeStack ?? ResolvedLayoutConfig.Settings.defaults.popoutWholeStack,\n                blockedPopoutsThrowError: settings?.blockedPopoutsThrowError ?? ResolvedLayoutConfig.Settings.defaults.blockedPopoutsThrowError,\n                closePopoutsOnUnload: settings?.closePopoutsOnUnload ?? ResolvedLayoutConfig.Settings.defaults.closePopoutsOnUnload,\n                responsiveMode: settings?.responsiveMode ?? ResolvedLayoutConfig.Settings.defaults.responsiveMode,\n                tabOverlapAllowance: settings?.tabOverlapAllowance ?? ResolvedLayoutConfig.Settings.defaults.tabOverlapAllowance,\n                reorderOnTabMenuClick: settings?.reorderOnTabMenuClick ?? ResolvedLayoutConfig.Settings.defaults.reorderOnTabMenuClick,\n                tabControlOffset: settings?.tabControlOffset ?? ResolvedLayoutConfig.Settings.defaults.tabControlOffset,\n                popInOnClose: settings?.popInOnClose ?? ResolvedLayoutConfig.Settings.defaults.popInOnClose,\n            }\n            return result;\n        }\n    }\n\n    export interface Dimensions {\n        /**\n         * The width of the borders between the layout items in pixel. Please note: The actual draggable area is wider\n         * than the visible one, making it safe to set this to small values without affecting usability.\n         * Default: 5\n         */\n        borderWidth?: number;\n\n        /**\n         * Default: 15\n         */\n        borderGrabWidth?: number,\n\n        /**\n         * The minimum height an item can be resized to (in pixel).\n         * Default: 10\n         */\n        minItemHeight?: number;\n\n        /**\n         * The minimum width an item can be resized to (in pixel).\n         * Default: 10\n         */\n        minItemWidth?: number;\n\n        /**\n         * The height of the header elements in pixel. This can be changed, but your theme's header css needs to be\n         * adjusted accordingly.\n         * Default: 20\n         */\n        headerHeight?: number;\n\n        /**\n         * The width of the element that appears when an item is dragged (in pixel).\n         * Default: 300\n         */\n        dragProxyWidth?: number;\n\n        /**\n         * The height of the element that appears when an item is dragged (in pixel).\n         * Default: 200\n         */\n        dragProxyHeight?: number;\n    }\n\n    export namespace Dimensions {\n        export function resolve(dimensions: Dimensions | undefined): ResolvedLayoutConfig.Dimensions {\n            const result: ResolvedLayoutConfig.Dimensions = {\n                borderWidth: dimensions?.borderWidth ?? ResolvedLayoutConfig.Dimensions.defaults.borderWidth,\n                borderGrabWidth: dimensions?.borderGrabWidth ?? ResolvedLayoutConfig.Dimensions.defaults.borderGrabWidth,\n                minItemHeight: dimensions?.minItemHeight ?? ResolvedLayoutConfig.Dimensions.defaults.minItemHeight,\n                minItemWidth: dimensions?.minItemWidth ?? ResolvedLayoutConfig.Dimensions.defaults.minItemWidth,\n                headerHeight: dimensions?.headerHeight ?? ResolvedLayoutConfig.Dimensions.defaults.headerHeight,\n                dragProxyWidth: dimensions?.dragProxyWidth ?? ResolvedLayoutConfig.Dimensions.defaults.dragProxyWidth,\n                dragProxyHeight: dimensions?.dragProxyHeight ?? ResolvedLayoutConfig.Dimensions.defaults.dragProxyHeight,\n            }\n            return result;\n        }\n    }\n\n    export interface Labels {\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).close} instead\n         */\n        close?: string;\n\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).maximise} instead\n         */\n        maximise?: string;\n\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).minimise} instead\n         */\n        minimise?: string;\n\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).popin} instead\n         */\n        popin?: string;\n\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).popout} instead\n         */\n        popout?: string;\n\n        /**\n         * @deprecated use {@link (LayoutConfig:namespace).(Header:interface).tabDropdown} instead\n         */\n        tabDropdown?: string;\n    }\n\n    export interface Header {\n        /**\n         * Specifies whether header should be displayed, and if so, on which side.\n         * If false, the layout will be displayed with splitters only.\n         * Default: 'top'\n         */\n        show?: false | Side;\n        /**\n         * The tooltip text that appears when hovering over the popout icon or false if popout button not displayed.\n         * Default: 'open in new window'\n         */\n        popout?: false | string;\n        /**\n         * The tooltip text that appears when hovering over the popin icon.\n         * Default: 'pop in'\n         */\n        popin?: string;\n        /**\n         * The tooltip text that appears when hovering over the maximise icon or false if maximised button not displayed.\n         * Default: 'maximise'\n         */\n        maximise?: false | string;\n        /**\n         * The tooltip text that appears when hovering over the close icon.\n         * Default: 'close'\n         */\n        close?: false | string;\n        /**\n         * The tooltip text that appears when hovering over the minimise icon.\n         * Default: 'minimise'\n         */\n        minimise?: string;\n        /**\n         *\n         * Default: 'additional tabs'\n         */\n        tabDropdown?: false | string;\n    }\n\n    export namespace Header {\n        export function resolve(header: Header | undefined,\n            settings: LayoutConfig.Settings | undefined, labels: LayoutConfig.Labels | undefined\n        ): ResolvedLayoutConfig.Header {\n            let show: false | Side;\n            if (header?.show !== undefined) {\n                show = header.show;\n            } else {\n                if (settings !== undefined && settings.hasHeaders !== undefined) {\n                    show = settings.hasHeaders ? ResolvedLayoutConfig.Header.defaults.show : false;\n                } else {\n                    show = ResolvedLayoutConfig.Header.defaults.show;\n                }\n            }\n            const result: ResolvedLayoutConfig.Header = {\n                show,\n                popout: header?.popout ?? labels?.popout ??\n                    (settings?.showPopoutIcon === false ? false : ResolvedLayoutConfig.Header.defaults.popout),\n                dock: header?.popin ?? labels?.popin ?? ResolvedLayoutConfig.Header.defaults.dock,\n                maximise: header?.maximise ?? labels?.maximise ??\n                    (settings?.showMaximiseIcon === false ? false : ResolvedLayoutConfig.Header.defaults.maximise),\n                close: header?.close ?? labels?.close ??\n                    (settings?.showCloseIcon === false ? false : ResolvedLayoutConfig.Header.defaults.close),\n                minimise: header?.minimise ?? labels?.minimise ?? ResolvedLayoutConfig.Header.defaults.minimise,\n                tabDropdown: header?.tabDropdown ?? labels?.tabDropdown ?? ResolvedLayoutConfig.Header.defaults.tabDropdown,\n            }\n            return result;\n        }\n    }\n\n    export function isPopout(config: LayoutConfig): config is PopoutLayoutConfig {\n        return 'parentId' in config || 'indexInParent' in config || 'window' in config;\n    }\n\n    export function resolve(layoutConfig: LayoutConfig): ResolvedLayoutConfig {\n        if (isPopout(layoutConfig)) {\n            return PopoutLayoutConfig.resolve(layoutConfig);\n        } else {\n            let root: RootItemConfig | undefined;\n            if (layoutConfig.root !== undefined) {\n                root = layoutConfig.root;\n            } else {\n                if (layoutConfig.content !== undefined && layoutConfig.content.length > 0) {\n                    root = layoutConfig.content[0];\n                } else {\n                    root = undefined;\n                }\n            }\n            const config: ResolvedLayoutConfig = {\n                resolved: true,\n                root: RootItemConfig.resolve(root),\n                openPopouts: LayoutConfig.resolveOpenPopouts(layoutConfig.openPopouts),\n                dimensions: LayoutConfig.Dimensions.resolve(layoutConfig.dimensions),\n                settings: LayoutConfig.Settings.resolve(layoutConfig.settings),\n                header: LayoutConfig.Header.resolve(layoutConfig.header, layoutConfig.settings, layoutConfig.labels),\n            }\n            return config;\n        }\n    }\n\n    export function fromResolved(config: ResolvedLayoutConfig): LayoutConfig {\n        const copiedConfig = ResolvedLayoutConfig.createCopy(config);\n        const result: LayoutConfig = {\n            root: copiedConfig.root as RootItemConfig,\n            openPopouts: copiedConfig.openPopouts as unknown as PopoutLayoutConfig[],\n            dimensions: copiedConfig.dimensions,\n            settings: copiedConfig.settings,\n            header: copiedConfig.header,\n        };\n        return result;\n    }\n\n    export function isResolved(configOrResolvedConfig: ResolvedLayoutConfig | LayoutConfig): configOrResolvedConfig is ResolvedLayoutConfig {\n        const config = configOrResolvedConfig as ResolvedLayoutConfig;\n        return config.resolved !== undefined && (config.resolved === true);\n    }\n\n    export function resolveOpenPopouts(popoutConfigs: PopoutLayoutConfig[] | undefined): ResolvedPopoutLayoutConfig[] {\n        if (popoutConfigs === undefined) {\n            return [];\n        } else {\n            const count = popoutConfigs.length;\n            const result = new Array<ResolvedPopoutLayoutConfig>(count);\n            for (let i = 0; i < count; i++) {\n                result[i] = PopoutLayoutConfig.resolve(popoutConfigs[i]);\n            }\n            return result;\n        }\n    }\n}\n\n/** @public */\nexport interface PopoutLayoutConfig extends LayoutConfig {\n    /** The id of the element the item will be appended to on popIn\n    * If null, append to topmost layout element\n    */\n    parentId: string | null | undefined;\n    /** The position of this element within its parent\n    * If null, position is last\n    */\n    indexInParent: number | null | undefined;\n    /** @deprecated use {@link (PopoutLayoutConfig:interface).window} */\n    dimensions: PopoutLayoutConfig.Dimensions | undefined; // for backwards compatibility\n    window: PopoutLayoutConfig.Window | undefined;\n}\n\n/** @public */\nexport namespace PopoutLayoutConfig {\n    // Previous versions kept window information in Dimensions key.  Only use for backwards compatibility\n    /** @deprecated use {@link (PopoutLayoutConfig:namespace).(Window:interface)} */\n    export interface Dimensions extends LayoutConfig.Dimensions {\n        /** @deprecated use {@link (PopoutLayoutConfig:namespace).(Window:interface).width} */\n        width: number | null,\n        /** @deprecated use {@link (PopoutLayoutConfig:namespace).(Window:interface).height} */\n        height: number | null,\n        /** @deprecated use {@link (PopoutLayoutConfig:namespace).(Window:interface).left} */\n        left: number | null,\n        /** @deprecated use {@link (PopoutLayoutConfig:namespace).(Window:interface).top} */\n        top: number | null,\n    }\n\n    export interface Window {\n        width?: number,\n        height?: number,\n        left?: number,\n        top?: number,\n    }\n\n    export namespace Window {\n        export function resolve(window: Window | undefined,\n            dimensions: Dimensions | undefined): ResolvedPopoutLayoutConfig.Window\n        {\n            let result: ResolvedPopoutLayoutConfig.Window;\n            const defaults = ResolvedPopoutLayoutConfig.Window.defaults;\n            if (window !== undefined) {\n                result = {\n                    width: window.width ?? defaults.width,\n                    height: window.height ?? defaults.height,\n                    left: window.left ?? defaults.left,\n                    top: window.top ?? defaults.top,\n                }\n            } else {\n                result = {\n                    width: dimensions?.width ?? defaults.width,\n                    height: dimensions?.height ?? defaults.height,\n                    left: dimensions?.left ?? defaults.left,\n                    top: dimensions?.top ?? defaults.top,\n                }\n            }\n            return result;\n        }\n    }\n\n    export function resolve(popoutConfig: PopoutLayoutConfig): ResolvedPopoutLayoutConfig {\n        let root: RootItemConfig | undefined;\n        if (popoutConfig.root !== undefined) {\n            root = popoutConfig.root;\n        } else {\n            if (popoutConfig.content !== undefined && popoutConfig.content.length > 0) {\n                root = popoutConfig.content[0];\n            } else {\n                root = undefined;\n            }\n        }\n\n        const config: ResolvedPopoutLayoutConfig = {\n            root: RootItemConfig.resolve(root),\n            openPopouts: LayoutConfig.resolveOpenPopouts(popoutConfig.openPopouts),\n            settings: LayoutConfig.Settings.resolve(popoutConfig.settings),\n            dimensions: LayoutConfig.Dimensions.resolve(popoutConfig.dimensions),\n            header: LayoutConfig.Header.resolve(popoutConfig.header, popoutConfig.settings, popoutConfig.labels),\n            parentId: popoutConfig.parentId ?? null,\n            indexInParent: popoutConfig.indexInParent ?? null,\n            window: PopoutLayoutConfig.Window.resolve(popoutConfig.window, popoutConfig.dimensions),\n            resolved: true,\n        }\n        return config;\n    }\n}\n\n/** @public @deprecated - use {@link (LayoutConfig:interface)} */\nexport type Config = LayoutConfig;\n","import { AssertError, UnreachableCaseError } from '../errors/internal-error';\nimport { ConfigMinifier } from '../utils/config-minifier';\nimport { ItemType, JsonValue, ResponsiveMode, Side } from '../utils/types';\nimport { deepExtendValue } from '../utils/utils';\n\n/** @public */\nexport interface ResolvedItemConfig {\n    // see ItemConfig for comments\n    readonly type: ItemType;\n    readonly content: readonly ResolvedItemConfig[];\n    readonly width: number;\n    readonly minWidth: number;\n    readonly height: number;\n    readonly minHeight: number;\n    // id no longer specifies whether an Item is maximised.  This is now done by HeaderItemConfig.maximised\n    readonly id: string;\n    readonly isClosable: boolean;\n}\n\n/** @public */\nexport namespace ResolvedItemConfig {\n    export const defaults: ResolvedItemConfig = {\n        type: ItemType.ground, // not really default but need something\n        content: [],\n        width: 50,\n        minWidth: 0,\n        height: 50,\n        minHeight: 0,\n        id: '',\n        isClosable: true,\n    } as const;\n\n    /** Creates a copy of the original ResolvedItemConfig using an alternative content if specified */\n    export function createCopy(original: ResolvedItemConfig, content?: ResolvedItemConfig[]): ResolvedItemConfig {\n        switch (original.type) {\n            case ItemType.ground:\n            case ItemType.row:\n            case ItemType.column:\n                return ResolvedRowOrColumnItemConfig.createCopy(original as ResolvedRowOrColumnItemConfig,\n                    content as ResolvedRowOrColumnItemConfig.ChildItemConfig[]);\n\n            case ItemType.stack:\n                return ResolvedStackItemConfig.createCopy(original as ResolvedStackItemConfig, content as ResolvedComponentItemConfig[]);\n\n            case ItemType.component:\n                return ResolvedComponentItemConfig.createCopy(original as ResolvedComponentItemConfig);\n\n            default:\n                throw new UnreachableCaseError('CICC91354', original.type, 'Invalid Config Item type specified');\n        }\n    }\n\n    export function createDefault(type: ItemType): ResolvedItemConfig {\n        switch (type) {\n            case ItemType.ground:\n                throw new AssertError('CICCDR91562'); // Get default root from LayoutConfig\n            case ItemType.row:\n            case ItemType.column:\n                return ResolvedRowOrColumnItemConfig.createDefault(type);\n\n            case ItemType.stack:\n                return ResolvedStackItemConfig.createDefault();\n\n            case ItemType.component:\n                return ResolvedComponentItemConfig.createDefault();\n\n            default:\n                throw new UnreachableCaseError('CICCDD91563', type, 'Invalid Config Item type specified');\n        }\n    }\n\n    export function isComponentItem(itemConfig: ResolvedItemConfig): itemConfig is ResolvedComponentItemConfig {\n        return itemConfig.type === ItemType.component;\n    }\n\n    export function isStackItem(itemConfig: ResolvedItemConfig): itemConfig is ResolvedStackItemConfig {\n        return itemConfig.type === ItemType.stack;\n    }\n\n    /** @internal */\n    export function isGroundItem(itemConfig: ResolvedItemConfig): itemConfig is ResolvedGroundItemConfig {\n        return itemConfig.type === ItemType.ground;\n    }\n}\n\n// Stack or Component\n/** @public */\nexport interface ResolvedHeaderedItemConfig extends ResolvedItemConfig {\n    header: ResolvedHeaderedItemConfig.Header | undefined; // undefined means get header settings from LayoutConfig\n    readonly maximised: boolean;\n}\n\n/** @public */\nexport namespace ResolvedHeaderedItemConfig {\n    export const defaultMaximised = false;\n\n    export interface Header {\n        // undefined means get property value from LayoutConfig\n        readonly show: false | Side | undefined;\n        readonly popout: false | string | undefined;\n        readonly maximise: false | string | undefined;\n        readonly close: string | undefined;\n        readonly minimise: string | undefined;\n        readonly tabDropdown: false | string | undefined;\n    }\n\n    export namespace Header {\n        export function createCopy(original: Header | undefined, show?: false | Side): Header | undefined {\n            if (original === undefined) {\n                return undefined;\n            } else {\n                return {\n                    show: show ?? original.show,\n                    popout: original.popout,\n                    close: original.close,\n                    maximise: original.maximise,\n                    minimise: original.minimise,\n                    tabDropdown: original.tabDropdown,\n                }\n            }\n        }\n    }\n}\n\n/** @public */\nexport interface ResolvedStackItemConfig extends ResolvedHeaderedItemConfig {\n    readonly type: 'stack';\n    readonly content: ResolvedComponentItemConfig[];\n    /** The index of the active item in the Stack.  Only undefined if the Stack is empty. */\n    readonly activeItemIndex: number | undefined;\n}\n\n/** @public */\nexport namespace ResolvedStackItemConfig {\n    export const defaultActiveItemIndex = 0;\n\n    export function createCopy(original: ResolvedStackItemConfig, content?: ResolvedComponentItemConfig[]): ResolvedStackItemConfig {\n        const result: ResolvedStackItemConfig = {\n            type: original.type,\n            content: content !== undefined ? copyContent(content) : copyContent(original.content),\n            width: original.width,\n            minWidth: original.minWidth,\n            height: original.height,\n            minHeight: original.minHeight,\n            id: original.id,\n            maximised: original.maximised,\n            isClosable: original.isClosable,\n            activeItemIndex: original.activeItemIndex,\n            header: ResolvedHeaderedItemConfig.Header.createCopy(original.header),\n        }\n        return result;\n    }\n\n    export function copyContent(original: ResolvedComponentItemConfig[]): ResolvedComponentItemConfig[] {\n        const count = original.length;\n        const result = new Array<ResolvedComponentItemConfig>(count);\n        for (let i = 0; i < count; i++) {\n            result[i] = ResolvedItemConfig.createCopy(original[i]) as ResolvedComponentItemConfig;\n        }\n        return result;\n    }\n\n    export function createDefault(): ResolvedStackItemConfig {\n        const result: ResolvedStackItemConfig = {\n            type: ItemType.stack,\n            content: [],\n            width: ResolvedItemConfig.defaults.width,\n            minWidth: ResolvedItemConfig.defaults.minWidth,\n            height: ResolvedItemConfig.defaults.height,\n            minHeight: ResolvedItemConfig.defaults.minHeight,\n            id: ResolvedItemConfig.defaults.id,\n            maximised: ResolvedHeaderedItemConfig.defaultMaximised,\n            isClosable: ResolvedItemConfig.defaults.isClosable,\n            activeItemIndex: defaultActiveItemIndex,\n            header: undefined,\n        }\n        return result;\n    }\n}\n\n/** @public */\nexport interface ResolvedComponentItemConfig extends ResolvedHeaderedItemConfig {\n    // see ComponentItemConfig for comments\n    readonly type: 'component';\n    readonly content: [];\n    readonly title: string;\n    readonly reorderEnabled: boolean; // Takes precedence over LayoutConfig.reorderEnabled.\n    /**\n     * The name of the component as specified in layout.registerComponent. Mandatory if type is 'component'.\n     */\n    readonly componentType: JsonValue;\n    readonly componentState?: JsonValue;\n}\n\n/** @public */\nexport namespace ResolvedComponentItemConfig {\n    export const defaultReorderEnabled = true;\n\n    export function resolveComponentTypeName(itemConfig: ResolvedComponentItemConfig): string | undefined {\n        const componentType = itemConfig.componentType;\n        if (typeof componentType === 'string') {\n            return componentType;\n        } else {\n            return undefined;\n        }\n    }\n\n    export function createCopy(original: ResolvedComponentItemConfig): ResolvedComponentItemConfig {\n        const result: ResolvedComponentItemConfig = {\n            type: original.type,\n            content: [],\n            width: original.width,\n            minWidth: original.minWidth,\n            height: original.height,\n            minHeight: original.minHeight,\n            id: original.id,\n            maximised: original.maximised,\n            isClosable: original.isClosable,\n            reorderEnabled: original.reorderEnabled,\n            title: original.title,\n            header: ResolvedHeaderedItemConfig.Header.createCopy(original.header),\n            componentType: original.componentType,\n            componentState: deepExtendValue(undefined, original.componentState) as JsonValue,\n        }\n        return result;\n    }\n\n    export function createDefault(componentType: JsonValue = '', componentState?: JsonValue, title = ''): ResolvedComponentItemConfig {\n        const result: ResolvedComponentItemConfig = {\n            type: ItemType.component,\n            content: [],\n            width: ResolvedItemConfig.defaults.width,\n            minWidth: ResolvedItemConfig.defaults.minWidth,\n            height: ResolvedItemConfig.defaults.height,\n            minHeight: ResolvedItemConfig.defaults.minHeight,\n            id: ResolvedItemConfig.defaults.id,\n            maximised: ResolvedHeaderedItemConfig.defaultMaximised,\n            isClosable: ResolvedItemConfig.defaults.isClosable,\n            reorderEnabled: ResolvedComponentItemConfig.defaultReorderEnabled,\n            title,\n            header: undefined,\n            componentType,\n            componentState,\n        }\n        return result;\n    }\n\n    export function copyComponentType(componentType: JsonValue): JsonValue {\n        return deepExtendValue({}, componentType) as JsonValue\n    }\n}\n\n/** Base for Root or RowOrColumn ItemConfigs\n * @public\n */\nexport interface ResolvedRowOrColumnItemConfig extends ResolvedItemConfig {\n    readonly type: 'row' | 'column';\n    /** Note that RowOrColumn ResolvedItemConfig contents, can contain ComponentItem itemConfigs.  However\n     * when ContentItems are created, these ComponentItem itemConfigs will create a Stack with a child ComponentItem.\n     */\n    readonly content: readonly (ResolvedRowOrColumnItemConfig | ResolvedStackItemConfig | ResolvedComponentItemConfig)[];\n}\n\n/** @public */\nexport namespace ResolvedRowOrColumnItemConfig {\n    export type ChildItemConfig = ResolvedRowOrColumnItemConfig | ResolvedStackItemConfig | ResolvedComponentItemConfig;\n\n    export function isChildItemConfig(itemConfig: ResolvedItemConfig): itemConfig is ChildItemConfig {\n        switch (itemConfig.type) {\n            case ItemType.row:\n            case ItemType.column:\n            case ItemType.stack:\n            case ItemType.component:\n                return true;\n            case ItemType.ground:\n                return false;\n            default:\n                throw new UnreachableCaseError('CROCOSPCICIC13687', itemConfig.type);\n        }\n    }\n\n    export function createCopy(original: ResolvedRowOrColumnItemConfig, content?: ChildItemConfig[]): ResolvedRowOrColumnItemConfig {\n        const result: ResolvedRowOrColumnItemConfig = {\n            type: original.type,\n            content: content !== undefined ? copyContent(content) : copyContent(original.content),\n            width: original.width,\n            minWidth: original.minWidth,\n            height: original.height,\n            minHeight: original.minHeight,\n            id: original.id,\n            isClosable: original.isClosable,\n        }\n        return result;\n    }\n\n    export function copyContent(original: readonly ChildItemConfig[]): ChildItemConfig[] {\n        const count = original.length;\n        const result = new Array<ChildItemConfig>(count);\n        for (let i = 0; i < count; i++) {\n            result[i] = ResolvedItemConfig.createCopy(original[i]) as ChildItemConfig;\n        }\n        return result;\n    }\n\n    export function createDefault(type: 'row' | 'column'): ResolvedRowOrColumnItemConfig {\n        const result: ResolvedRowOrColumnItemConfig = {\n            type,\n            content: [],\n            width: ResolvedItemConfig.defaults.width,\n            minWidth: ResolvedItemConfig.defaults.minWidth,\n            height: ResolvedItemConfig.defaults.height,\n            minHeight: ResolvedItemConfig.defaults.minHeight,\n            id: ResolvedItemConfig.defaults.id,\n            isClosable: ResolvedItemConfig.defaults.isClosable,\n        }\n        return result;\n    }\n}\n\n/**\n * RootItemConfig is the topmost ResolvedItemConfig specified by the user.\n * Note that it does not have a corresponding contentItem.  It specifies the one and only child of the Ground ContentItem\n * Note that RootItemConfig can be an ComponentItem itemConfig.  However when the Ground ContentItem's child is created\n * a ComponentItem itemConfig will create a Stack with a child ComponentItem.\n * @public\n*/\nexport type ResolvedRootItemConfig = ResolvedRowOrColumnItemConfig | ResolvedStackItemConfig | ResolvedComponentItemConfig;\n\n/** @public */\nexport namespace ResolvedRootItemConfig {\n    export function createCopy(config: ResolvedRootItemConfig): ResolvedRootItemConfig {\n        return ResolvedItemConfig.createCopy(config) as ResolvedRootItemConfig;\n    }\n\n    export function isRootItemConfig(itemConfig: ResolvedItemConfig): itemConfig is ResolvedRootItemConfig {\n        switch (itemConfig.type) {\n            case ItemType.row:\n            case ItemType.column:\n            case ItemType.stack:\n            case ItemType.component:\n                return true;\n            case ItemType.ground:\n                return false;\n            default:\n                throw new UnreachableCaseError('CROCOSPCICIC13687', itemConfig.type);\n        }\n    }\n}\n\n/** @internal */\nexport interface ResolvedGroundItemConfig extends ResolvedItemConfig {\n    readonly type: 'ground';\n    readonly width: 100,\n    readonly minWidth: 0,\n    readonly height: 100,\n    readonly minHeight: 0,\n    readonly id: '',\n    readonly isClosable: false,\n    readonly title: '',\n    readonly reorderEnabled: false,\n}\n\n/** @internal */\nexport namespace ResolvedGroundItemConfig {\n    export function create(rootItemConfig: ResolvedRootItemConfig | undefined):ResolvedGroundItemConfig {\n        const content = rootItemConfig === undefined ? [] : [rootItemConfig];\n        return {\n            type: ItemType.ground,\n            content,\n            width: 100,\n            minWidth: 0,\n            height: 100,\n            minHeight: 0,\n            id: '',\n            isClosable: false,\n            title: '',\n            reorderEnabled: false,\n        }\n    }\n}\n\n/** @public */\nexport interface ResolvedLayoutConfig {\n    readonly root: ResolvedRootItemConfig | undefined;\n    readonly openPopouts: ResolvedPopoutLayoutConfig[];\n    readonly dimensions: ResolvedLayoutConfig.Dimensions;\n    readonly settings: ResolvedLayoutConfig.Settings;\n    readonly header: ResolvedLayoutConfig.Header;\n    readonly resolved: true,\n}\n\n/** @public */\nexport namespace ResolvedLayoutConfig {\n    export interface Settings {\n        // see Config.Settings for comments\n        readonly constrainDragToContainer: boolean;\n        readonly reorderEnabled: boolean; // also in ResolvedItemConfig which takes precedence\n        readonly popoutWholeStack: boolean;\n        readonly blockedPopoutsThrowError: boolean;\n        readonly closePopoutsOnUnload: boolean;\n        readonly responsiveMode: ResponsiveMode;\n        readonly tabOverlapAllowance: number;\n        readonly reorderOnTabMenuClick: boolean;\n        readonly tabControlOffset: number;\n        readonly popInOnClose: boolean;\n    }\n\n    export namespace Settings {\n        export const defaults: ResolvedLayoutConfig.Settings = {\n            constrainDragToContainer: true,\n            reorderEnabled: true,\n            popoutWholeStack: false,\n            blockedPopoutsThrowError: true,\n            closePopoutsOnUnload: true,\n            responsiveMode: ResponsiveMode.none, // was onload\n            tabOverlapAllowance: 0,\n            reorderOnTabMenuClick: true,\n            tabControlOffset: 10,\n            popInOnClose: false,\n        } as const;\n\n        export function createCopy(original: Settings): Settings {\n            return {\n                constrainDragToContainer: original.constrainDragToContainer,\n                reorderEnabled: original.reorderEnabled,\n                popoutWholeStack: original.popoutWholeStack,\n                blockedPopoutsThrowError: original.blockedPopoutsThrowError,\n                closePopoutsOnUnload: original.closePopoutsOnUnload,\n                responsiveMode: original.responsiveMode,\n                tabOverlapAllowance: original.tabOverlapAllowance,\n                reorderOnTabMenuClick: original.reorderOnTabMenuClick,\n                tabControlOffset: original.tabControlOffset,\n                popInOnClose: original.popInOnClose,\n            }\n        }\n    }\n\n    export interface Dimensions {\n        // see LayoutConfig.Dimensions for comments\n        readonly borderWidth: number;\n        readonly borderGrabWidth: number,\n        readonly minItemHeight: number;\n        readonly minItemWidth: number;\n        readonly headerHeight: number;\n        readonly dragProxyWidth: number;\n        readonly dragProxyHeight: number;\n    }\n\n    export namespace Dimensions {\n        export function createCopy(original: Dimensions): Dimensions {\n            return {\n                borderWidth: original.borderWidth,\n                borderGrabWidth: original.borderGrabWidth,\n                minItemHeight: original.minItemHeight,\n                minItemWidth: original.minItemWidth,\n                headerHeight: original.headerHeight,\n                dragProxyWidth: original.dragProxyWidth,\n                dragProxyHeight: original.dragProxyHeight,\n            }\n        }\n\n        export const defaults: ResolvedLayoutConfig.Dimensions = {\n            borderWidth: 5,\n            borderGrabWidth: 5,\n            minItemHeight: 10,\n            minItemWidth: 10,\n            headerHeight: 20,\n            dragProxyWidth: 300,\n            dragProxyHeight: 200\n        } as const;\n    }\n\n    export interface Header {\n        readonly show: false | Side;\n        readonly popout: false | string;\n        readonly dock: string;\n        readonly maximise: false | string;\n        readonly minimise: string;\n        readonly close: false | string;\n        readonly tabDropdown: false | string;\n    }\n\n    export namespace Header {\n        export function createCopy(original: Header): Header {\n            return {\n                show: original.show,\n                popout: original.popout,\n                dock: original.dock,\n                close: original.close,\n                maximise: original.maximise,\n                minimise: original.minimise,\n                tabDropdown: original.tabDropdown,\n            }\n        }\n\n        export const defaults: ResolvedLayoutConfig.Header = {\n            show: Side.top,\n            popout: 'open in new window',\n            dock: 'dock',\n            maximise: 'maximise',\n            minimise: 'minimise',\n            close: 'close',\n            tabDropdown: 'additional tabs'\n        } as const;\n    }\n\n    export function isPopout(config: ResolvedLayoutConfig): config is ResolvedPopoutLayoutConfig {\n        return 'parentId' in config;\n    }\n\n    export function createDefault(): ResolvedLayoutConfig {\n        const result: ResolvedLayoutConfig = {\n            root: undefined,\n            openPopouts: [],\n            dimensions: ResolvedLayoutConfig.Dimensions.defaults,\n            settings: ResolvedLayoutConfig.Settings.defaults,\n            header: ResolvedLayoutConfig.Header.defaults,\n            resolved: true,\n        }\n        return result;\n    }\n\n    export function createCopy(config: ResolvedLayoutConfig): ResolvedLayoutConfig {\n        if (isPopout(config)) {\n            return ResolvedPopoutLayoutConfig.createCopy(config);\n        } else {\n            const result: ResolvedLayoutConfig = {\n                root: config.root === undefined ? undefined : ResolvedRootItemConfig.createCopy(config.root),\n                openPopouts: ResolvedLayoutConfig.copyOpenPopouts(config.openPopouts),\n                settings: ResolvedLayoutConfig.Settings.createCopy(config.settings),\n                dimensions: ResolvedLayoutConfig.Dimensions.createCopy(config.dimensions),\n                header: ResolvedLayoutConfig.Header.createCopy(config.header),\n                resolved: config.resolved,\n            }\n            return result;\n        }\n    }\n\n    export function copyOpenPopouts(original: ResolvedPopoutLayoutConfig[]): ResolvedPopoutLayoutConfig[] {\n        const count = original.length;\n        const result = new Array<ResolvedPopoutLayoutConfig>(count);\n        for (let i = 0; i < count; i++) {\n            result[i] = ResolvedPopoutLayoutConfig.createCopy(original[i]);\n        }\n        return result;\n    }\n\n    /**\n     * Takes a GoldenLayout configuration object and\n     * replaces its keys and values recursively with\n     * one letter counterparts\n     */\n    export function minifyConfig(layoutConfig: ResolvedLayoutConfig): ResolvedLayoutConfig {\n        return ConfigMinifier.translateObject(layoutConfig, true) as ResolvedLayoutConfig;\n    }\n\n    /**\n     * Takes a configuration Object that was previously minified\n     * using minifyConfig and returns its original version\n     */\n    export function unminifyConfig(minifiedConfig: ResolvedLayoutConfig): ResolvedLayoutConfig {\n        return ConfigMinifier.translateObject(minifiedConfig, false) as ResolvedLayoutConfig;\n    }\n}\n\n/** @public */\nexport interface ResolvedPopoutLayoutConfig extends ResolvedLayoutConfig {\n    readonly parentId: string | null;\n    readonly indexInParent: number | null;\n    readonly window: ResolvedPopoutLayoutConfig.Window;\n}\n\n/** @public */\nexport namespace ResolvedPopoutLayoutConfig {\n    export interface Window {\n        readonly width: number | null,\n        readonly height: number | null,\n        readonly left: number | null,\n        readonly top: number | null,\n    }\n\n    export namespace Window {\n        export function createCopy(original: Window): Window {\n            return {\n                width: original.width,\n                height: original.height,\n                left: original.left,\n                top: original.top,\n            }\n        }\n\n        export const defaults: ResolvedPopoutLayoutConfig.Window = {\n            width: null,\n            height: null,\n            left: null,\n            top: null,\n        } as const;\n    }\n\n    export function createCopy(original: ResolvedPopoutLayoutConfig): ResolvedPopoutLayoutConfig {\n        const result: ResolvedPopoutLayoutConfig = {\n            root: original.root === undefined ? undefined : ResolvedRootItemConfig.createCopy(original.root),\n            openPopouts: ResolvedLayoutConfig.copyOpenPopouts(original.openPopouts),\n            settings: ResolvedLayoutConfig.Settings.createCopy(original.settings),\n            dimensions: ResolvedLayoutConfig.Dimensions.createCopy(original.dimensions),\n            header: ResolvedLayoutConfig.Header.createCopy(original.header),\n            parentId: original.parentId,\n            indexInParent: original.indexInParent,\n            window: ResolvedPopoutLayoutConfig.Window.createCopy(original.window),\n            resolved: original.resolved,\n        }\n        return result;\n    }\n}\n","import { ComponentItemConfig, ItemConfig } from '../config/config';\nimport { ResolvedComponentItemConfig } from '../config/resolved-config';\nimport { Tab } from '../controls/tab';\nimport { AssertError, UnexpectedNullError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { ContentItem } from '../items/content-item';\nimport { LayoutManager } from '../layout-manager';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { JsonValue, LogicalZIndex, LogicalZIndexToDefaultMap } from '../utils/types';\nimport { deepExtend, setElementHeight, setElementWidth } from '../utils/utils';\n\n/** @public */\nexport class ComponentContainer extends EventEmitter {\n    /** @internal */\n    private _componentType: JsonValue;\n    /** @internal */\n    private _boundComponent: ComponentContainer.BindableComponent;\n    /** @internal */\n    private _width: number;\n    /** @internal */\n    private _height: number;\n    /** @internal */\n    private _isClosable;\n    /** @internal */\n    private _initialState: JsonValue | undefined;\n    /** @internal */\n    private _state: JsonValue | undefined;\n    /** @internal */\n    private _visible;\n    /** @internal */\n    private _isShownWithZeroDimensions;\n    /** @internal */\n    private _tab: Tab;\n    /** @internal */\n    private _stackMaximised = false;\n    /** @internal */\n    private _logicalZIndex: LogicalZIndex;\n\n    stateRequestEvent: ComponentContainer.StateRequestEventHandler | undefined;\n    virtualRectingRequiredEvent: ComponentContainer.VirtualRectingRequiredEvent | undefined;\n    virtualVisibilityChangeRequiredEvent: ComponentContainer.VirtualVisibilityChangeRequiredEvent | undefined;\n    virtualZIndexChangeRequiredEvent: ComponentContainer.VirtualZIndexChangeRequiredEvent | undefined;\n\n    get width(): number { return this._width; }\n    get height(): number { return this._height; }\n    get parent(): ComponentItem { return this._parent; }\n    /** @internal @deprecated use {@link (ComponentContainer:class).componentType} */\n    get componentName(): JsonValue { return this._componentType; }\n    get componentType(): JsonValue { return this._componentType; }\n    get virtual(): boolean { return this._boundComponent.virtual; }\n    get component(): ComponentContainer.Component { return this._boundComponent.component; }\n    get tab(): Tab { return this._tab; }\n    get title(): string { return this._parent.title; }\n    get layoutManager(): LayoutManager { return this._layoutManager; }\n    get isHidden(): boolean { return !this._visible; }\n    get visible(): boolean { return this._visible; }\n    get state(): JsonValue | undefined { return this._state; }\n    /** Return the initial component state */\n    get initialState(): JsonValue | undefined { return this._initialState; }\n    /** The inner DOM element where the container's content is intended to live in */\n    get element(): HTMLElement { return this._element; }\n\n    /** @internal */\n    constructor(\n        /** @internal */\n        private readonly _config: ResolvedComponentItemConfig,\n        /** @internal */\n        private readonly _parent: ComponentItem,\n        /** @internal */\n        private readonly _layoutManager: LayoutManager,\n        /** @internal */\n        private readonly _element: HTMLElement,\n        /** @internal */\n        private readonly _updateItemConfigEvent: ComponentContainer.UpdateItemConfigEventHandler,\n        /** @internal */\n        private readonly _showEvent: ComponentContainer.ShowEventHandler,\n        /** @internal */\n        private readonly _hideEvent: ComponentContainer.HideEventHandler,\n        /** @internal */\n        private readonly _focusEvent: ComponentContainer.FocusEventHandler,\n        /** @internal */\n        private readonly _blurEvent: ComponentContainer.BlurEventHandler,\n    ) {\n        super();\n\n        this._width = 0;\n        this._height = 0;\n        this._visible = true;\n        this._isShownWithZeroDimensions = true;\n\n        this._componentType = _config.componentType;\n        this._isClosable = _config.isClosable;\n        this._initialState = _config.componentState;\n        this._state = this._initialState;\n\n        this._boundComponent = this.layoutManager.bindComponent(this, _config);\n\n        this.updateElementPositionPropertyFromBoundComponent();\n    }\n\n    /** @internal */\n    destroy(): void {\n        this.releaseComponent();\n        this.stateRequestEvent = undefined;\n        this.emit('destroy');\n    }\n\n    /** @deprecated use {@link (ComponentContainer:class).element } */\n    getElement(): HTMLElement {\n        return this._element;\n    }\n\n    /**\n     * Hides the container's component item (and hence, the container) if not already hidden.\n     * Emits hide event prior to hiding the container.\n     */\n    hide(): void {\n        this._hideEvent();\n    }\n\n    /**\n     * Shows the container's component item (and hence, the container) if not visible.\n     * Emits show event prior to hiding the container.\n     */\n    show(): void {\n        this._showEvent();\n    }\n\n    /**\n     * Focus this component in Layout.\n     */\n    focus(suppressEvent = false): void {\n        this._focusEvent(suppressEvent);\n    }\n\n    /**\n     * Remove focus from this component in Layout.\n     */\n    blur(suppressEvent = false): void {\n        this._blurEvent(suppressEvent);\n    }\n\n    /**\n     * Set the size from within the container. Traverses up\n     * the item tree until it finds a row or column element\n     * and resizes its items accordingly.\n     *\n     * If this container isn't a descendant of a row or column\n     * it returns false\n     * @param width - The new width in pixel\n     * @param height - The new height in pixel\n     *\n     * @returns resizeSuccesful\n     *\n     * @internal\n     */\n    setSize(width: number, height: number): boolean {\n        let ancestorItem: ContentItem | null = this._parent;\n        if (ancestorItem.isColumn || ancestorItem.isRow || ancestorItem.parent === null) {\n            throw new AssertError('ICSSPRC', 'ComponentContainer cannot have RowColumn Parent');\n        } else {\n            let ancestorChildItem: ContentItem;\n            do {\n                ancestorChildItem = ancestorItem;\n                ancestorItem = ancestorItem.parent;\n            } while (ancestorItem !== null && !ancestorItem.isColumn && !ancestorItem.isRow);\n\n            if (ancestorItem === null) {\n                // no Row or Column found\n                return false;\n            } else {\n                // ancestorItem is Row or Column\n                const direction = ancestorItem.isColumn ? 'height' : 'width';\n                const currentSize = this[direction];\n                if (currentSize === null) {\n                    throw new UnexpectedNullError('ICSSCS11194');\n                } else {\n                    const newSize = direction === 'height' ? height : width;\n\n                    const totalPixel = currentSize * (1 / (ancestorChildItem[direction] / 100));\n                    const percentage = (newSize / totalPixel) * 100;\n                    const delta = (ancestorChildItem[direction] - percentage) / (ancestorItem.contentItems.length - 1);\n\n                    for (let i = 0; i < ancestorItem.contentItems.length; i++) {\n                        if (ancestorItem.contentItems[i] === ancestorChildItem) {\n                            ancestorItem.contentItems[i][direction] = percentage;\n                        } else {\n                            ancestorItem.contentItems[i][direction] += delta;\n                        }\n                    }\n\n                    ancestorItem.updateSize(false);\n\n                    return true;\n                }\n            }\n        }\n    }\n\n    /**\n     * Closes the container if it is closable. Can be called by\n     * both the component within at as well as the contentItem containing\n     * it. Emits a close event before the container itself is closed.\n     */\n    close(): void {\n        if (this._isClosable) {\n            this.emit('close');\n            this._parent.close();\n        }\n    }\n\n    /** Replaces component without affecting layout */\n    replaceComponent(itemConfig: ComponentItemConfig): void {\n        this.releaseComponent();\n\n        if (!ItemConfig.isComponent(itemConfig)) {\n            throw new Error('ReplaceComponent not passed a component ItemConfig')\n        } else {\n            const config = ComponentItemConfig.resolve(itemConfig);\n            this._initialState = config.componentState;\n            this._state = this._initialState;\n            this._componentType = config.componentType;\n\n            this._updateItemConfigEvent(config);\n\n            this._boundComponent = this.layoutManager.bindComponent(this, config);\n            this.updateElementPositionPropertyFromBoundComponent();\n\n            if (this._boundComponent.virtual) {\n                if (this.virtualVisibilityChangeRequiredEvent !== undefined) {\n                    this.virtualVisibilityChangeRequiredEvent(this, this._visible);\n                }\n                if (this.virtualRectingRequiredEvent !== undefined) {\n                    this._layoutManager.fireBeforeVirtualRectingEvent(1);\n                    try {\n                        this.virtualRectingRequiredEvent(this, this._width, this._height);\n                    } finally {\n                        this._layoutManager.fireAfterVirtualRectingEvent();\n                    }\n                }\n                this.setBaseLogicalZIndex();\n            }\n\n            this.emit('stateChanged');\n        }\n    }\n\n    /**\n     * Returns the initial component state or the latest passed in setState()\n     * @returns state\n     * @deprecated Use {@link (ComponentContainer:class).initialState}\n     */\n    getState(): JsonValue | undefined {\n        return this._state;\n    }\n\n    /**\n     * Merges the provided state into the current one\n     * @deprecated Use {@link (ComponentContainer:class).stateRequestEvent}\n     */\n    extendState(state: Record<string, unknown>): void {\n        const extendedState = deepExtend(this._state as Record<string, unknown>, state);\n        this.setState(extendedState as JsonValue);\n    }\n\n    /**\n     * Sets the component state\n     * @deprecated Use {@link (ComponentContainer:class).stateRequestEvent}\n     */\n    setState(state: JsonValue): void {\n        this._state = state;\n        this._parent.emitBaseBubblingEvent('stateChanged');\n    }\n\n    /**\n     * Set's the components title\n     */\n    setTitle(title: string): void {\n        this._parent.setTitle(title);\n    }\n\n    /** @internal */\n    setTab(tab: Tab): void {\n        this._tab = tab;\n        this.emit('tab', tab)\n    }\n\n    /** @internal */\n    setVisibility(value: boolean): void {\n        if (this._boundComponent.virtual) {\n            if (this.virtualVisibilityChangeRequiredEvent !== undefined) {\n                this.virtualVisibilityChangeRequiredEvent(this, value);\n            }\n        }\n\n        if (value) {\n            if (!this._visible) {\n                this._visible = true;\n                if (this._height === 0 && this._width === 0) {\n                    this._isShownWithZeroDimensions = true;\n                } else {\n                    this._isShownWithZeroDimensions = false;\n                    this.setSizeToNodeSize(this._width, this._height, true);\n                    this.emitShow();\n                }\n            } else {\n                if (this._isShownWithZeroDimensions && (this._height !== 0 || this._width !== 0)) {\n                    this._isShownWithZeroDimensions = false;\n                    this.setSizeToNodeSize(this._width, this._height, true);\n                    this.emitShow();\n                }\n            }\n        } else {\n            if (this._visible) {\n                this._visible = false;\n                this._isShownWithZeroDimensions = false;\n                this.emitHide();\n            }\n        }\n    }\n\n    setBaseLogicalZIndex(): void {\n        this.setLogicalZIndex(LogicalZIndex.base);\n    }\n\n    setLogicalZIndex(logicalZIndex: LogicalZIndex): void {\n        if (logicalZIndex !== this._logicalZIndex) {\n            this._logicalZIndex = logicalZIndex;\n\n            this.notifyVirtualZIndexChangeRequired();\n        }\n    }\n\n    /**\n     * Set the container's size, but considered temporary (for dragging)\n     * so don't emit any events.\n     * @internal\n     */\n    enterDragMode(width: number, height: number): void {\n        this._width = width;\n        this._height = height;\n        setElementWidth(this._element, width);\n        setElementHeight(this._element, height);\n\n        this.setLogicalZIndex(LogicalZIndex.drag);\n\n        this.drag();\n    }\n\n    /** @internal */\n    exitDragMode(): void {\n        this.setBaseLogicalZIndex();\n    }\n\n    /** @internal */\n    enterStackMaximised(): void {\n        this._stackMaximised = true;\n        this.setLogicalZIndex(LogicalZIndex.stackMaximised);\n    }\n\n    /** @internal */\n    exitStackMaximised(): void {\n        this.setBaseLogicalZIndex();\n        this._stackMaximised = false;\n    }\n\n    /** @internal */\n    drag(): void {\n        if (this._boundComponent.virtual) {\n            if (this.virtualRectingRequiredEvent !== undefined) {\n                this._layoutManager.fireBeforeVirtualRectingEvent(1);\n                try {\n                    this.virtualRectingRequiredEvent(this, this._width, this._height);\n                } finally {\n                    this._layoutManager.fireAfterVirtualRectingEvent();\n                }\n            }\n        }\n    }\n\n    /**\n     * Sets the container's size. Called by the container's component item.\n     * To instead set the size programmatically from within the component itself,\n     * use the public setSize method\n     * @param width - in px\n     * @param height - in px\n     * @param force - set even if no change\n     * @internal\n     */\n    setSizeToNodeSize(width: number, height: number, force: boolean): void {\n        if (width !== this._width || height !== this._height || force) {\n            this._width = width;\n            this._height = height;\n            setElementWidth(this._element, width);\n            setElementHeight(this._element, height);\n\n            if (this._boundComponent.virtual) {\n                this.addVirtualSizedContainerToLayoutManager();\n            } else {\n                this.emit('resize');\n                this.checkShownFromZeroDimensions();\n            }\n        }\n    }\n\n    /** @internal */\n    notifyVirtualRectingRequired(): void {\n        if (this.virtualRectingRequiredEvent !== undefined) {\n            this.virtualRectingRequiredEvent(this, this._width, this._height);\n            this.emit('resize');\n            this.checkShownFromZeroDimensions();\n        }\n    }\n\n    /** @internal */\n    private notifyVirtualZIndexChangeRequired(): void {\n        if (this.virtualZIndexChangeRequiredEvent !== undefined) {\n            const logicalZIndex = this._logicalZIndex;\n            const defaultZIndex = LogicalZIndexToDefaultMap[logicalZIndex];\n            this.virtualZIndexChangeRequiredEvent(this, logicalZIndex, defaultZIndex);\n        }\n    }\n\n    /** @internal */\n    private updateElementPositionPropertyFromBoundComponent() {\n        if (this._boundComponent.virtual) {\n            this._element.style.position = 'static';\n        } else {\n            this._element.style.position = ''; // set it back to attribute value\n        }\n    }\n\n    /** @internal */\n    private addVirtualSizedContainerToLayoutManager() {\n        this._layoutManager.beginVirtualSizedContainerAdding();\n        try {\n            this._layoutManager.addVirtualSizedContainer(this);\n        } finally {\n            this._layoutManager.endVirtualSizedContainerAdding();\n        }\n    }\n\n    /** @internal */\n    private checkShownFromZeroDimensions() {\n        if (this._isShownWithZeroDimensions && (this._height !== 0 || this._width !== 0)) {\n            this._isShownWithZeroDimensions = false;\n            this.emitShow();\n        }\n    }\n\n    /** @internal */\n    private emitShow(): void {\n        this.emit('shown');\n        this.emit('show');\n    }\n\n    /** @internal */\n    private emitHide(): void {\n        this.emit('hide');\n    }\n\n    /** @internal */\n    private releaseComponent() {\n        if (this._stackMaximised) {\n            this.exitStackMaximised();\n        }\n        this.emit('beforeComponentRelease', this._boundComponent.component);\n        this.layoutManager.unbindComponent(this, this._boundComponent.virtual, this._boundComponent.component);\n    }\n}\n\n/** @public @deprecated use {@link ComponentContainer} */\nexport type ItemContainer = ComponentContainer;\n\n/** @public */\nexport namespace ComponentContainer {\n    export type Component = unknown;\n\n    export interface BindableComponent {\n        component: Component;\n        virtual: boolean;\n    }\n\n    export type StateRequestEventHandler = (this: void) => JsonValue | undefined;\n    export type VirtualRectingRequiredEvent = (this: void, container: ComponentContainer, width: number, height: number) => void;\n    export type VirtualVisibilityChangeRequiredEvent = (this: void, container: ComponentContainer, visible: boolean) => void;\n    export type VirtualZIndexChangeRequiredEvent =\n        (this: void, container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) => void;\n    /** @internal */\n    export type ShowEventHandler = (this: void) => void;\n    /** @internal */\n    export type HideEventHandler = (this: void) => void;\n    /** @internal */\n    export type FocusEventHandler = (this: void, suppressEvent: boolean) => void;\n    /** @internal */\n    export type BlurEventHandler = (this: void, suppressEvent: boolean) => void;\n    /** @internal */\n    export type UpdateItemConfigEventHandler = (itemConfig: ResolvedComponentItemConfig) => void;\n}\n","import { ResolvedLayoutConfig, ResolvedPopoutLayoutConfig } from '../config/resolved-config';\nimport { PopoutBlockedError } from '../errors/external-error';\nimport { UnexpectedNullError, UnexpectedUndefinedError } from '../errors/internal-error';\nimport { ContentItem } from '../items/content-item';\nimport { LayoutManager } from '../layout-manager';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { Rect } from '../utils/types';\nimport { deepExtend, getUniqueId } from '../utils/utils';\n\n/**\n * Pops a content item out into a new browser window.\n * This is achieved by\n *\n *    - Creating a new configuration with the content item as root element\n *    - Serializing and minifying the configuration\n *    - Opening the current window's URL with the configuration as a GET parameter\n *    - GoldenLayout when opened in the new window will look for the GET parameter\n *      and use it instead of the provided configuration\n * @public\n */\n\nexport class BrowserPopout extends EventEmitter {\n    /** @internal */\n    private _popoutWindow: Window | null;\n    /** @internal */\n    private _isInitialised;\n    /** @internal */\n    private _checkReadyInterval: ReturnType<typeof setTimeout> | undefined;\n\n    /**\n     * @param _config - GoldenLayout item config\n     * @param _initialWindowSize - A map with width, height, top and left\n     * @internal\n     */\n    constructor(\n        /** @internal */\n        private _config: ResolvedPopoutLayoutConfig,\n        /** @internal */\n        private _initialWindowSize: Rect,\n        /** @internal */\n        private _layoutManager: LayoutManager,\n    ) {\n        super();\n\n        this._isInitialised = false;\n        this._popoutWindow = null;\n        this.createWindow();\n    }\n\n    toConfig(): ResolvedPopoutLayoutConfig {\n        if (this._isInitialised === false) {\n            throw new Error('Can\\'t create config, layout not yet initialised');\n        }\n\n        const glInstance = this.getGlInstance();\n        const glInstanceConfig = glInstance.saveLayout();\n\n        let left: number | null;\n        let top: number | null;\n        if (this._popoutWindow === null) {\n            left = null;\n            top = null;\n        } else {\n            left = this._popoutWindow.screenX ?? this._popoutWindow.screenLeft;\n            top = this._popoutWindow.screenY ?? this._popoutWindow.screenTop;\n        }\n\n        const window: ResolvedPopoutLayoutConfig.Window = {\n            width: this.getGlInstance().width,\n            height: this.getGlInstance().height,\n            left,\n            top,\n        };\n\n        const config: ResolvedPopoutLayoutConfig = {\n            root: glInstanceConfig.root,\n            openPopouts: glInstanceConfig.openPopouts,\n            settings: glInstanceConfig.settings,\n            dimensions: glInstanceConfig.dimensions,\n            header: glInstanceConfig.header,\n            window,\n            parentId: this._config.parentId,\n            indexInParent: this._config.indexInParent,\n            resolved: true,\n        };\n\n        return config;\n    }\n\n    getGlInstance(): LayoutManager {\n        if (this._popoutWindow === null) {\n            throw new UnexpectedNullError('BPGGI24693');\n        }\n        return this._popoutWindow.__glInstance;\n    }\n\n    /**\n     * Retrieves the native BrowserWindow backing this popout.\n     * Might throw an UnexpectedNullError exception when the window is not initialized yet.\n     * @public\n     */\n    getWindow(): Window {\n        if (this._popoutWindow === null) {\n            throw new UnexpectedNullError('BPGW087215');\n        }\n        return this._popoutWindow;\n    }\n\n    close(): void {\n        if (this.getGlInstance()) {\n            this.getGlInstance().closeWindow();\n        } else {\n            try {\n                this.getWindow().close();\n            } catch (e) {\n                //\n            }\n        }\n    }\n\n    /**\n     * Returns the popped out item to its original position. If the original\n     * parent isn't available anymore it falls back to the layout's topmost element\n     */\n    popIn(): void {\n        let parentItem: ContentItem;\n        let index = this._config.indexInParent;\n\n        if (!this._config.parentId) {\n            return;\n        }\n\n        /*\n        * The deepExtend call seems a bit pointless, but it's crucial to\n        * copy the config returned by this.getGlInstance().toConfig()\n        * onto a new object. Internet Explorer keeps the references\n        * to objects on the child window, resulting in the following error\n        * once the child window is closed:\n        *\n        * The callee (server [not server application]) is not available and disappeared\n        */\n        const glInstanceLayoutConfig = this.getGlInstance().saveLayout();\n        const copiedGlInstanceLayoutConfig = deepExtend({}, glInstanceLayoutConfig) as ResolvedLayoutConfig;\n        const copiedRoot = copiedGlInstanceLayoutConfig.root;\n        if (copiedRoot === undefined) {\n            throw new UnexpectedUndefinedError('BPPIR19998');\n        }\n        const groundItem = this._layoutManager.groundItem;\n        if (groundItem === undefined) {\n            throw new UnexpectedUndefinedError('BPPIG34972');\n        }\n        parentItem = groundItem.getItemsByPopInParentId(this._config.parentId)[0];\n\n        /*\n        * Fallback if parentItem is not available. Either add it to the topmost\n        * item or make it the topmost item if the layout is empty\n        */\n        if (!parentItem) {\n            if (groundItem.contentItems.length > 0) {\n                parentItem = groundItem.contentItems[0];\n            } else {\n                parentItem = groundItem;\n            }\n            index = 0;\n        }\n\n        const newContentItem = this._layoutManager.createAndInitContentItem(copiedRoot, parentItem);\n\n        parentItem.addChild(newContentItem, index);\n        if (this._layoutManager.layoutConfig.settings.popInOnClose) {\n            this._onClose();\n        } else {\n            this.close();\n        }\n    }\n\n    /**\n     * Creates the URL and window parameter\n     * and opens a new window\n     * @internal\n     */\n    private createWindow(): void {\n        const url = this.createUrl();\n\n        /**\n         * Bogus title to prevent re-usage of existing window with the\n         * same title. The actual title will be set by the new window's\n         * GoldenLayout instance if it detects that it is in subWindowMode\n         */\n        const target = Math.floor(Math.random() * 1000000).toString(36);\n\n        /**\n         * The options as used in the window.open string\n         */\n        const features = this.serializeWindowFeatures({\n            width: this._initialWindowSize.width,\n            height: this._initialWindowSize.height,\n            innerWidth: this._initialWindowSize.width,\n            innerHeight: this._initialWindowSize.height,\n            menubar: 'no',\n            toolbar: 'no',\n            location: 'no',\n            personalbar: 'no',\n            resizable: 'yes',\n            scrollbars: 'no',\n            status: 'no'\n        });\n\n        this._popoutWindow = globalThis.open(url, target, features);\n\n        if (!this._popoutWindow) {\n            if (this._layoutManager.layoutConfig.settings.blockedPopoutsThrowError === true) {\n                const error = new PopoutBlockedError('Popout blocked');\n                throw error;\n            } else {\n                return;\n            }\n        }\n\n        this._popoutWindow.addEventListener('load', () => this.positionWindow(), { passive: true })\n        this._popoutWindow.addEventListener('beforeunload', () => {\n            if (this._layoutManager.layoutConfig.settings.popInOnClose) {\n                this.popIn();\n            } else {\n                this._onClose();\n            }\n        }, { passive: true })\n\n        /**\n         * Polling the childwindow to find out if GoldenLayout has been initialised\n         * doesn't seem optimal, but the alternatives - adding a callback to the parent\n         * window or raising an event on the window object - both would introduce knowledge\n         * about the parent to the child window which we'd rather avoid\n         */\n        this._checkReadyInterval = setInterval(() => this.checkReady(), 10);\n    }\n\n    /** @internal */\n    private checkReady() {\n        if (this._popoutWindow === null) {\n            throw new UnexpectedNullError('BPCR01844');\n        } else {\n            if (this._popoutWindow.__glInstance && this._popoutWindow.__glInstance.isInitialised) {\n                this.onInitialised();\n                if (this._checkReadyInterval !== undefined) {\n                    clearInterval(this._checkReadyInterval);\n                    this._checkReadyInterval = undefined;\n                }\n            }\n        }\n    }\n\n    /**\n     * Serialises a map of key:values to a window options string\n     *\n     * @param windowOptions -\n     *\n     * @returns serialised window options\n     * @internal\n     */\n    private serializeWindowFeatures(windowOptions: Record<string, string | number>): string {\n        const windowOptionsString: string[] = [];\n\n        for (const key in windowOptions) {\n            windowOptionsString.push(key + '=' + windowOptions[key].toString());\n        }\n\n        return windowOptionsString.join(',');\n    }\n\n    /**\n     * Creates the URL for the new window, including the\n     * config GET parameter\n     *\n     * @returns URL\n     * @internal\n     */\n    private createUrl(): string {\n        const storageKey = 'gl-window-config-' + getUniqueId();\n        const config = ResolvedLayoutConfig.minifyConfig(this._config);\n\n        try {\n            localStorage.setItem(storageKey, JSON.stringify(config));\n        } catch (e) {\n            throw new Error('Error while writing to localStorage ' + e.toString());\n        }\n\n        const url = new URL(location.href);\n        url.searchParams.set('gl-window', storageKey);\n        return url.toString();\n    }\n\n    /**\n     * Move the newly created window roughly to\n     * where the component used to be.\n     * @internal\n     */\n    private positionWindow() {\n        if (this._popoutWindow === null) {\n            throw new Error('BrowserPopout.positionWindow: null popoutWindow');\n        } else {\n            this._popoutWindow.moveTo(this._initialWindowSize.left, this._initialWindowSize.top);\n            this._popoutWindow.focus();\n        }\n    }\n\n    /**\n     * Callback when the new window is opened and the GoldenLayout instance\n     * within it is initialised\n     * @internal\n     */\n    private onInitialised(): void {\n        this._isInitialised = true;\n        this.getGlInstance().on('popIn', () => this.popIn());\n        this.emit('initialised');\n    }\n\n    /**\n     * Invoked 50ms after the window unload event\n     * @internal\n     */\n    private _onClose() {\n        setTimeout(() => this.emit('closed'), 50);\n    }\n}\n","import { UnexpectedNullError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { ContentItem } from '../items/content-item';\nimport { Stack } from '../items/stack';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { getJQueryOffset } from '../utils/jquery-legacy';\nimport { Side } from '../utils/types';\nimport {\n    getElementWidthAndHeight,\n    numberToPixels\n} from '../utils/utils';\n\n/**\n * This class creates a temporary container\n * for the component whilst it is being dragged\n * and handles drag events\n * @internal\n */\nexport class DragProxy extends EventEmitter {\n    private _area: ContentItem.Area | null = null;\n    private _lastValidArea: ContentItem.Area | null = null;\n    private _minX: number;\n    private _minY: number;\n    private _maxX: number;\n    private _maxY: number;\n    private _sided: boolean;\n    private _element: HTMLElement;\n    private _proxyContainerElement: HTMLElement;\n    private _componentItemFocused: boolean;\n\n    get element(): HTMLElement { return this._element; }\n\n    /**\n     * @param x - The initial x position\n     * @param y - The initial y position\n     * @internal\n     */\n    constructor(x: number, y: number,\n        private readonly _dragListener: DragListener,\n        private readonly _layoutManager: LayoutManager,\n        private readonly _componentItem: ComponentItem,\n        private readonly _originalParent: ContentItem) {\n\n        super();\n\n        this._dragListener.on('drag', (offsetX, offsetY, event) => this.onDrag(offsetX, offsetY, event));\n        this._dragListener.on('dragStop', () => this.onDrop());\n\n        this.createDragProxyElements(x, y);\n\n        if (this._componentItem.parent === null) {\n            // Note that _contentItem will have dummy GroundItem as parent if initiated by a external drag source\n            throw new UnexpectedNullError('DPC10097');\n        }\n\n        this._componentItemFocused = this._componentItem.focused;\n        if (this._componentItemFocused) {\n            this._componentItem.blur();\n        }\n        this._componentItem.parent.removeChild(this._componentItem, true);\n\n        this.setDimensions();\n\n        document.body.appendChild(this._element);\n\n        this.determineMinMaxXY();\n        if (this._layoutManager.layoutConfig.settings.constrainDragToContainer) {\n            const constrainedPosition = this.getXYWithinMinMax(x, y);\n            x = constrainedPosition.x;\n            y = constrainedPosition.y;\n        }\n\n        this._layoutManager.calculateItemAreas();\n        this.setDropPosition(x, y);\n    }\n\n    /** Create Stack-like structure to contain the dragged component */\n    private createDragProxyElements(initialX: number, initialY: number): void {\n        this._element = document.createElement('div');\n        this._element.classList.add(DomConstants.ClassName.DragProxy);\n        const headerElement = document.createElement('div');\n        headerElement.classList.add(DomConstants.ClassName.Header);\n        const tabsElement = document.createElement('div');\n        tabsElement.classList.add(DomConstants.ClassName.Tabs);\n        const tabElement = document.createElement('div');\n        tabElement.classList.add(DomConstants.ClassName.Tab);\n        const titleElement = document.createElement('span');\n        titleElement.classList.add(DomConstants.ClassName.Title);\n        tabElement.appendChild(titleElement);\n        tabsElement.appendChild(tabElement);\n        headerElement.appendChild(tabsElement);\n\n        this._proxyContainerElement = document.createElement('div');\n        this._proxyContainerElement.classList.add(DomConstants.ClassName.Content);\n\n        this._element.appendChild(headerElement);\n        this._element.appendChild(this._proxyContainerElement);\n\n        if (this._originalParent instanceof Stack && this._originalParent.headerShow) {\n            this._sided = this._originalParent.headerLeftRightSided;\n            this._element.classList.add('lm_' + this._originalParent.headerSide);\n            if ([Side.right, Side.bottom].indexOf(this._originalParent.headerSide) >= 0) {\n                this._proxyContainerElement.insertAdjacentElement('afterend', headerElement);\n            }\n        }\n        this._element.style.left = numberToPixels(initialX);\n        this._element.style.top = numberToPixels(initialY);\n        tabElement.setAttribute('title', this._componentItem.title);\n        titleElement.insertAdjacentText('afterbegin', this._componentItem.title);\n        this._proxyContainerElement.appendChild(this._componentItem.element);\n    }\n\n    private determineMinMaxXY(): void {\n        const offset = getJQueryOffset(this._layoutManager.container);\n        this._minX = offset.left;\n        this._minY = offset.top;\n        const { width: containerWidth, height: containerHeight } = getElementWidthAndHeight(this._layoutManager.container);\n        this._maxX = containerWidth + this._minX;\n        this._maxY = containerHeight + this._minY;\n    }\n\n    private getXYWithinMinMax(x: number, y: number): {x: number, y: number} {\n        if (x <= this._minX) {\n            x = Math.ceil(this._minX + 1);\n        } else if (x >= this._maxX) {\n            x = Math.floor(this._maxX - 1);\n        }\n\n        if (y <= this._minY) {\n            y = Math.ceil(this._minY + 1);\n        } else if (y >= this._maxY) {\n            y = Math.floor(this._maxY - 1);\n        }\n\n        return {x,y};\n    }\n\n    /**\n     * Callback on every mouseMove event during a drag. Determines if the drag is\n     * still within the valid drag area and calls the layoutManager to highlight the\n     * current drop area\n     *\n     * @param offsetX - The difference from the original x position in px\n     * @param offsetY - The difference from the original y position in px\n     * @param event -\n     * @internal\n     */\n    private onDrag(offsetX: number, offsetY: number, event: PointerEvent) {\n\n        const x = event.pageX;\n        const y = event.pageY;\n\n        if (!this._layoutManager.layoutConfig.settings.constrainDragToContainer) {\n            this.setDropPosition(x, y);\n        } else {\n            const isWithinContainer = x > this._minX && x < this._maxX && y > this._minY && y < this._maxY;\n            if (isWithinContainer) {\n                this.setDropPosition(x, y);\n            }\n        }\n\n        this._componentItem.drag();\n    }\n\n    /**\n     * Sets the target position, highlighting the appropriate area\n     *\n     * @param x - The x position in px\n     * @param y - The y position in px\n     *\n     * @internal\n     */\n    private setDropPosition(x: number, y: number): void {\n        this._element.style.left = numberToPixels(x);\n        this._element.style.top = numberToPixels(y);\n        this._area = this._layoutManager.getArea(x, y);\n\n        if (this._area !== null) {\n            this._lastValidArea = this._area;\n            this._area.contentItem.highlightDropZone(x, y, this._area);\n        }\n    }\n\n    /**\n     * Callback when the drag has finished. Determines the drop area\n     * and adds the child to it\n     * @internal\n     */\n    private onDrop(): void {\n        const dropTargetIndicator = this._layoutManager.dropTargetIndicator;\n        if (dropTargetIndicator === null) {\n            throw new UnexpectedNullError('DPOD30011');\n        } else {\n            dropTargetIndicator.hide();\n        }\n\n        this._componentItem.exitDragMode();\n\n        /*\n         * Valid drop area found\n         */\n        let droppedComponentItem: ComponentItem | undefined;\n        if (this._area !== null) {\n            droppedComponentItem = this._componentItem;\n            this._area.contentItem.onDrop(droppedComponentItem, this._area);\n\n            /**\n             * No valid drop area available at present, but one has been found before.\n             * Use it\n             */\n        } else if (this._lastValidArea !== null) {\n            droppedComponentItem = this._componentItem;\n            const newParentContentItem = this._lastValidArea.contentItem;\n            newParentContentItem.onDrop(droppedComponentItem, this._lastValidArea);\n\n            /**\n             * No valid drop area found during the duration of the drag. Return\n             * content item to its original position if a original parent is provided.\n             * (Which is not the case if the drag had been initiated by createDragSource)\n             */\n        } else if (this._originalParent) {\n            droppedComponentItem = this._componentItem;\n            this._originalParent.addChild(droppedComponentItem);\n\n            /**\n             * The drag didn't ultimately end up with adding the content item to\n             * any container. In order to ensure clean up happens, destroy the\n             * content item.\n             */\n        } else {\n            this._componentItem.destroy(); // contentItem children are now destroyed as well\n        }\n\n        this._element.remove();\n\n        this._layoutManager.emit('itemDropped', this._componentItem);\n\n        if (this._componentItemFocused && droppedComponentItem !== undefined) {\n            droppedComponentItem.focus();\n        }\n    }\n\n    /**\n     * Updates the Drag Proxy's dimensions\n     * @internal\n     */\n    private setDimensions() {\n        const dimensions = this._layoutManager.layoutConfig.dimensions;\n        if (dimensions === undefined) {\n            throw new Error('DragProxy.setDimensions: dimensions undefined');\n        }\n\n        let width = dimensions.dragProxyWidth;\n        let height = dimensions.dragProxyHeight;\n        if (width === undefined || height === undefined) {\n            throw new Error('DragProxy.setDimensions: width and/or height undefined');\n        }\n\n        const headerHeight = this._layoutManager.layoutConfig.header.show === false ? 0 : dimensions.headerHeight;\n        this._element.style.width = numberToPixels(width);\n        this._element.style.height = numberToPixels(height)\n        width -= (this._sided ? headerHeight : 0);\n        height -= (!this._sided ? headerHeight : 0);\n        this._proxyContainerElement.style.width = numberToPixels(width);\n        this._proxyContainerElement.style.height = numberToPixels(height);\n        this._componentItem.enterDragMode(width, height);\n        this._componentItem.show();\n    }\n}\n","import { ComponentItemConfig } from '../config/config';\nimport { UnexpectedNullError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { GroundItem } from '../items/ground-item';\nimport { LayoutManager } from '../layout-manager';\nimport { DragListener } from '../utils/drag-listener';\nimport { JsonValue } from '../utils/types';\nimport { DragProxy } from './drag-proxy';\nimport { ResolvedRowOrColumnItemConfig } from \"../config/resolved-config\";\n\n/**\n * Allows for any DOM item to create a component on drag\n * start to be dragged into the Layout\n * @public\n */\nexport class DragSource {\n    /** @internal */\n    private _dragListener: DragListener | null;\n    /** @internal */\n    private _dummyGroundContainer: HTMLElement;\n    /** @internal */\n    private _dummyGroundContentItem: GroundItem;\n \n    /** @internal */\n    constructor(\n        /** @internal */\n        private _layoutManager: LayoutManager,\n        /** @internal */\n        private readonly _element: HTMLElement,\n        /** @internal */\n        private readonly _extraAllowableChildTargets: HTMLElement[],\n        /** @internal */\n        private _componentTypeOrFtn: JsonValue | (() => DragSource.ComponentItemConfig),\n        /** @internal */\n        private _componentState: JsonValue | undefined,\n        /** @internal */\n        private _title: string | undefined,\n    ) {\n        this._dragListener = null;\n\n        this._dummyGroundContainer = document.createElement('div');\n\n        const dummyRootItemConfig = ResolvedRowOrColumnItemConfig.createDefault('row');\n        this._dummyGroundContentItem = new GroundItem(this._layoutManager, dummyRootItemConfig, this._dummyGroundContainer);\n \n        this.createDragListener();\n    }\n\n\t/**\n\t * Disposes of the drag listeners so the drag source is not usable any more.\n     * @internal\n\t */\n\tdestroy(): void {\n\t\tthis.removeDragListener();\n    }\n    \n    /**\n     * Called initially and after every drag\n     * @internal\n     */\n    private createDragListener() {\n        this.removeDragListener();\n\n        this._dragListener = new DragListener(this._element, this._extraAllowableChildTargets);\n        this._dragListener.on('dragStart', (x, y) => this.onDragStart(x, y));\n        this._dragListener.on('dragStop', () => this.onDragStop());\n    }\n\n    /**\n     * Callback for the DragListener's dragStart event\n     *\n     * @param x - The x position of the mouse on dragStart\n     * @param y - The x position of the mouse on dragStart\n     * @internal\n     */\n    private onDragStart(x: number, y: number) {\n        let componentType: JsonValue;\n        let componentState: JsonValue | undefined;\n        let title: string | undefined;\n        if (typeof this._componentTypeOrFtn === \"function\") {\n            const dragSourceItemConfig: DragSource.ComponentItemConfig = this._componentTypeOrFtn();\n            componentType = dragSourceItemConfig.type;\n            componentState = dragSourceItemConfig.state;\n            title = dragSourceItemConfig.title;\n        } else {\n            componentType = this._componentTypeOrFtn;\n            componentState = this._componentState;\n            title = this._title;\n        }\n\n        // Create a dummy ContentItem only for drag purposes\n        // All ContentItems (except for GroundItem) need a parent.  When dragging, the parent is not used.\n        // Instead of allowing null parents (as Javascript version did), use a temporary dummy GroundItem parent and add ContentItem to that\n        // If this does not work, need to create alternative GroundItem class\n\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        }\n        const resolvedItemConfig = ComponentItemConfig.resolve(itemConfig);\n\n        const componentItem = new ComponentItem(this._layoutManager, resolvedItemConfig, this._dummyGroundContentItem)\n        this._dummyGroundContentItem.contentItems.push(componentItem);\n\n        if (this._dragListener === null) {\n            throw new UnexpectedNullError('DSODSD66746');\n        } else {\n            const dragProxy = new DragProxy(x, y, this._dragListener, this._layoutManager, componentItem , this._dummyGroundContentItem);\n\n            const transitionIndicator = this._layoutManager.transitionIndicator;\n            if (transitionIndicator === null) {\n                throw new UnexpectedNullError('DSODST66746');\n            } else {\n                transitionIndicator.transitionElements(this._element, dragProxy.element);\n            }\n        }\n    }\n\n    /** @internal */\n    private onDragStop() {\n        // if (this._dummyGroundContentItem === undefined) {\n        //     throw new UnexpectedUndefinedError('DSODSDRU08116');\n        // } else {\n        //     this._dummyGroundContentItem._$destroy\n        //     this._dummyGroundContentItem = undefined;\n        // }\n        this.createDragListener();\n    }\n\n    /**\n\t * Called after every drag and when the drag source is being disposed of.\n     * @internal\n\t */\n\tprivate removeDragListener() {\n\t\tif (this._dragListener !== null ) {\n            this._dragListener.destroy();\n            this._dragListener = null;\n\t\t}\n\t}\n}\n\n/** @public */\nexport namespace DragSource {\n    export interface ComponentItemConfig {\n        type: JsonValue,\n        state?: JsonValue,\n        title?: string,\n    }\n}\n","import { DomConstants } from '../utils/dom-constants';\nimport { AreaLinkedRect } from '../utils/types';\nimport { numberToPixels, setElementDisplayVisibility } from '../utils/utils';\n\n/** @internal */\nexport class DropTargetIndicator {\n    private _element: HTMLElement;\n\n    constructor() {\n        // Maybe use container instead of Document Body?\n        this._element = document.createElement('div');\n        this._element.classList.add(DomConstants.ClassName.DropTargetIndicator);\n        const innerElement = document.createElement('div');\n        innerElement.classList.add(DomConstants.ClassName.Inner);\n        this._element.appendChild(innerElement);\n\n        document.body.appendChild(this._element);\n    }\n\n    destroy(): void {\n        this._element.remove();\n    }\n\n    highlightArea(area: AreaLinkedRect): void {\n        this._element.style.left = numberToPixels(area.x1);\n        this._element.style.top = numberToPixels(area.y1);\n        this._element.style.width = numberToPixels(area.x2 - area.x1);\n        this._element.style.height = numberToPixels(area.y2 - area.y1);\n        this._element.style.display = 'block';\n    }\n\n    hide(): void {\n        setElementDisplayVisibility(this._element, false);\n    }\n}\n","import { Header } from './header';\n\n/** @internal */\nexport class HeaderButton {\n    private _element: HTMLElement;\n    private _clickEventListener = (ev: MouseEvent) => this.onClick(ev);\n    private _touchStartEventListener = (ev: TouchEvent) => this.onTouchStart(ev);\n\n    get element(): HTMLElement { return this._element; }\n\n    constructor(private _header: Header, label: string, cssClass: string, private _pushEvent: HeaderButton.PushEvent) {\n        this._element = document.createElement('div');\n        this._element.classList.add(cssClass);\n        this._element.title = label;\n        this._header.on('destroy', () => this.destroy());\n        this._element.addEventListener('click', this._clickEventListener, { passive: true });\n        this._element.addEventListener('touchstart', this._touchStartEventListener, { passive: true });\n        this._header.controlsContainerElement.appendChild(this._element);\n    }\n\n    destroy(): void {\n        this._element.removeEventListener('click', this._clickEventListener);\n        this._element.removeEventListener('touchstart', this._touchStartEventListener);\n        this._element.parentNode?.removeChild(this._element);\n    }\n\n    private onClick(ev: MouseEvent) {\n        this._pushEvent(ev);\n    }\n\n    private onTouchStart(ev: TouchEvent) {\n        this._pushEvent(ev);\n    }\n}\n\n/** @internal */\nexport namespace HeaderButton {\n    export type PushEvent = (this: void, ev: Event) => void;\n}\n","import { UnexpectedUndefinedError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { Stack } from '../items/stack';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { Side } from '../utils/types';\nimport { numberToPixels, setElementDisplayVisibility } from '../utils/utils';\nimport { HeaderButton } from './header-button';\nimport { Tab } from './tab';\nimport { TabsContainer } from './tabs-container';\n\n/**\n * This class represents a header above a Stack ContentItem.\n * @public\n */\nexport class Header extends EventEmitter {\n    /** @internal */\n    private readonly _tabsContainer: TabsContainer;\n    /** @internal */\n    private readonly _element: HTMLElement;\n    /** @internal */\n    private readonly _controlsContainerElement: HTMLElement;\n\n    /** @internal */\n    private readonly _show: boolean;\n    /** @internal */\n    private readonly _popoutEnabled: boolean;\n    /** @internal */\n    private readonly _popoutLabel: string;\n    /** @internal */\n    private readonly _maximiseEnabled: boolean;\n    /** @internal */\n    private readonly _maximiseLabel: string;\n    /** @internal */\n    private readonly _minimiseEnabled: boolean;\n    /** @internal */\n    private readonly _minimiseLabel: string;\n    /** @internal */\n    private readonly _closeEnabled: boolean;\n    /** @internal */\n    private readonly _closeLabel: string;\n    /** @internal */\n    private readonly _tabDropdownEnabled: boolean;\n    /** @internal */\n    private readonly _tabDropdownLabel: string;\n\n    /** @internal */\n    private readonly _tabControlOffset: number;\n\n    /** @internal */\n    private readonly _clickListener = (ev: MouseEvent) => this.onClick(ev);\n    /** @internal */\n    private readonly _touchStartListener = (ev: TouchEvent) => this.onTouchStart(ev);\n    /** @internal */\n    private readonly _documentMouseUpListener: (this: void) => void;\n\n    /** @internal */\n    private _rowColumnClosable = true;\n    /** @internal */\n    private _canRemoveComponent: boolean;\n    /** @internal */\n    private _side: Side;\n    /** @internal */\n    private _leftRightSided: boolean;\n    /** @internal */\n    private readonly _closeButton: HeaderButton | null = null;\n    /** @internal */\n    private readonly _popoutButton: HeaderButton | null = null;\n    /** @internal */\n    private readonly _tabDropdownButton: HeaderButton;\n    /** @internal */\n    private readonly _maximiseButton: HeaderButton | undefined;\n    // /** @internal */\n    // private _activeComponentItem: ComponentItem | null = null; // only used to identify active tab\n\n    get show(): boolean { return this._show; }\n    get side(): Side { return this._side; }\n    get leftRightSided(): boolean { return this._leftRightSided; }\n\n    get layoutManager(): LayoutManager { return this._layoutManager; }\n    get parent(): Stack { return this._parent; }\n    get tabs(): Tab[] { return this._tabsContainer.tabs; }\n    get lastVisibleTabIndex(): number { return this._tabsContainer.lastVisibleTabIndex; }\n\n    get element(): HTMLElement { return this._element; }\n    get tabsContainerElement(): HTMLElement { return this._tabsContainer.element; }\n    get controlsContainerElement(): HTMLElement { return this._controlsContainerElement; }\n\n    /** @internal */\n    constructor(\n        /** @internal */\n        private _layoutManager: LayoutManager,\n        /** @internal */\n        private _parent: Stack,\n        settings: Header.Settings,\n        /** @internal */\n        private readonly _configClosable: boolean,\n        /** @internal */\n        private _getActiveComponentItemEvent: Header.GetActiveComponentItemEvent,\n        closeEvent: Header.CloseEvent,\n        /** @internal */\n        private _popoutEvent: Header.PopoutEvent | undefined,\n        /** @internal */\n        private _maximiseToggleEvent: Header.MaximiseToggleEvent | undefined,\n        /** @internal */\n        private _clickEvent: Header.ClickEvent | undefined,\n        /** @internal */\n        private _touchStartEvent: Header.TouchStartEvent | undefined,\n        /** @internal */\n        private _componentRemoveEvent: Header.ComponentRemoveEvent | undefined,\n        /** @internal */\n        private _componentFocusEvent: Header.ComponentFocusEvent | undefined,\n        /** @internal */\n        private _componentDragStartEvent: Header.ComponentDragStartEvent | undefined,\n    ) {\n        super();\n\n        this._tabsContainer = new TabsContainer(this._layoutManager,\n            (item) => this.handleTabInitiatedComponentRemoveEvent(item),\n            (item) => this.handleTabInitiatedComponentFocusEvent(item),\n            (x, y, dragListener, item) => this.handleTabInitiatedDragStartEvent(x, y, dragListener, item),\n            () => this.processTabDropdownActiveChanged(),\n        );\n\n        this._show = settings.show;\n        this._popoutEnabled = settings.popoutEnabled;\n        this._popoutLabel = settings.popoutLabel;\n        this._maximiseEnabled = settings.maximiseEnabled;\n        this._maximiseLabel = settings.maximiseLabel;\n        this._minimiseEnabled = settings.minimiseEnabled;\n        this._minimiseLabel = settings.minimiseLabel;\n        this._closeEnabled = settings.closeEnabled;\n        this._closeLabel = settings.closeLabel;\n        this._tabDropdownEnabled = settings.tabDropdownEnabled;\n        this._tabDropdownLabel = settings.tabDropdownLabel;\n        this.setSide(settings.side);\n\n        this._canRemoveComponent = this._configClosable;\n\n        this._element = document.createElement('section');\n        this._element.classList.add(DomConstants.ClassName.Header);\n        this._controlsContainerElement = document.createElement('section');\n        this._controlsContainerElement.classList.add(DomConstants.ClassName.Controls);\n        this._element.appendChild(this._tabsContainer.element);\n        this._element.appendChild(this._controlsContainerElement);\n        this._element.appendChild(this._tabsContainer.dropdownElement);\n\n        this._element.addEventListener('click', this._clickListener, { passive: true });\n        this._element.addEventListener('touchstart', this._touchStartListener, { passive: true });\n\n        this._documentMouseUpListener = () => this._tabsContainer.hideAdditionalTabsDropdown()\n        globalThis.document.addEventListener('mouseup', this._documentMouseUpListener, { passive: true });\n\n        this._tabControlOffset = this._layoutManager.layoutConfig.settings.tabControlOffset;\n\n        if (this._tabDropdownEnabled) {\n            this._tabDropdownButton = new HeaderButton(this, this._tabDropdownLabel, DomConstants.ClassName.TabDropdown,\n                () => this._tabsContainer.showAdditionalTabsDropdown()\n            );\n        }\n\n        if (this._popoutEnabled) {\n            this._popoutButton = new HeaderButton(this, this._popoutLabel, DomConstants.ClassName.Popout, () => this.handleButtonPopoutEvent());\n        }\n\n        /**\n         * Maximise control - set the component to the full size of the layout\n         */\n        if (this._maximiseEnabled) {\n            this._maximiseButton = new HeaderButton(this, this._maximiseLabel, DomConstants.ClassName.Maximise,\n                (ev) => this.handleButtonMaximiseToggleEvent(ev)\n            );\n        }\n\n        /**\n         * Close button\n         */\n        if (this._configClosable) {\n            this._closeButton = new HeaderButton(this, this._closeLabel, DomConstants.ClassName.Close, () => closeEvent());\n        }\n\n        this.processTabDropdownActiveChanged();\n    }\n\n    /**\n     * Destroys the entire header\n     * @internal\n     */\n    destroy(): void {\n        this.emit('destroy');\n\n        this._popoutEvent = undefined;\n        this._maximiseToggleEvent = undefined;\n        this._clickEvent = undefined;\n        this._touchStartEvent = undefined;\n        this._componentRemoveEvent = undefined;\n        this._componentFocusEvent = undefined;\n        this._componentDragStartEvent = undefined;\n\n        this._tabsContainer.destroy();\n\n        globalThis.document.removeEventListener('mouseup', this._documentMouseUpListener);\n        this._element.remove();\n    }\n\n    /**\n     * Creates a new tab and associates it with a contentItem\n     * @param index - The position of the tab\n     * @internal\n     */\n    createTab(componentItem: ComponentItem, index: number): void {\n        this._tabsContainer.createTab(componentItem, index);\n    }\n\n    /**\n     * Finds a tab based on the contentItem its associated with and removes it.\n     * Cannot remove tab if it has the active ComponentItem\n     * @internal\n     */\n    removeTab(componentItem: ComponentItem): void {\n        this._tabsContainer.removeTab(componentItem);\n    }\n\n    /** @internal */\n    processActiveComponentChanged(newActiveComponentItem: ComponentItem): void {\n        this._tabsContainer.processActiveComponentChanged(newActiveComponentItem);\n        this.updateTabSizes();\n    }\n\n    /** @internal */\n    setSide(value: Side): void {\n        this._side = value;\n        this._leftRightSided = [Side.right, Side.left].includes(this._side);\n    }\n\n    /**\n     * Programmatically set closability.\n     * @param value - Whether to enable/disable closability.\n     * @returns Whether the action was successful\n     * @internal\n     */\n    setRowColumnClosable(value: boolean): void {\n        this._rowColumnClosable = value;\n        this.updateClosability();\n    }\n\n    /**\n     * Updates the header's closability. If a stack/header is able\n     * to close, but has a non closable component added to it, the stack is no\n     * longer closable until all components are closable.\n     * @internal\n     */\n    updateClosability(): void {\n        let isClosable: boolean;\n        if (!this._configClosable) {\n            isClosable = false;\n        } else {\n            if (!this._rowColumnClosable) {\n                isClosable = false;\n            } else {\n                isClosable = true;\n                const len = this.tabs.length;\n                for (let i = 0; i < len; i++) {\n                    const tab = this._tabsContainer.tabs[i];\n                    const item = tab.componentItem;\n                    if (!item.isClosable) {\n                        isClosable = false;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (this._closeButton !== null) {\n            setElementDisplayVisibility(this._closeButton.element, isClosable);\n        }\n        if (this._popoutButton !== null) {\n            setElementDisplayVisibility(this._popoutButton.element, isClosable);\n        }\n\n        this._canRemoveComponent = isClosable || this._tabsContainer.tabCount > 1;\n    }\n\n    /** @internal */\n    applyFocusedValue(value: boolean): void {\n        if (value) {\n            this._element.classList.add(DomConstants.ClassName.Focused);\n        } else {\n            this._element.classList.remove(DomConstants.ClassName.Focused);\n        }\n    }\n\n    /** @internal */\n    processMaximised(): void {\n        if (this._maximiseButton === undefined) {\n            throw new UnexpectedUndefinedError('HPMAX16997');\n        } else {\n            this._maximiseButton.element.setAttribute('title', this._minimiseLabel);\n        }\n    }\n\n    /** @internal */\n    processMinimised(): void {\n        if (this._maximiseButton === undefined) {\n            throw new UnexpectedUndefinedError('HPMIN16997');\n        } else {\n            this._maximiseButton.element.setAttribute('title', this._maximiseLabel);\n        }\n    }\n\n    /**\n     * Pushes the tabs to the tab dropdown if the available space is not sufficient\n     * @internal\n     */\n    updateTabSizes(): void {\n        if (this._tabsContainer.tabCount > 0) {\n            const headerHeight = this._show ? this._layoutManager.layoutConfig.dimensions.headerHeight : 0;\n\n            if (this._leftRightSided) {\n                this._element.style.height = '';\n                this._element.style.width = numberToPixels(headerHeight);\n            } else {\n                this._element.style.width = '';\n                this._element.style.height = numberToPixels(headerHeight);\n            }\n            let availableWidth: number;\n            if (this._leftRightSided) {\n                availableWidth = this._element.offsetHeight - this._controlsContainerElement.offsetHeight - this._tabControlOffset;\n            } else {\n                availableWidth = this._element.offsetWidth - this._controlsContainerElement.offsetWidth - this._tabControlOffset;\n            }\n\n            this._tabsContainer.updateTabSizes(availableWidth, this._getActiveComponentItemEvent());\n        }\n    }\n\n    /** @internal */\n    private handleTabInitiatedComponentRemoveEvent(componentItem: ComponentItem) {\n        if (this._canRemoveComponent) {\n            if (this._componentRemoveEvent === undefined) {\n                throw new UnexpectedUndefinedError('HHTCE22294');\n            } else {\n                this._componentRemoveEvent(componentItem);\n            }\n        }\n    }\n\n    /** @internal */\n    private handleTabInitiatedComponentFocusEvent(componentItem: ComponentItem) {\n        if (this._componentFocusEvent === undefined) {\n            throw new UnexpectedUndefinedError('HHTAE22294');\n        } else {\n            this._componentFocusEvent(componentItem);\n        }\n    }\n\n    /** @internal */\n    private handleTabInitiatedDragStartEvent(x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) {\n        if (!this._canRemoveComponent) {\n            dragListener.cancelDrag();\n        } else {\n            if (this._componentDragStartEvent === undefined) {\n                throw new UnexpectedUndefinedError('HHTDSE22294');\n            } else {\n                this._componentDragStartEvent(x, y, dragListener, componentItem);\n            }\n        }\n    }\n\n    /** @internal */\n    private processTabDropdownActiveChanged() {\n        if (this._tabDropdownButton !== undefined) {\n            setElementDisplayVisibility(this._tabDropdownButton.element, this._tabsContainer.dropdownActive);\n        }\n    }\n\n    /** @internal */\n    private handleButtonPopoutEvent() {\n        if (this._layoutManager.layoutConfig.settings.popoutWholeStack) {\n            if (this._popoutEvent === undefined) {\n                throw new UnexpectedUndefinedError('HHBPOE17834');\n            } else {\n                this._popoutEvent();\n            }\n        } else {\n            const activeComponentItem = this._getActiveComponentItemEvent();\n            if (activeComponentItem) {\n                activeComponentItem.popout();\n            }\n            // else: if the stack is empty there won't be an active item (and nothing to popout)\n        }\n    }\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    private handleButtonMaximiseToggleEvent(ev: Event) {\n        if (this._maximiseToggleEvent === undefined) {\n            throw new UnexpectedUndefinedError('HHBMTE16834');\n        } else {\n            this._maximiseToggleEvent();\n        }\n    }\n\n    /**\n     * Invoked when the header's background is clicked (not it's tabs or controls)\n     * @internal\n     */\n    private onClick(event: MouseEvent) {\n        if (event.target === this._element) {\n            this.notifyClick(event);\n        }\n    }\n\n    /**\n     * Invoked when the header's background is touched (not it's tabs or controls)\n     * @internal\n     */\n    private onTouchStart(event: TouchEvent) {\n        if (event.target === this._element) {\n            this.notifyTouchStart(event);\n        }\n    }\n\n    /** @internal */\n    private notifyClick(ev: MouseEvent) {\n        if (this._clickEvent === undefined) {\n            throw new UnexpectedUndefinedError('HNHC46834');\n        } else {\n            this._clickEvent(ev);\n        }\n    }\n\n    /** @internal */\n    private notifyTouchStart(ev: TouchEvent) {\n        if (this._touchStartEvent === undefined) {\n            throw new UnexpectedUndefinedError('HNHTS46834');\n        } else {\n            this._touchStartEvent(ev);\n        }\n    }\n}\n\n/** @public */\nexport namespace Header {\n    /** @internal */\n    export type GetActiveComponentItemEvent = (this: void) => ComponentItem | undefined;\n    /** @internal */\n    export type CloseEvent = (this: void) => void;\n    /** @internal */\n    export type PopoutEvent = (this: void) => void;\n    /** @internal */\n    export type MaximiseToggleEvent = (this: void) => void;\n    /** @internal */\n    export type ClickEvent = (this: void, ev: MouseEvent) => void;\n    /** @internal */\n    export type TouchStartEvent = (this: void, ev: TouchEvent) => void;\n    /** @internal */\n    export type ComponentRemoveEvent = (this: void, componentItem: ComponentItem) => void;\n    /** @internal */\n    export type ComponentFocusEvent = (this: void, componentItem: ComponentItem) => void;\n    /** @internal */\n    export type ComponentDragStartEvent = (this: void, x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) => void;\n    /** @internal */\n    export type StateChangedEvent = (this: void) => void;\n\n    /** @internal */\n    export interface Settings {\n        show: boolean;\n        side: Side;\n        popoutEnabled: boolean;\n        popoutLabel: string;\n        maximiseEnabled: boolean;\n        maximiseLabel: string;\n        minimiseEnabled: boolean;\n        minimiseLabel: string;\n        closeEnabled: boolean;\n        closeLabel: string;\n        tabDropdownEnabled: boolean;\n        tabDropdownLabel: string;\n    }\n}\n","import { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { numberToPixels } from '../utils/utils';\n\n/** @internal */\nexport class Splitter {\n    private _grabSize;\n    private _dragListener: DragListener;\n\n    private readonly _element: HTMLDivElement;\n\n    get element(): HTMLDivElement { return this._element; }\n\n    constructor(private _isVertical: boolean, private _size: number, grabSize: number) {\n        this._grabSize = grabSize < this._size ? this._size : grabSize;\n\n        this._element = document.createElement('div');\n        this._element.classList.add(DomConstants.ClassName.Splitter);\n        const dragHandleElement = document.createElement('div');\n        dragHandleElement.classList.add(DomConstants.ClassName.DragHandle);\n\n        const handleExcessSize = this._grabSize - this._size;\n        const handleExcessPos = handleExcessSize / 2;\n\n        if (this._isVertical) {\n            dragHandleElement.style.top = numberToPixels(-handleExcessPos);\n            dragHandleElement.style.height = numberToPixels(this._size + handleExcessSize);\n            this._element.classList.add(DomConstants.ClassName.Vertical);\n            this._element.style.height = numberToPixels(this._size);\n        } else {\n            dragHandleElement.style.left = numberToPixels(-handleExcessPos);\n            dragHandleElement.style.width = numberToPixels(this._size + handleExcessSize);\n            this._element.classList.add(DomConstants.ClassName.Horizontal);\n            this._element.style.width = numberToPixels(this._size);\n        }\n\n        this._element.appendChild(dragHandleElement);\n\n        this._dragListener = new DragListener(this._element, [dragHandleElement]);\n    }\n\n    destroy(): void {\n        this._element.remove();\n    }\n\n    on<K extends keyof EventEmitter.EventParamsMap>(eventName: K, callback: EventEmitter.Callback<K>): void {\n        this._dragListener.on<K>(eventName, callback);\n    }\n}\n","import { UnexpectedUndefinedError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\n\n/**\n * Represents an individual tab within a Stack's header\n * @public\n */\nexport class Tab {\n    /** @internal */\n    private readonly _element: HTMLDivElement;\n    /** @internal */\n    private readonly _titleElement: HTMLSpanElement;\n    /** @internal */\n    private readonly _closeElement: HTMLDivElement | undefined;\n\n    /** @internal */\n    private _dragListener: DragListener | undefined;\n    /** @internal */\n    private _isActive = false;\n\n    /** @internal */\n    private readonly _tabClickListener = (ev: MouseEvent) => this.onTabClickDown(ev);\n    /** @internal */\n    private readonly _tabTouchStartListener = (ev: TouchEvent) => this.onTabTouchStart(ev);\n    /** @internal */\n    private readonly _closeClickListener = () => this.onCloseClick();\n    /** @internal */\n    private readonly _closeTouchStartListener = () => this.onCloseTouchStart();\n    // /** @internal */\n    // private readonly _closeMouseDownListener = () => this.onCloseMousedown();\n    /** @internal */\n    private readonly _dragStartListener = (x: number, y: number) => this.onDragStart(x, y);\n    /** @internal */\n    private readonly _contentItemDestroyListener = () => this.onContentItemDestroy();\n    /** @internal */\n    private readonly _tabTitleChangedListener = (title: string) => this.setTitle(title)\n\n    get isActive(): boolean { return this._isActive; }\n    // get header(): Header { return this._header; }\n    get componentItem(): ComponentItem { return this._componentItem; }\n    /** @deprecated use {@link (Tab:class).componentItem} */\n    get contentItem(): ComponentItem { return this._componentItem; }\n    get element(): HTMLElement { return this._element; }\n    get titleElement(): HTMLElement { return this._titleElement; }\n    get closeElement(): HTMLElement | undefined { return this._closeElement; }\n    get reorderEnabled(): boolean { return this._dragListener !== undefined; }\n    set reorderEnabled(value: boolean) {\n        if (value !== this.reorderEnabled) {\n            if (value) {\n                this.enableReorder();\n            } else {\n                this.disableReorder();\n            }\n        }\n    }\n\n    /** @internal */\n    constructor(\n        /** @internal */\n        private readonly _layoutManager: LayoutManager,\n        /** @internal */\n        private _componentItem: ComponentItem,\n        /** @internal */\n        private _closeEvent: Tab.CloseEvent | undefined,\n        /** @internal */\n        private _focusEvent: Tab.FocusEvent | undefined,\n        /** @internal */\n        private _dragStartEvent: Tab.DragStartEvent | undefined\n    ) {\n        this._element = document.createElement('div');\n        this._element.classList.add(DomConstants.ClassName.Tab);\n        this._titleElement = document.createElement('span'); \n        this._titleElement.classList.add(DomConstants.ClassName.Title);\n        this._closeElement = document.createElement('div'); \n        this._closeElement.classList.add(DomConstants.ClassName.CloseTab);\n        this._element.appendChild(this._titleElement);\n        this._element.appendChild(this._closeElement);\n\n        if (_componentItem.isClosable) {\n            this._closeElement.style.display = '';\n        } else {\n            this._closeElement.style.display = 'none';\n        }\n\n        this.setTitle(_componentItem.title);\n        this._componentItem.on('titleChanged', this._tabTitleChangedListener);\n\n        const reorderEnabled = _componentItem.reorderEnabled ?? this._layoutManager.layoutConfig.settings.reorderEnabled;\n\n        if (reorderEnabled) {\n            this.enableReorder();\n        }\n\n        this._element.addEventListener('click', this._tabClickListener, { passive: true });\n        this._element.addEventListener('touchstart', this._tabTouchStartListener, { passive: true });\n\n        if (this._componentItem.isClosable) {\n            this._closeElement.addEventListener('click', this._closeClickListener, { passive: true });\n            this._closeElement.addEventListener('touchstart', this._closeTouchStartListener, { passive: true });\n            // this._closeElement.addEventListener('mousedown', this._closeMouseDownListener, { passive: true });\n        } else {\n            this._closeElement.remove();\n            this._closeElement = undefined;\n        }\n\n        this._componentItem.setTab(this);\n        this._layoutManager.emit('tabCreated', this);\n    }\n\n    /**\n     * Sets the tab's title to the provided string and sets\n     * its title attribute to a pure text representation (without\n     * html tags) of the same string.\n     */\n    setTitle(title: string): void {\n        this._titleElement.innerText = title;\n        this._element.title = title;\n    }\n\n    /**\n     * Sets this tab's active state. To programmatically\n     * switch tabs, use Stack.setActiveComponentItem( item ) instead.\n     */\n    setActive(isActive: boolean): void {\n        if (isActive === this._isActive) {\n            return;\n        }\n        this._isActive = isActive;\n\n        if (isActive) {\n            this._element.classList.add(DomConstants.ClassName.Active);\n        } else {\n            this._element.classList.remove(DomConstants.ClassName.Active);\n        }\n    }\n\n    /**\n     * Destroys the tab\n     * @internal\n     */\n    destroy(): void {\n        this._closeEvent = undefined;\n        this._focusEvent = undefined;\n        this._dragStartEvent = undefined;\n        this._element.removeEventListener('click', this._tabClickListener);\n        this._element.removeEventListener('touchstart', this._tabTouchStartListener);\n        this._closeElement?.removeEventListener('click', this._closeClickListener);\n        this._closeElement?.removeEventListener('touchstart', this._closeTouchStartListener);\n        // this._closeElement?.removeEventListener('mousedown', this._closeMouseDownListener);\n        this._componentItem.off('titleChanged', this._tabTitleChangedListener);\n        if (this.reorderEnabled) {\n            this.disableReorder();\n        }\n        this._element.remove();\n    }\n\n    /** @internal */\n    setBlurred(): void {\n        this._element.classList.remove(DomConstants.ClassName.Focused);\n        this._titleElement.classList.remove(DomConstants.ClassName.Focused);\n    }\n\n    /** @internal */\n    setFocused(): void {\n        this._element.classList.add(DomConstants.ClassName.Focused);\n        this._titleElement.classList.add(DomConstants.ClassName.Focused);\n    }\n\n    /**\n     * Callback for the DragListener\n     * @param x - The tabs absolute x position\n     * @param y - The tabs absolute y position\n     * @internal\n     */\n    private onDragStart(x: number, y: number): void {\n        if (this._dragListener === undefined) {\n            throw new UnexpectedUndefinedError('TODSDLU10093');\n        } else {\n            if (this._dragStartEvent === undefined) {\n                throw new UnexpectedUndefinedError('TODS23309');\n            } else {\n                this._dragStartEvent(x, y, this._dragListener, this.componentItem);\n            }\n        }\n\n    }\n\n    /** @internal */\n    private onContentItemDestroy() {\n        if (this._dragListener !== undefined) {\n            this._dragListener.destroy();\n            this._dragListener = undefined;\n        }\n    }\n\n    /**\n     * Callback when the tab is clicked\n     * @internal\n     */\n    private onTabClickDown(event: MouseEvent) {\n        const target = event.target;\n        if (target === this._element || target === this._titleElement) {\n            // left mouse button\n            if (event.button === 0) {\n                // event.stopPropagation();\n                this.notifyFocus();\n\n                // middle mouse button\n            } else if (event.button === 1 && this._componentItem.isClosable) {\n                // event.stopPropagation();\n                this.notifyClose();\n            }\n        }\n    }\n\n    /** @internal */\n    private onTabTouchStart(event: TouchEvent) {\n        if (event.target === this._element) {\n            this.notifyFocus();\n        }\n    }\n\n    /**\n     * Callback when the tab's close button is clicked\n     * @internal\n     */\n    private onCloseClick() {\n        this.notifyClose();\n    }\n\n    /** @internal */\n    private onCloseTouchStart() {\n        this.notifyClose();\n    }\n\n    /**\n     * Callback to capture tab close button mousedown\n     * to prevent tab from activating.\n     * @internal\n     */\n    // private onCloseMousedown(): void {\n    //     // event.stopPropagation();\n    // }\n\n    /** @internal */\n    private notifyClose() {\n        if (this._closeEvent === undefined) {\n            throw new UnexpectedUndefinedError('TNC15007');\n        } else {\n            this._closeEvent(this._componentItem);\n        }\n    }\n\n    /** @internal */\n    private notifyFocus() {\n        if (this._focusEvent === undefined) {\n            throw new UnexpectedUndefinedError('TNA15007');\n        } else {\n            this._focusEvent(this._componentItem);\n        }\n    }\n\n    /** @internal */\n    private enableReorder() {\n        this._dragListener = new DragListener(this._element, [this._titleElement]);\n        this._dragListener.on('dragStart', this._dragStartListener);\n        this._componentItem.on('destroy', this._contentItemDestroyListener);\n    }\n\n    /** @internal */\n    private disableReorder() {\n        if (this._dragListener === undefined) {\n            throw new UnexpectedUndefinedError('TDR87745');\n        } else {\n            this._componentItem.off('destroy', this._contentItemDestroyListener);\n            this._dragListener.off('dragStart', this._dragStartListener);\n            this._dragListener = undefined;\n        }\n    }\n}\n\n/** @public */\nexport namespace Tab {\n    /** @internal */\n    export type CloseEvent = (componentItem: ComponentItem) => void;\n    /** @internal */\n    export type FocusEvent = (componentItem: ComponentItem) => void;\n    /** @internal */\n    export type DragStartEvent = (x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) => void;\n}\n","import { AssertError } from '../errors/internal-error';\nimport { ComponentItem } from '../items/component-item';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\nimport { numberToPixels, pixelsToNumber } from '../utils/utils';\nimport { Tab } from './tab';\n\n/** @internal */\nexport class TabsContainer {\n    // There is one tab per ComponentItem in stack.  However they may not be ordered the same\n    private readonly _tabs: Tab[] = [];\n\n    private readonly _dropdownElement: HTMLElement;\n    private readonly _element: HTMLElement;\n    private _lastVisibleTabIndex = -1;\n    private _dropdownActive = false;\n\n    get tabs(): Tab[] { return this._tabs; }\n    get tabCount(): number { return this._tabs.length; }\n    get lastVisibleTabIndex(): number { return this._lastVisibleTabIndex; }\n    \n    get element(): HTMLElement { return this._element; }\n    get dropdownElement(): HTMLElement { return this._dropdownElement; }\n    get dropdownActive(): boolean { return this._dropdownActive; }\n\n    constructor(private _layoutManager: LayoutManager,\n        private _componentRemoveEvent: TabsContainer.ComponentItemRemoveEvent,\n        private _componentFocusEvent: TabsContainer.ComponentItemFocusEvent,\n        private _componentDragStartEvent: TabsContainer.ComponentItemDragStartEvent,\n        private _dropdownActiveChangedEvent: TabsContainer.DropdownActiveChangedEvent,\n    ) {\n        this._element = document.createElement('section');\n        this._element.classList.add(DomConstants.ClassName.Tabs);\n\n        this._dropdownElement = document.createElement('section');\n        this._dropdownElement.classList.add(DomConstants.ClassName.TabDropdownList);\n        this._dropdownElement.style.display = 'none';\n    }\n\n    destroy(): void {\n        for (let i = 0; i < this._tabs.length; i++) {\n            this._tabs[i].destroy();\n        }\n    }\n\n    /**\n     * Creates a new tab and associates it with a contentItem\n     * @param index - The position of the tab\n     */\n    createTab(componentItem: ComponentItem, index: number): void {\n        //If there's already a tab relating to the\n        //content item, don't do anything\n        for (let i = 0; i < this._tabs.length; i++) {\n            if (this._tabs[i].componentItem === componentItem) {\n                return;\n            }\n        }\n\n        const tab = new Tab(this._layoutManager,\n            componentItem,\n            (item) => this.handleTabCloseEvent(item),\n            (item) => this.handleTabFocusEvent(item),\n            (x, y, dragListener, item) => this.handleTabDragStartEvent(x, y, dragListener, item));\n\n        if (this._tabs.length === 0) {\n            this._tabs.push(tab);\n            this._element.appendChild(tab.element);\n        } else {\n            if (index === undefined) {\n                index = this._tabs.length;\n            }\n\n            if (index > 0) {\n                this._tabs[index - 1].element.insertAdjacentElement('afterend', tab.element);\n            } else {\n                this._tabs[0].element.insertAdjacentElement('beforebegin', tab.element);\n            }\n\n            this._tabs.splice(index, 0, tab);\n        }\n    }\n\n    removeTab(componentItem: ComponentItem): void {\n        // componentItem cannot be ActiveComponentItem\n        for (let i = 0; i < this._tabs.length; i++) {\n            if (this._tabs[i].componentItem === componentItem) {\n                const tab = this._tabs[i];\n                tab.destroy();\n                this._tabs.splice(i, 1);\n                return;\n            }\n        }\n\n        throw new Error('contentItem is not controlled by this header');\n    }\n\n    processActiveComponentChanged(newActiveComponentItem: ComponentItem): void {\n        let activeIndex = -1;\n        for (let i = 0; i < this._tabs.length; i++) {\n            const isActive = this._tabs[i].componentItem === newActiveComponentItem;\n            this._tabs[i].setActive(isActive);\n            if (isActive) {\n                activeIndex = i;\n            }\n        }\n\n        if (activeIndex < 0) {\n            throw new AssertError('HSACI56632');\n        } else {\n            if (this._layoutManager.layoutConfig.settings.reorderOnTabMenuClick) {\n                /**\n                 * If the tab selected was in the dropdown, move everything down one to make way for this one to be the first.\n                 * This will make sure the most used tabs stay visible.\n                 */\n                if (this._lastVisibleTabIndex !== -1 && activeIndex > this._lastVisibleTabIndex) {\n                    const activeTab = this._tabs[activeIndex];\n                    for (let j = activeIndex; j > 0; j--) {\n                        this._tabs[j] = this._tabs[j - 1];\n                    }\n                    this._tabs[0] = activeTab;\n\n                    // updateTabSizes will always be called after this and it will reposition tab elements\n                }\n            }\n        }\n    }\n\n    /**\n     * Pushes the tabs to the tab dropdown if the available space is not sufficient\n     */\n    updateTabSizes(availableWidth: number, activeComponentItem: ComponentItem | undefined): void {\n        let dropDownActive = false;\n        const success = this.tryUpdateTabSizes(dropDownActive, availableWidth, activeComponentItem);\n        if (!success) {\n            dropDownActive = true;\n            // this will always succeed\n            this.tryUpdateTabSizes(dropDownActive, availableWidth, activeComponentItem)\n        }\n\n        if (dropDownActive !== this._dropdownActive) {\n            this._dropdownActive = dropDownActive;\n            this._dropdownActiveChangedEvent();\n        }\n    }\n\n    tryUpdateTabSizes(dropdownActive: boolean, availableWidth: number, activeComponentItem: ComponentItem | undefined): boolean {\n        if (this._tabs.length > 0) {\n            if (activeComponentItem === undefined) {\n                throw new Error('non-empty tabs must have active component item');\n            }\n\n            let cumulativeTabWidth = 0;\n            let tabOverlapAllowanceExceeded = false;\n            const tabOverlapAllowance = this._layoutManager.layoutConfig.settings.tabOverlapAllowance;\n            const activeIndex = this._tabs.indexOf(activeComponentItem.tab);\n            const activeTab = this._tabs[activeIndex];\n            this._lastVisibleTabIndex = -1;\n\n            for (let i = 0; i < this._tabs.length; i++) {\n                const tabElement = this._tabs[i].element;\n\n                //Put the tab in the tabContainer so its true width can be checked\n                if (tabElement.parentElement !== this._element) {\n                    this._element.appendChild(tabElement);\n                }\n                const tabMarginRightPixels = getComputedStyle(activeTab.element).marginRight;\n                const tabMarginRight = pixelsToNumber(tabMarginRightPixels);\n                const tabWidth = tabElement.offsetWidth + tabMarginRight;\n\n                cumulativeTabWidth += tabWidth;\n\n                //Include the active tab's width if it isn't already\n                //This is to ensure there is room to show the active tab\n                let visibleTabWidth = 0;\n                if (activeIndex <= i) {\n                    visibleTabWidth = cumulativeTabWidth;\n                } else {\n                    const activeTabMarginRightPixels = getComputedStyle(activeTab.element).marginRight;\n                    const activeTabMarginRight = pixelsToNumber(activeTabMarginRightPixels);\n                    visibleTabWidth = cumulativeTabWidth + activeTab.element.offsetWidth + activeTabMarginRight;\n                }\n\n                // If the tabs won't fit, check the overlap allowance.\n                if (visibleTabWidth > availableWidth) {\n\n                    //Once allowance is exceeded, all remaining tabs go to menu.\n                    if (!tabOverlapAllowanceExceeded) {\n\n                        //No overlap for first tab or active tab\n                        //Overlap spreads among non-active, non-first tabs\n                        let overlap: number;\n                        if (activeIndex > 0 && activeIndex <= i) {\n                            overlap = (visibleTabWidth - availableWidth) / (i - 1);\n                        } else {\n                            overlap = (visibleTabWidth - availableWidth) / i;\n                        }\n\n                        //Check overlap against allowance.\n                        if (overlap < tabOverlapAllowance) {\n                            for (let j = 0; j <= i; j++) {\n                                const marginLeft = (j !== activeIndex && j !== 0) ? '-' + numberToPixels(overlap) : '';\n                                this._tabs[j].element.style.zIndex = numberToPixels(i - j);\n                                this._tabs[j].element.style.marginLeft = marginLeft;\n                            }\n                            this._lastVisibleTabIndex = i;\n                            if (tabElement.parentElement !== this._element) {\n                                this._element.appendChild(tabElement);\n                            }\n                        } else {\n                            tabOverlapAllowanceExceeded = true;\n                        }\n\n                    } else if (i === activeIndex) {\n                        //Active tab should show even if allowance exceeded. (We left room.)\n                        tabElement.style.zIndex = 'auto';\n                        tabElement.style.marginLeft = '';\n                        if (tabElement.parentElement !== this._element) {\n                            this._element.appendChild(tabElement);\n                        }\n                    }\n\n                    if (tabOverlapAllowanceExceeded && i !== activeIndex) {\n                        if (dropdownActive) {\n                            //Tab menu already shown, so we just add to it.\n                            tabElement.style.zIndex = 'auto';\n                            tabElement.style.marginLeft = '';\n                            \n                            if (tabElement.parentElement !== this._dropdownElement) {\n                                this._dropdownElement.appendChild(tabElement);\n                            }\n                        } else {\n                            //We now know the tab menu must be shown, so we have to recalculate everything.\n                            return false;\n                        }\n                    }\n\n                } else {\n                    this._lastVisibleTabIndex = i;\n                    tabElement.style.zIndex = 'auto';\n                    tabElement.style.marginLeft = '';\n                    if (tabElement.parentElement !== this._element) {\n                        this._element.appendChild(tabElement);\n                    }\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Shows drop down for additional tabs when there are too many to display.\n     */\n    showAdditionalTabsDropdown(): void {\n        this._dropdownElement.style.display = '';\n    }\n\n    /**\n     * Hides drop down for additional tabs when there are too many to display.\n     */\n    hideAdditionalTabsDropdown(): void {\n        this._dropdownElement.style.display = 'none';\n    }\n\n    private handleTabCloseEvent(componentItem: ComponentItem) {\n        this._componentRemoveEvent(componentItem);\n    }\n\n    private handleTabFocusEvent(componentItem: ComponentItem) {\n        this._componentFocusEvent(componentItem);\n    }\n\n    private handleTabDragStartEvent(x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) {\n        this._componentDragStartEvent(x, y, dragListener, componentItem);\n    }\n\n}\n\n/** @internal */\nexport namespace TabsContainer {\n    export type ComponentItemRemoveEvent = (this: void, componentItem: ComponentItem) => void;\n    export type ComponentItemFocusEvent = (this: void, componentItem: ComponentItem) => void;\n    export type ComponentItemDragStartEvent = (this: void, x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) => void;\n    export type DropdownActiveChangedEvent = (this: void) => void;\n}","import { DomConstants } from '../utils/dom-constants';\nimport { Rect } from '../utils/types';\n\n/** @internal @deprecated To be removed */\nexport class TransitionIndicator {\n    private _element: HTMLElement;\n    private _toElement: HTMLElement | null;\n    private _fromDimensions: null;\n    private _totalAnimationDuration: number;\n    private _animationStartTime: number | null;\n\n    constructor() {\n        this._element = document.createElement('div');\n        this._element.classList.add(DomConstants.ClassName.TransitionIndicator);\n        document.body.appendChild(this._element);\n\n        this._toElement = null;\n        this._fromDimensions = null;\n        this._totalAnimationDuration = 200;\n        this._animationStartTime = null;\n    }\n\n    destroy(): void {\n        this._element.remove();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    transitionElements(fromElement: HTMLElement, toElement: HTMLElement): void {\n        /**\n         * TODO - This is not quite as cool as expected. Review.\n         */\n        return;\n        // this._toElement = toElement;\n        // this._animationStartTime = now();\n        // this._fromDimensions = this._measure(fromElement);\n        // this._fromDimensions.opacity = 0.8;\n        // this._element.show().css(this._fromDimensions);\n        // animFrame(fnBind(this._nextAnimationFrame, this));\n    }\n\n    private nextAnimationFrame(): void {\n        // if (this._toElement === null || this._fromDimensions === null || this._animationStartTime === null) {\n        //     throw new UnexpectedNullError('TINAFTD97115');\n        // } else {\n        //     const toDimensions = this.measure(this._toElement);\n        //     const animationProgress = (now() - this._animationStartTime) / this._totalAnimationDuration;\n        //     const currentFrameStyles = {};\n        //     const cssProperty;\n\n        //     if (animationProgress >= 1) {\n        //         this._element.style.display = 'none';\n        //         return;\n        //     }\n\n        //     toDimensions.opacity = 0;\n\n        //     for (const cssProperty in this._fromDimensions) {\n        //         currentFrameStyles[cssProperty] = this._fromDimensions[cssProperty] +\n        //             (toDimensions[cssProperty] - this._fromDimensions[cssProperty]) *\n        //             animationProgress;\n        //     }\n\n        //     this._element.css(currentFrameStyles);\n        //     animFrame(fnBind(this._nextAnimationFrame, this));\n        // }\n    }\n\n    private measure(element: HTMLElement): Rect {\n        const rect = element.getBoundingClientRect();\n\n        return {\n            left: rect.left,\n            top: rect.top,\n            width: element.offsetWidth,\n            height: element.offsetHeight,\n        };\n    }\n}\n","/** @public */\nexport abstract class ExternalError extends Error {\n    /** @internal */\n    constructor(public readonly type: string, message: string) {\n        super(message);\n    }\n}\n\n/** @public */\nexport class ConfigurationError extends ExternalError {\n    /** @internal */\n    constructor(message: string, public readonly node?: string) {\n        super('Configuration', message);\n    }\n}\n\n/** @public */\nexport class PopoutBlockedError extends ExternalError {\n    /** @internal */\n    constructor(message: string) {\n        super('PopoutBlocked', message);\n    }\n}\n\n/** @public */\nexport class ApiError extends ExternalError {\n    /** @internal */\n    constructor(message: string) {\n        super('API', message);\n    }\n}\n\n/** @public */\nexport class BindError extends ExternalError {\n    /** @internal */\n    constructor(message: string) {\n        super('Bind', message);\n    }\n}\n","/** @internal */\nabstract class InternalError extends Error {\n    constructor(type: string, code: string, message?: string) {\n        super(`${type}: ${code}${message === undefined ? '' : ': ' + message}`)\n    }\n}\n\n/** @internal */\nexport class AssertError extends InternalError {\n    constructor(code: string, message?: string) {\n        super('Assert', code, message)\n    }\n}\n\n/** @internal */\nexport class UnreachableCaseError extends InternalError {\n    constructor(code: string, variableValue: never, message?: string) {\n        super('UnreachableCase', code, `${variableValue}${message === undefined ? '' : ': ' + message}`)\n    }\n}\n\n/** @internal */\nexport class UnexpectedNullError extends InternalError {\n    constructor(code: string, message?: string) {\n        super('UnexpectedNull', code, message)\n    }\n}\n\n/** @internal */\nexport class UnexpectedUndefinedError extends InternalError {\n    constructor(code: string, message?: string) {\n        super('UnexpectedUndefined', code, message)\n    }\n}\n","import { LayoutConfig } from './config/config';\nimport { ResolvedComponentItemConfig } from './config/resolved-config';\nimport { ComponentContainer } from './container/component-container';\nimport { ApiError, BindError } from './errors/external-error';\nimport { AssertError, UnexpectedUndefinedError } from './errors/internal-error';\nimport { I18nStringId, i18nStrings } from './utils/i18n-strings';\nimport { JsonValue, LogicalZIndex } from './utils/types';\nimport { deepExtendValue, ensureElementPositionAbsolute, numberToPixels, setElementDisplayVisibility, setElementHeight, setElementWidth } from './utils/utils';\nimport { VirtualLayout } from './virtual-layout';\n\n/** @public */\nexport class GoldenLayout extends VirtualLayout {\n    /** @internal */\n    private _componentTypesMap = new Map<string, GoldenLayout.ComponentInstantiator>();\n    /** @internal */\n    private _getComponentConstructorFtn: GoldenLayout.GetComponentConstructorCallback;\n\n    /** @internal */\n    private _registeredComponentMap = new Map<ComponentContainer, ComponentContainer.Component>();\n    /** @internal */\n    private _virtuableComponentMap = new Map<ComponentContainer, GoldenLayout.VirtuableComponent>();\n    /** @internal */\n    private _goldenLayoutBoundingClientRect: DOMRect;\n\n    /** @internal */\n    private _containerVirtualRectingRequiredEventListener =\n        (container: ComponentContainer, width: number, height: number) => this.handleContainerVirtualRectingRequiredEvent(container, width, height);\n    /** @internal */\n    private _containerVirtualVisibilityChangeRequiredEventListener =\n        (container: ComponentContainer, visible: boolean) => this.handleContainerVirtualVisibilityChangeRequiredEvent(container, visible);\n    /** @internal */\n    private _containerVirtualZIndexChangeRequiredEventListener =\n        (container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) =>\n            this.handleContainerVirtualZIndexChangeRequiredEvent(container, logicalZIndex, defaultZIndex);\n\n    /**\n     * @param container - A Dom HTML element. Defaults to body\n     * @param bindComponentEventHandler - Event handler to bind components\n     * @param bindComponentEventHandler - Event handler to unbind components\n     * If bindComponentEventHandler is defined, then constructor will be determinate. It will always call the init()\n     * function and the init() function will always complete. This means that the bindComponentEventHandler will be called\n     * if constructor is for a popout window. Make sure bindComponentEventHandler is ready for events.\n     */\n    constructor(\n        container?: HTMLElement,\n        bindComponentEventHandler?: VirtualLayout.BindComponentEventHandler,\n        unbindComponentEventHandler?: VirtualLayout.UnbindComponentEventHandler,\n    );\n    /** @deprecated specify layoutConfig in {@link (LayoutManager:class).loadLayout} */\n    constructor(config: LayoutConfig, container?: HTMLElement);\n    /** @internal */\n    constructor(configOrOptionalContainer: LayoutConfig | HTMLElement | undefined,\n        containerOrBindComponentEventHandler?: HTMLElement | VirtualLayout.BindComponentEventHandler,\n        unbindComponentEventHandler?: VirtualLayout.UnbindComponentEventHandler,\n    ) {\n        super(configOrOptionalContainer, containerOrBindComponentEventHandler, unbindComponentEventHandler, true);\n        // we told VirtualLayout to not call init() (skipInit set to true) so that Golden Layout can initialise its properties before init is called\n        if (!this.deprecatedConstructor) {\n            this.init();\n        }\n    }\n\n    /**\n     * Register a new component type with the layout manager.\n     *\n     * @deprecated See {@link https://stackoverflow.com/questions/40922531/how-to-check-if-a-javascript-function-is-a-constructor}\n     * instead use {@link (GoldenLayout:class).registerComponentConstructor}\n     * or {@link (GoldenLayout:class).registerComponentFactoryFunction}\n     */\n    registerComponent(name: string,\n        componentConstructorOrFactoryFtn: GoldenLayout.ComponentConstructor | GoldenLayout.ComponentFactoryFunction,\n        virtual = false\n    ): void {\n        if (typeof componentConstructorOrFactoryFtn !== 'function') {\n            throw new ApiError('registerComponent() componentConstructorOrFactoryFtn parameter is not a function')\n        } else {\n            if (componentConstructorOrFactoryFtn.hasOwnProperty('prototype')) {\n                const componentConstructor = componentConstructorOrFactoryFtn as GoldenLayout.ComponentConstructor;\n                this.registerComponentConstructor(name, componentConstructor, virtual);\n            } else {\n                const componentFactoryFtn = componentConstructorOrFactoryFtn as GoldenLayout.ComponentFactoryFunction;\n                this.registerComponentFactoryFunction(name, componentFactoryFtn, virtual);\n            }\n        }\n    }\n\n    /**\n     * Register a new component type with the layout manager.\n     */\n    registerComponentConstructor(typeName: string, componentConstructor: GoldenLayout.ComponentConstructor, virtual = false): void {\n        if (typeof componentConstructor !== 'function') {\n            throw new Error(i18nStrings[I18nStringId.PleaseRegisterAConstructorFunction]);\n        }\n\n        const existingComponentType = this._componentTypesMap.get(typeName);\n\n        if (existingComponentType !== undefined) {\n            throw new BindError(`${i18nStrings[I18nStringId.ComponentIsAlreadyRegistered]}: ${typeName}`);\n        }\n\n        this._componentTypesMap.set(typeName, {\n                constructor: componentConstructor,\n                factoryFunction: undefined,\n                virtual,\n            }\n        );\n    }\n\n    /**\n     * Register a new component with the layout manager.\n     */\n    registerComponentFactoryFunction(typeName: string, componentFactoryFunction: GoldenLayout.ComponentFactoryFunction, virtual = false): void {\n        if (typeof componentFactoryFunction !== 'function') {\n            throw new BindError('Please register a constructor function');\n        }\n\n        const existingComponentType = this._componentTypesMap.get(typeName);\n\n        if (existingComponentType !== undefined) {\n            throw new BindError(`${i18nStrings[I18nStringId.ComponentIsAlreadyRegistered]}: ${typeName}`);\n        }\n\n        this._componentTypesMap.set(typeName, {\n                constructor: undefined,\n                factoryFunction: componentFactoryFunction,\n                virtual,\n            }\n        );\n    }\n\n    /**\n     * Register a component function with the layout manager. This function should\n     * return a constructor for a component based on a config.\n     * This function will be called if a component type with the required name is not already registered.\n     * It is recommended that applications use the {@link (VirtualLayout:class).getComponentEvent} and\n     * {@link (VirtualLayout:class).releaseComponentEvent} instead of registering a constructor callback\n     * @deprecated use {@link (GoldenLayout:class).registerGetComponentConstructorCallback}\n     */\n    registerComponentFunction(callback: GoldenLayout.GetComponentConstructorCallback): void {\n        this.registerGetComponentConstructorCallback(callback);\n    }\n\n    /**\n     * Register a callback closure with the layout manager which supplies a Component Constructor.\n     * This callback should return a constructor for a component based on a config.\n     * This function will be called if a component type with the required name is not already registered.\n     * It is recommended that applications use the {@link (VirtualLayout:class).getComponentEvent} and\n     * {@link (VirtualLayout:class).releaseComponentEvent} instead of registering a constructor callback\n     */\n    registerGetComponentConstructorCallback(callback: GoldenLayout.GetComponentConstructorCallback): void {\n        if (typeof callback !== 'function') {\n            throw new Error('Please register a callback function');\n        }\n\n        if (this._getComponentConstructorFtn !== undefined) {\n            console.warn('Multiple component functions are being registered.  Only the final registered function will be used.')\n        }\n\n        this._getComponentConstructorFtn = callback;\n    }\n\n    getRegisteredComponentTypeNames(): string[] {\n        const typeNamesIterableIterator = this._componentTypesMap.keys();\n        return Array.from(typeNamesIterableIterator);\n    }\n\n    /**\n     * Returns a previously registered component instantiator.  Attempts to utilize registered\n     * component type by first, then falls back to the component constructor callback function (if registered).\n     * If neither gets an instantiator, then returns `undefined`.\n     * Note that `undefined` will return if config.componentType is not a string\n     *\n     * @param config - The item config\n     * @public\n     */\n    getComponentInstantiator(config: ResolvedComponentItemConfig): GoldenLayout.ComponentInstantiator | undefined {\n        let instantiator: GoldenLayout.ComponentInstantiator | undefined;\n\n        const typeName = ResolvedComponentItemConfig.resolveComponentTypeName(config)\n        if (typeName !== undefined) {\n            instantiator = this._componentTypesMap.get(typeName);\n        }\n        if (instantiator === undefined) {\n            if (this._getComponentConstructorFtn !== undefined) {\n                instantiator = {\n                    constructor: this._getComponentConstructorFtn(config),\n                    factoryFunction: undefined,\n                    virtual: false,\n                }\n            }\n        }\n\n        return instantiator;\n    }\n\n    /** @internal */\n    override bindComponent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent {\n        let instantiator: GoldenLayout.ComponentInstantiator | undefined;\n\n        const typeName = ResolvedComponentItemConfig.resolveComponentTypeName(itemConfig);\n        if (typeName !== undefined) {\n            instantiator = this._componentTypesMap.get(typeName);\n        }\n        if (instantiator === undefined) {\n            if (this._getComponentConstructorFtn !== undefined) {\n                instantiator = {\n                    constructor: this._getComponentConstructorFtn(itemConfig),\n                    factoryFunction: undefined,\n                    virtual: false,\n                }\n            }\n        }\n\n        let result: ComponentContainer.BindableComponent;\n        if (instantiator !== undefined) {\n            const virtual = instantiator.virtual;\n            // handle case where component is obtained by name or component constructor callback\n            let componentState: JsonValue | undefined;\n            if (itemConfig.componentState === undefined) {\n                componentState = undefined;\n            } else {\n                // make copy\n                componentState = deepExtendValue({}, itemConfig.componentState) as JsonValue;\n            }\n\n            let component: ComponentContainer.Component | undefined;\n            const componentConstructor = instantiator.constructor;\n            if (componentConstructor !== undefined) {\n                component = new componentConstructor(container, componentState, virtual);\n            } else {\n                const factoryFunction = instantiator.factoryFunction;\n                if (factoryFunction !== undefined) {\n                    component = factoryFunction(container, componentState, virtual);\n                } else {\n                    throw new AssertError('LMBCFFU10008');\n                }\n            }\n\n            if (virtual) {\n                if (component === undefined) {\n                    throw new UnexpectedUndefinedError('GLBCVCU988774');\n                } else {\n                    const virtuableComponent = component as GoldenLayout.VirtuableComponent;\n                    const componentRootElement = virtuableComponent.rootHtmlElement;\n                    if (componentRootElement === undefined) {\n                        throw new BindError(`${i18nStrings[I18nStringId.VirtualComponentDoesNotHaveRootHtmlElement]}: ${typeName}`);\n                    } else {\n                        ensureElementPositionAbsolute(componentRootElement);\n                        this.container.appendChild(componentRootElement);\n                        this._virtuableComponentMap.set(container, virtuableComponent);\n                        container.virtualRectingRequiredEvent = this._containerVirtualRectingRequiredEventListener;\n                        container.virtualVisibilityChangeRequiredEvent = this._containerVirtualVisibilityChangeRequiredEventListener;\n                        container.virtualZIndexChangeRequiredEvent = this._containerVirtualZIndexChangeRequiredEventListener;\n                    }\n                }\n            }\n\n            this._registeredComponentMap.set(container, component);\n\n            result = {\n                virtual: instantiator.virtual,\n                component,\n            };\n\n        } else {\n            // Use getComponentEvent\n            result = super.bindComponent(container, itemConfig);\n        }\n\n        return result;\n    }\n\n    /** @internal */\n    override unbindComponent(container: ComponentContainer, virtual: boolean, component: ComponentContainer.Component | undefined): void {\n        const registeredComponent = this._registeredComponentMap.get(container);\n        if (registeredComponent === undefined) {\n            super.unbindComponent(container, virtual, component); // was not created from registration so use virtual unbind events\n        } else {\n            const virtuableComponent = this._virtuableComponentMap.get(container);\n            if (virtuableComponent !== undefined) {\n                const componentRootElement = virtuableComponent.rootHtmlElement;\n                if (componentRootElement === undefined) {\n                    throw new AssertError('GLUC77743', container.title);\n                } else {\n                    this.container.removeChild(componentRootElement);\n                    this._virtuableComponentMap.delete(container);\n                }\n            }\n        }\n    }\n\n    override fireBeforeVirtualRectingEvent(count: number): void {\n        this._goldenLayoutBoundingClientRect = this.container.getBoundingClientRect();\n        super.fireBeforeVirtualRectingEvent(count);\n    }\n\n\n    /** @internal */\n    private handleContainerVirtualRectingRequiredEvent(container: ComponentContainer, width: number, height: number): void {\n        const virtuableComponent = this._virtuableComponentMap.get(container);\n        if (virtuableComponent === undefined) {\n            throw new UnexpectedUndefinedError('GLHCSCE55933');\n        } else {\n            const rootElement = virtuableComponent.rootHtmlElement;\n            if (rootElement === undefined) {\n                throw new BindError(i18nStrings[I18nStringId.ComponentIsNotVirtuable] + ' ' + container.title);\n            } else {\n                const containerBoundingClientRect = container.element.getBoundingClientRect();\n                const left = containerBoundingClientRect.left - this._goldenLayoutBoundingClientRect.left;\n                rootElement.style.left = numberToPixels(left);\n                const top = containerBoundingClientRect.top - this._goldenLayoutBoundingClientRect.top;\n                rootElement.style.top = numberToPixels(top);\n                setElementWidth(rootElement, width);\n                setElementHeight(rootElement, height);\n            }\n        }\n    }\n\n    /** @internal */\n    private handleContainerVirtualVisibilityChangeRequiredEvent(container: ComponentContainer, visible: boolean): void {\n        const virtuableComponent = this._virtuableComponentMap.get(container);\n        if (virtuableComponent === undefined) {\n            throw new UnexpectedUndefinedError('GLHCVVCRE55934');\n        } else {\n            const rootElement = virtuableComponent.rootHtmlElement;\n            if (rootElement === undefined) {\n                throw new BindError(i18nStrings[I18nStringId.ComponentIsNotVirtuable] + ' ' + container.title);\n            } else {\n                setElementDisplayVisibility(rootElement, visible);\n            }\n        }\n    }\n\n    /** @internal */\n    private handleContainerVirtualZIndexChangeRequiredEvent(container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) {\n        const virtuableComponent = this._virtuableComponentMap.get(container);\n        if (virtuableComponent === undefined) {\n            throw new UnexpectedUndefinedError('GLHCVZICRE55935');\n        } else {\n            const rootElement = virtuableComponent.rootHtmlElement;\n            if (rootElement === undefined) {\n                throw new BindError(i18nStrings[I18nStringId.ComponentIsNotVirtuable] + ' ' + container.title);\n            } else {\n                rootElement.style.zIndex = defaultZIndex;\n            }\n        }\n    }\n}\n\n/** @public */\nexport namespace GoldenLayout {\n    export interface VirtuableComponent {\n        rootHtmlElement: HTMLElement;\n    }\n\n    export type ComponentConstructor = new(container: ComponentContainer, state: JsonValue | undefined, virtual: boolean) => ComponentContainer.Component;\n    export type ComponentFactoryFunction = (container: ComponentContainer, state: JsonValue | undefined, virtual: boolean) => ComponentContainer.Component | undefined;\n    export type GetComponentConstructorCallback = (this: void, config: ResolvedComponentItemConfig) => ComponentConstructor;\n\n    export interface ComponentInstantiator {\n        constructor: ComponentConstructor | undefined;\n        factoryFunction: ComponentFactoryFunction | undefined;\n        virtual: boolean;\n    }\n}\n","import { ResolvedComponentItemConfig, ResolvedHeaderedItemConfig } from '../config/resolved-config';\nimport { ComponentContainer } from '../container/component-container';\nimport { Tab } from '../controls/tab';\nimport { UnexpectedNullError } from '../errors/internal-error';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { ItemType, JsonValue } from '../utils/types';\nimport { getElementWidthAndHeight, setElementHeight, setElementWidth } from '../utils/utils';\nimport { ComponentParentableItem } from './component-parentable-item';\nimport { ContentItem } from './content-item';\n\n/** @public */\nexport class ComponentItem extends ContentItem {\n    /** @internal */\n    private _reorderEnabled: boolean;\n    /** @internal */\n    private _headerConfig: ResolvedHeaderedItemConfig.Header | undefined;\n    /** @internal */\n    private _title: string;\n    /** @internal */\n    private readonly _initialWantMaximise: boolean;\n    /** @internal */\n    private _container: ComponentContainer;\n    /** @internal */\n    private _tab: Tab;\n    /** @internal */\n    private _focused = false;\n\n    /** @internal @deprecated use {@link (ComponentItem:class).componentType} */\n    get componentName(): JsonValue { return this._container.componentType; }\n    get componentType(): JsonValue { return this._container.componentType; }\n    get reorderEnabled(): boolean { return this._reorderEnabled; }\n    /** @internal */\n    get initialWantMaximise(): boolean { return this._initialWantMaximise; }\n    get component(): ComponentContainer.Component | undefined { return this._container.component; }\n    get container(): ComponentContainer { return this._container; }\n    get parentItem(): ComponentParentableItem { return this._parentItem; }\n\n    get headerConfig(): ResolvedHeaderedItemConfig.Header | undefined { return this._headerConfig; }\n    get title(): string { return this._title; }\n    get tab(): Tab { return this._tab; }\n    get focused(): boolean { return this._focused; }\n\n    /** @internal */\n    constructor(\n        layoutManager: LayoutManager,\n        config: ResolvedComponentItemConfig,\n        /** @internal */\n        private _parentItem: ComponentParentableItem\n    ) {\n        super(layoutManager, config, _parentItem, document.createElement('div'));\n\n        this.isComponent = true;\n\n        this._reorderEnabled = config.reorderEnabled;\n\n        this.applyUpdatableConfig(config);\n\n        this._initialWantMaximise = config.maximised;\n\n        const containerElement = document.createElement('div');\n        containerElement.classList.add(DomConstants.ClassName.Content);\n        this.element.appendChild(containerElement);\n        this._container = new ComponentContainer(config, this, layoutManager, containerElement,\n            (itemConfig) => this.handleUpdateItemConfigEvent(itemConfig),\n            () => this.show(),\n            () => this.hide(),\n            (suppressEvent) => this.focus(suppressEvent),\n            (suppressEvent) => this.blur(suppressEvent),\n        );\n    }\n\n    /** @internal */\n    override destroy(): void {\n        this._container.destroy()\n        super.destroy();\n    }\n\n    applyUpdatableConfig(config: ResolvedComponentItemConfig): void {\n        this.setTitle(config.title);\n        this._headerConfig = config.header;\n    }\n\n    toConfig(): ResolvedComponentItemConfig {\n        const stateRequestEvent = this._container.stateRequestEvent;\n        const state = stateRequestEvent === undefined ? this._container.state : stateRequestEvent();\n\n        const result: ResolvedComponentItemConfig = {\n            type: ItemType.component,\n            content: [],\n            width: this.width,\n            minWidth: this.minWidth,\n            height: this.height,\n            minHeight: this.minHeight,\n            id: this.id,\n            maximised: false,\n            isClosable: this.isClosable,\n            reorderEnabled: this._reorderEnabled,\n            title: this._title,\n            header: ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig),\n            componentType: ResolvedComponentItemConfig.copyComponentType(this.componentType),\n            componentState: state,\n        }\n\n        return result;\n    }\n\n    close(): void {\n        if (this.parent === null) {\n            throw new UnexpectedNullError('CIC68883');\n        } else {\n            this.parent.removeChild(this, false);\n        }\n    }\n\n    // Used by Drag Proxy\n    /** @internal */\n    enterDragMode(width: number, height: number): void {\n        setElementWidth(this.element, width);\n        setElementHeight(this.element, height);\n        this._container.enterDragMode(width, height);\n    }\n\n    /** @internal */\n    exitDragMode(): void {\n        this._container.exitDragMode();\n    }\n\n    /** @internal */\n    enterStackMaximised(): void {\n        this._container.enterStackMaximised();\n    }\n\n    /** @internal */\n    exitStackMaximised(): void {\n        this._container.exitStackMaximised();\n    }\n\n    // Used by Drag Proxy\n    /** @internal */\n    drag(): void {\n        this._container.drag();\n    }\n\n    /** @internal */\n    override updateSize(force: boolean): void {\n        this.updateNodeSize(force);\n    }\n\n    /** @internal */\n    override init(): void {\n        this.updateNodeSize(false);\n\n        super.init();\n        this._container.emit('open');\n        this.initContentItems();\n    }\n\n    /**\n     * Set this component's title\n     *\n     * @public\n     * @param title -\n     */\n\n    setTitle(title: string): void {\n        this._title = title;\n        this.emit('titleChanged', title);\n        this.emit('stateChanged');\n    }\n\n    setTab(tab: Tab): void {\n        this._tab = tab;\n        this.emit('tab', tab)\n        this._container.setTab(tab);\n    }\n\n    /** @internal */\n    override hide(): void {\n        super.hide();\n        this._container.setVisibility(false);\n    }\n\n    /** @internal */\n    override show(): void {\n        super.show();\n        this._container.setVisibility(true);\n    }\n\n    /**\n     * Focuses the item if it is not already focused\n     */\n    focus(suppressEvent = false): void {\n        this.parentItem.setActiveComponentItem(this, true, suppressEvent);\n    }\n\n    /** @internal */\n    setFocused(suppressEvent: boolean): void {\n        this._focused = true;\n        this.tab.setFocused();\n        if (!suppressEvent) {\n            this.emitBaseBubblingEvent('focus');\n        }\n    }\n\n    /**\n     * Blurs (defocuses) the item if it is focused\n     */\n    blur(suppressEvent = false): void {\n        if (this._focused) {\n            this.layoutManager.setFocusedComponentItem(undefined, suppressEvent);\n        }\n    }\n\n    /** @internal */\n    setBlurred(suppressEvent: boolean): void {\n        this._focused = false;\n        this.tab.setBlurred();\n        if (!suppressEvent) {\n            this.emitBaseBubblingEvent('blur');\n        }\n    }\n\n    /** @internal */\n    protected override setParent(parent: ContentItem): void {\n        this._parentItem = parent as ComponentParentableItem;\n        super.setParent(parent);\n    }\n\n    /** @internal */\n    private handleUpdateItemConfigEvent(itemConfig: ResolvedComponentItemConfig) {\n        this.applyUpdatableConfig(itemConfig);\n    }\n\n    /** @internal */\n    private updateNodeSize(force: boolean): void {\n        if (this.element.style.display !== 'none') {\n            // Do not update size of hidden components to prevent unwanted reflows\n\n            const { width, height } = getElementWidthAndHeight(this.element);\n            this._container.setSizeToNodeSize(width, height, force);\n        }\n    }\n}\n\n/** @public @deprecated use {@link (ComponentItem:class)} */\nexport type Component = ComponentItem;\n\n/** @public */\nexport namespace ComponentItem {\n    export type Component = ComponentContainer.Component;\n}\n","import { ComponentItem } from './component-item';\nimport { ContentItem } from './content-item';\n\nexport abstract class ComponentParentableItem extends ContentItem {\n    /** @internal */\n    private _focused = false;\n\n    get focused(): boolean { return this._focused; }\n\n    /** @internal */\n    setFocusedValue(value: boolean): void {\n        this._focused = value;\n    }\n\n    abstract setActiveComponentItem(item: ComponentItem, focus: boolean, suppressFocusEvent: boolean): void;\n}\n","import { ResolvedItemConfig } from '../config/resolved-config'\nimport { BrowserPopout } from '../controls/browser-popout'\nimport { AssertError, UnexpectedNullError } from '../errors/internal-error'\nimport { LayoutManager } from '../layout-manager'\nimport { EventEmitter } from '../utils/event-emitter'\nimport { getJQueryOffset } from '../utils/jquery-legacy'\nimport { AreaLinkedRect, ItemType } from '../utils/types'\nimport { getUniqueId, setElementDisplayVisibility } from '../utils/utils'\nimport { ComponentItem } from './component-item'\nimport { ComponentParentableItem } from './component-parentable-item'\nimport { Stack } from './stack'\n\n/**\n * This is the baseclass that all content items inherit from.\n * Most methods provide a subset of what the sub-classes do.\n *\n * It also provides a number of functions for tree traversal\n * @public\n */\n\nexport abstract class ContentItem extends EventEmitter {\n    /** @internal */\n    private _type: ItemType;\n    /** @internal */\n    private _id: string;\n    /** @internal */\n    private _popInParentIds: string[] = [];\n    /** @internal */\n    private _contentItems: ContentItem[];\n    /** @internal */\n    private _isClosable;\n    /** @internal */\n    private _pendingEventPropagations: Record<string, unknown>;\n    /** @internal */\n    private _throttledEvents: string[];\n    /** @internal */\n    private _isInitialised;\n\n    /** @internal */\n    width: number; // pixels\n    /** @internal */\n    minWidth: number; // pixels\n    /** @internal */\n    height: number; // pixels\n    /** @internal */\n    minHeight: number; // pixels\n\n    isGround: boolean\n    isRow: boolean\n    isColumn: boolean\n    isStack: boolean\n    isComponent: boolean\n\n    get type(): ItemType { return this._type; }\n    get id(): string { return this._id; }\n    set id(value: string) { this._id = value; }\n    /** @internal */\n    get popInParentIds(): string[] { return this._popInParentIds; }\n    get parent(): ContentItem | null { return this._parent; }\n    get contentItems(): ContentItem[] { return this._contentItems; }\n    get isClosable(): boolean { return this._isClosable; }\n    get element(): HTMLElement { return this._element; }\n    get isInitialised(): boolean { return this._isInitialised; }\n\n    static isStack(item: ContentItem): item is Stack {\n        return item.isStack;\n    }\n\n    static isComponentItem(item: ContentItem): item is ComponentItem {\n        return item.isComponent;\n    }\n\n    static isComponentParentableItem(item: ContentItem): item is ComponentParentableItem {\n        return item.isStack || item.isGround;\n    }\n\n    /** @internal */\n    constructor(public readonly layoutManager: LayoutManager,\n        config: ResolvedItemConfig,\n        /** @internal */\n        private _parent: ContentItem | null,\n        /** @internal */\n        private readonly _element: HTMLElement\n    ) {\n        super();\n\n        this._type = config.type;\n        this._id = config.id;\n\n        this._isInitialised = false;\n        this.isGround = false;\n        this.isRow = false;\n        this.isColumn = false;\n        this.isStack = false;\n        this.isComponent = false;\n\n        this.width = config.width;\n        this.minWidth = config.minWidth;\n        this.height = config.height;\n        this.minHeight = config.minHeight;\n\n        this._isClosable = config.isClosable;\n\n        this._pendingEventPropagations = {};\n        this._throttledEvents = ['stateChanged'];\n\n        this._contentItems = this.createContentItems(config.content);\n    }\n\n    /**\n     * Updaters the size of the component and its children, called recursively\n     * @param force - In some cases the size is not updated if it has not changed. In this case, events\n     * (such as ComponentContainer.virtualRectingRequiredEvent) are not fired. Setting force to true, ensures the size is updated regardless, and\n     * the respective events are fired. This is sometimes necessary when a component's size has not changed but it has become visible, and the\n     * relevant events need to be fired.\n     * @internal\n     */\n    abstract updateSize(force: boolean): void;\n\n    /**\n     * Removes a child node (and its children) from the tree\n     * @param contentItem - The child item to remove\n     * @param keepChild - Whether to destroy the removed item\n     */\n    removeChild(contentItem: ContentItem, keepChild = false): void {\n        /*\n         * Get the position of the item that's to be removed within all content items this node contains\n         */\n        const index = this._contentItems.indexOf(contentItem);\n\n        /*\n         * Make sure the content item to be removed is actually a child of this item\n         */\n        if (index === -1) {\n            throw new Error('Can\\'t remove child item. Unknown content item');\n        }\n\n        /**\n\t\t * Call destroy on the content item.\n\t\t * All children are destroyed as well\n\t\t */\n        if (!keepChild) {\n\t\t\tthis._contentItems[index].destroy();\n        }\n\n        /**\n         * Remove the content item from this nodes array of children\n         */\n        this._contentItems.splice(index, 1);\n\n        /**\n         * If this node still contains other content items, adjust their size\n         */\n        if (this._contentItems.length > 0) {\n            this.updateSize(false);\n        } else {\n            /**\n             * If this was the last content item, remove this node as well\n             */\n            if (!this.isGround && this._isClosable === true) {\n                if (this._parent === null) {\n                    throw new UnexpectedNullError('CIUC00874');\n                } else {\n                    this._parent.removeChild(this);\n                }\n            }\n        }\n    }\n\n    /**\n     * Sets up the tree structure for the newly added child\n     * The responsibility for the actual DOM manipulations lies\n     * with the concrete item\n     *\n     * @param contentItem -\n     * @param index - If omitted item will be appended\n     * @param suspendResize - Used by descendent implementations\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    addChild(contentItem: ContentItem, index?: number | null, suspendResize?: boolean): number {\n        index ??= this._contentItems.length;\n\n        this._contentItems.splice(index, 0, contentItem);\n        contentItem.setParent(this);\n\n        if (this._isInitialised === true && contentItem._isInitialised === false) {\n            contentItem.init();\n        }\n\n        return index;\n    }\n\n    /**\n     * Replaces oldChild with newChild\n     * @param oldChild -\n     * @param newChild -\n     * @internal\n     */\n    replaceChild(oldChild: ContentItem, newChild: ContentItem, destroyOldChild = false): void {\n        // Do not try to replace ComponentItem - will not work\n        const index = this._contentItems.indexOf(oldChild);\n        const parentNode = oldChild._element.parentNode;\n\n        if (index === -1) {\n            throw new AssertError('CIRCI23232', 'Can\\'t replace child. oldChild is not child of this');\n        }\n\n        if (parentNode === null) {\n            throw new UnexpectedNullError('CIRCP23232');\n        } else {\n            parentNode.replaceChild(newChild._element, oldChild._element);\n\n            /*\n            * Optionally destroy the old content item\n            */\n            if (destroyOldChild === true) {\n                oldChild._parent = null;\n                oldChild.destroy(); // will now also destroy all children of oldChild\n            }\n\n            /*\n            * Wire the new contentItem into the tree\n            */\n            this._contentItems[index] = newChild;\n            newChild.setParent(this);\n            // newChild inherits the sizes from the old child:\n            newChild.height = oldChild.height;\n            newChild.width = oldChild.width;\n\n            //TODO This doesn't update the config... refactor to leave item nodes untouched after creation\n            if (newChild._parent === null) {\n                throw new UnexpectedNullError('CIRCNC45699');\n            } else {\n                if (newChild._parent._isInitialised === true && newChild._isInitialised === false) {\n                    newChild.init();\n                }\n\n                this.updateSize(false);\n            }\n        }\n    }\n\n    /**\n     * Convenience method.\n     * Shorthand for this.parent.removeChild( this )\n     */\n    remove(): void {\n        if (this._parent === null) {\n            throw new UnexpectedNullError('CIR11110');\n        } else {\n            this._parent.removeChild(this);\n        }\n    }\n\n    /**\n     * Removes the component from the layout and creates a new\n     * browser window with the component and its children inside\n     */\n    popout(): BrowserPopout {\n        const parentId = getUniqueId();\n        const browserPopout = this.layoutManager.createPopoutFromContentItem(this, undefined, parentId, undefined);\n        this.emitBaseBubblingEvent('stateChanged');\n        return browserPopout;\n    }\n\n    abstract toConfig(): ResolvedItemConfig;\n\n    /** @internal */\n    calculateConfigContent(): ResolvedItemConfig[] {\n        const contentItems = this._contentItems;\n        const count = contentItems.length;\n        const result = new Array<ResolvedItemConfig>(count);\n        for (let i = 0; i < count; i++) {\n            const item = contentItems[i];\n            result[i] = item.toConfig();\n        }\n        return result;\n    }\n\n    /** @internal */\n    highlightDropZone(x: number, y: number, area: AreaLinkedRect): void {\n        const dropTargetIndicator = this.layoutManager.dropTargetIndicator;\n        if (dropTargetIndicator === null) {\n            throw new UnexpectedNullError('ACIHDZ5593');\n        } else {\n            dropTargetIndicator.highlightArea(area);\n        }\n    }\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onDrop(contentItem: ContentItem, area: ContentItem.Area): void {\n        this.addChild(contentItem);\n    }\n\n    /** @internal */\n    show(): void {\n        this.layoutManager.beginSizeInvalidation();\n        try {\n            // Not sure why showAllActiveContentItems() was called. GoldenLayout seems to work fine without it.  Left commented code\n            // in source in case a reason for it becomes apparent.\n            // this.layoutManager.showAllActiveContentItems();\n            setElementDisplayVisibility(this._element, true);\n            // this.layoutManager.updateSizeFromContainer();\n\n            for (let i = 0; i < this._contentItems.length; i++) {\n                this._contentItems[i].show();\n            }\n        } finally {\n            this.layoutManager.endSizeInvalidation();\n        }\n    }\n\n    /**\n     * Destroys this item ands its children\n     * @internal\n     */\n    destroy(): void {\n        for (let i = 0; i < this._contentItems.length; i++) {\n            this._contentItems[i].destroy();\n        }\n        this._contentItems = [];\n\n        this.emitBaseBubblingEvent('beforeItemDestroyed');\n        this._element.remove();\n        this.emitBaseBubblingEvent('itemDestroyed');\n    }\n\n    /**\n     * Returns the area the component currently occupies\n     * @internal\n     */\n    getElementArea(element?: HTMLElement): ContentItem.Area | null {\n        element = element ?? this._element;\n\n        const offset = getJQueryOffset(element);\n        const width = element.offsetWidth;\n        const height = element.offsetHeight;\n        // const widthAndHeight = getJQueryWidthAndHeight(element);\n\n        return {\n            x1: offset.left + 1,\n            y1: offset.top + 1,\n            x2: offset.left + width - 1,\n            y2: offset.top + height - 1,\n            surface: width * height,\n            contentItem: this\n        };\n    }\n\n    /**\n     * The tree of content items is created in two steps: First all content items are instantiated,\n     * then init is called recursively from top to bottem. This is the basic init function,\n     * it can be used, extended or overwritten by the content items\n     *\n     * Its behaviour depends on the content item\n     * @internal\n     */\n    init(): void {\n        this._isInitialised = true;\n        this.emitBaseBubblingEvent('itemCreated');\n        this.emitUnknownBubblingEvent(this.type + 'Created');\n    }\n\n    /** @internal */\n    protected setParent(parent: ContentItem): void {\n        this._parent = parent;\n    }\n\n    /** @internal */\n    addPopInParentId(id: string): void {\n        if (!this.popInParentIds.includes(id)) {\n            this.popInParentIds.push(id);\n        }\n    }\n\n    /** @internal */\n    protected initContentItems(): void {\n        for (let i = 0; i < this._contentItems.length; i++) {\n            this._contentItems[i].init();\n        }\n    }\n\n    /** @internal */\n    protected hide(): void {\n        this.layoutManager.beginSizeInvalidation();\n        try {\n            setElementDisplayVisibility(this._element, false);\n            // this.layoutManager.updateSizeFromContainer();\n        } finally {\n            this.layoutManager.endSizeInvalidation();\n        }\n    }\n\n    /** @internal */\n    protected updateContentItemsSize(force: boolean): void {\n        for (let i = 0; i < this._contentItems.length; i++) {\n            this._contentItems[i].updateSize(force);\n        }\n    }\n\n    /**\n     * creates all content items for this node at initialisation time\n     * PLEASE NOTE, please see addChild for adding contentItems at runtime\n     * @internal\n     */\n    private createContentItems(content: readonly ResolvedItemConfig[]) {\n        const count = content.length;\n        const result = new Array<ContentItem>(count);\n        for (let i = 0; i < content.length; i++) {\n            result[i] = this.layoutManager.createContentItem(content[i], this);\n        }\n        return result;\n    }\n\n    /**\n     * Called for every event on the item tree. Decides whether the event is a bubbling\n     * event and propagates it to its parent\n     *\n     * @param name - The name of the event\n     * @param event -\n     * @internal\n     */\n    private propagateEvent(name: string, args: unknown[]) {\n        if (args.length === 1) {\n            const event = args[0];\n            if (event instanceof EventEmitter.BubblingEvent &&\n                event.isPropagationStopped === false &&\n                this._isInitialised === true) {\n\n                /**\n                 * In some cases (e.g. if an element is created from a DragSource) it\n                 * doesn't have a parent and is not a child of GroundItem. If that's the case\n                 * propagate the bubbling event from the top level of the substree directly\n                 * to the layoutManager\n                 */\n                if (this.isGround === false && this._parent) {\n                    this._parent.emitUnknown(name, event);\n                } else {\n                    this.scheduleEventPropagationToLayoutManager(name, event);\n                }\n            }\n        }\n    }\n\n    override tryBubbleEvent(name: string, args: unknown[]): void {\n        if (args.length === 1) {\n            const event = args[0];\n            if (event instanceof EventEmitter.BubblingEvent &&\n                event.isPropagationStopped === false &&\n                this._isInitialised === true\n            ) {\n                /**\n                 * In some cases (e.g. if an element is created from a DragSource) it\n                 * doesn't have a parent and is not a child of GroundItem. If that's the case\n                 * propagate the bubbling event from the top level of the substree directly\n                 * to the layoutManager\n                 */\n                if (this.isGround === false && this._parent) {\n                    this._parent.emitUnknown(name, event);\n                } else {\n                    this.scheduleEventPropagationToLayoutManager(name, event);\n                }\n            }\n        }\n    }\n\n    /**\n     * All raw events bubble up to the Ground element. Some events that\n     * are propagated to - and emitted by - the layoutManager however are\n     * only string-based, batched and sanitized to make them more usable\n     *\n     * @param name - The name of the event\n     * @internal\n     */\n    private scheduleEventPropagationToLayoutManager(name: string, event: EventEmitter.BubblingEvent) {\n        if (this._throttledEvents.indexOf(name) === -1) {\n            this.layoutManager.emitUnknown(name, event);\n        } else {\n            if (this._pendingEventPropagations[name] !== true) {\n                this._pendingEventPropagations[name] = true;\n                globalThis.requestAnimationFrame(() => this.propagateEventToLayoutManager(name, event));\n            }\n        }\n\n    }\n\n    /**\n     * Callback for events scheduled by _scheduleEventPropagationToLayoutManager\n     *\n     * @param name - The name of the event\n     * @internal\n     */\n    private propagateEventToLayoutManager(name: string, event: EventEmitter.BubblingEvent) {\n        this._pendingEventPropagations[name] = false;\n        this.layoutManager.emitUnknown(name, event);\n    }\n}\n\n/** @public */\nexport namespace ContentItem {\n    /** @internal */\n    export interface Area extends AreaLinkedRect {\n        surface: number;\n        contentItem: ContentItem;\n    }\n}\n\n/** @public @deprecated Use {@link (ContentItem:class)} */\nexport type AbstractContentItem = ContentItem;\n","import { ComponentItemConfig, ItemConfig, RowOrColumnItemConfig, StackItemConfig } from '../config/config';\nimport { ResolvedComponentItemConfig, ResolvedGroundItemConfig, ResolvedHeaderedItemConfig, ResolvedItemConfig, ResolvedRootItemConfig, ResolvedStackItemConfig } from '../config/resolved-config';\nimport { AssertError, UnexpectedNullError } from '../errors/internal-error';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { AreaLinkedRect, ItemType } from '../utils/types';\nimport { getElementWidthAndHeight, setElementHeight, setElementWidth } from '../utils/utils';\nimport { ComponentItem } from './component-item';\nimport { ComponentParentableItem } from './component-parentable-item';\nimport { ContentItem } from './content-item';\nimport { RowOrColumn } from './row-or-column';\n\n/**\n * GroundItem is the ContentItem whose one child is the root ContentItem (Root is planted in Ground).\n * (Previously it was called root however this was incorrect as its child is the root item)\n * There is only one instance of GroundItem and it is automatically created by the Layout Manager\n * @internal\n */\nexport class GroundItem extends ComponentParentableItem {\n    private readonly _childElementContainer: HTMLElement;\n    private readonly _containerElement: HTMLElement;\n\n    constructor(layoutManager: LayoutManager, rootItemConfig: ResolvedRootItemConfig | undefined, containerElement: HTMLElement) {\n\n        super(layoutManager, ResolvedGroundItemConfig.create(rootItemConfig), null, GroundItem.createElement(document));\n\n        this.isGround = true;\n        this._childElementContainer = this.element;\n        this._containerElement = containerElement;\n\n        // insert before any pre-existing content elements\n        let before = null;\n        while (true) {\n            const prev: ChildNode | null =\n                before ? before.previousSibling : this._containerElement.lastChild;\n            if (prev instanceof Element\n                && prev.classList.contains(DomConstants.ClassName.Content)) {\n                before = prev;\n            } else {\n                break;\n            }\n        }\n        this._containerElement.insertBefore(this.element, before);\n    }\n\n    override init(): void {\n        if (this.isInitialised === true) return;\n\n        this.updateNodeSize();\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            this._childElementContainer.appendChild(this.contentItems[i].element);\n        }\n\n        super.init();\n\n        this.initContentItems();\n    }\n\n    /**\n     * Loads a new Layout\n     * Internal only.  To load a new layout with API, use {@link (LayoutManager:class).loadLayout}\n     */\n    loadRoot(rootItemConfig: ResolvedRootItemConfig | undefined): void {\n        // Remove existing root if it exists\n        this.clearRoot();\n\n        if (rootItemConfig !== undefined) {\n            const rootContentItem = this.layoutManager.createAndInitContentItem(rootItemConfig, this);\n            this.addChild(rootContentItem, 0);\n        }\n    }\n\n    clearRoot(): void {\n        // Remove existing root if it exists\n        const contentItems = this.contentItems;\n        switch (contentItems.length) {\n            case 0: {\n                return;\n            }\n            case 1: {\n                const existingRootContentItem = contentItems[0];\n                existingRootContentItem.remove();\n                return;\n            }\n            default: {\n                throw new AssertError('GILR07721');\n            }\n        }\n    }\n\n    /**\n     * Adds a ContentItem child to root ContentItem.\n     * Internal only.  To load a add with API, use {@link (LayoutManager:class).addItem}\n     * @returns -1 if added as root otherwise index in root ContentItem's content\n     */\n    addItem(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig,\n        index?: number\n    ): number {\n        this.layoutManager.checkMinimiseMaximisedStack();\n\n        const resolvedItemConfig = ItemConfig.resolve(itemConfig);\n        let parent: ContentItem;\n        if (this.contentItems.length > 0) {\n            parent = this.contentItems[0];\n        } else {\n            parent = this;\n        }\n        if (parent.isComponent) {\n            throw new Error('Cannot add item as child to ComponentItem');\n        } else {\n            const contentItem = this.layoutManager.createAndInitContentItem(resolvedItemConfig, parent);\n            index = parent.addChild(contentItem, index);\n            return (parent === this) ? -1 : index;\n        }\n    }\n\n    loadComponentAsRoot(itemConfig: ComponentItemConfig): void {\n        // Remove existing root if it exists\n        this.clearRoot();\n\n        const resolvedItemConfig = ItemConfig.resolve(itemConfig) as ResolvedComponentItemConfig;\n\n        if (resolvedItemConfig.maximised) {\n            throw new Error('Root Component cannot be maximised');\n        } else {\n            const rootContentItem = new ComponentItem(this.layoutManager, resolvedItemConfig, this);\n            rootContentItem.init();\n            this.addChild(rootContentItem, 0);\n        }\n    }\n\n    /**\n     * Adds a Root ContentItem.\n     * Internal only.  To replace Root ContentItem with API, use {@link (LayoutManager:class).loadLayout}\n     */\n    override addChild(contentItem: ContentItem, index?: number): number {\n        if (this.contentItems.length > 0) {\n            throw new Error('Ground node can only have a single child');\n        } else {\n            // contentItem = this.layoutManager._$normalizeContentItem(contentItem, this);\n            this._childElementContainer.appendChild(contentItem.element);\n            index = super.addChild(contentItem, index);\n\n            this.updateSize(false);\n            this.emitBaseBubblingEvent('stateChanged');\n\n            return index;\n        }\n    }\n\n    /** @internal */\n    override calculateConfigContent(): ResolvedRootItemConfig[] {\n        const contentItems = this.contentItems;\n        const count = contentItems.length;\n        const result = new Array<ResolvedRootItemConfig>(count);\n        for (let i = 0; i < count; i++) {\n            const item = contentItems[i];\n            const itemConfig = item.toConfig();\n            if (ResolvedRootItemConfig.isRootItemConfig(itemConfig)) {\n                result[i] = itemConfig;\n            } else {\n                throw new AssertError('RCCC66832');\n            }\n        }\n        return result;\n    }\n\n    /** @internal */\n    setSize(width: number, height: number): void {\n        if (width === undefined || height === undefined) {\n            this.updateSize(false); // For backwards compatibility with v1.x API\n        } else {\n            setElementWidth(this.element, width);\n            setElementHeight(this.element, height);\n\n            // GroundItem can be empty\n            if (this.contentItems.length > 0) {\n                setElementWidth(this.contentItems[0].element, width);\n                setElementHeight(this.contentItems[0].element, height);\n            }\n\n            this.updateContentItemsSize(false);\n        }\n    }\n\n    /**\n     * Adds a Root ContentItem.\n     * Internal only.  To replace Root ContentItem with API, use {@link (LayoutManager:class).updateRootSize}\n     */\n    override updateSize(force: boolean): void {\n        this.layoutManager.beginVirtualSizedContainerAdding();\n        try {\n            this.updateNodeSize();\n            this.updateContentItemsSize(force);\n        } finally {\n            this.layoutManager.endVirtualSizedContainerAdding();\n        }\n    }\n\n    createSideAreas(): GroundItem.Area[] {\n        const areaSize = 50;\n\n        const oppositeSides = GroundItem.Area.oppositeSides;\n        const result = new Array<GroundItem.Area>(Object.keys(oppositeSides).length);\n        let idx = 0;\n\n        for (const key in oppositeSides) {\n            const side = key as keyof GroundItem.Area.Sides;\n            const area = this.getElementArea() as GroundItem.Area;\n            if (area === null) {\n                throw new UnexpectedNullError('RCSA77553');\n            } else {\n                area.side = side;\n                if (oppositeSides[side][1] === '2' )\n                    area[side] = area[oppositeSides[side]] - areaSize;\n                else\n                    area[side] = area[oppositeSides[side]] + areaSize;\n                area.surface = (area.x2 - area.x1) * (area.y2 - area.y1);\n                result[idx++] = area;\n            }\n        }\n\n        return result;\n    }\n\n    override highlightDropZone(x: number, y: number, area: AreaLinkedRect): void {\n        this.layoutManager.tabDropPlaceholder.remove();\n        super.highlightDropZone(x, y, area);\n    }\n\n    override onDrop(contentItem: ContentItem, area: GroundItem.Area): void {\n\n        if (contentItem.isComponent) {\n            const itemConfig = ResolvedStackItemConfig.createDefault();\n            // since ResolvedItemConfig.contentItems not set up, we need to add header from Component\n            const component = contentItem as ComponentItem;\n            itemConfig.header = ResolvedHeaderedItemConfig.Header.createCopy(component.headerConfig);\n            const stack = this.layoutManager.createAndInitContentItem(itemConfig, this);\n            stack.addChild(contentItem);\n            contentItem = stack;\n        }\n\n        if (this.contentItems.length === 0) {\n            this.addChild(contentItem);\n        } else {\n            /*\n             * If the contentItem that's being dropped is not dropped on a Stack (cases which just passed above and\n             * which would wrap the contentItem in a Stack) we need to check whether contentItem is a RowOrColumn.\n             * If it is, we need to re-wrap it in a Stack like it was when it was dragged by its Tab (it was dragged!).\n             */\n            if(contentItem.type === ItemType.row || contentItem.type === ItemType.column){\n                const itemConfig = ResolvedStackItemConfig.createDefault();\n                const stack = this.layoutManager.createContentItem(itemConfig, this);\n                stack.addChild(contentItem)\n                contentItem = stack\n            }\n\n            const type = area.side[0] == 'x' ? ItemType.row : ItemType.column;\n            const dimension = area.side[0] == 'x' ? 'width' : 'height';\n            const insertBefore = area.side[1] == '2';\n            const column = this.contentItems[0];\n            if (!(column instanceof RowOrColumn) || column.type !== type) {\n                const itemConfig = ResolvedItemConfig.createDefault(type);\n                const rowOrColumn = this.layoutManager.createContentItem(itemConfig, this);\n                this.replaceChild(column, rowOrColumn);\n                rowOrColumn.addChild(contentItem, insertBefore ? 0 : undefined, true);\n                rowOrColumn.addChild(column, insertBefore ? undefined : 0, true);\n                column[dimension] = 50;\n                contentItem[dimension] = 50;\n                rowOrColumn.updateSize(false);\n            } else {\n                const sibling = column.contentItems[insertBefore ? 0 : column.contentItems.length - 1]\n                column.addChild(contentItem, insertBefore ? 0 : undefined, true);\n                sibling[dimension] *= 0.5;\n                contentItem[dimension] = sibling[dimension];\n                column.updateSize(false);\n            }\n        }\n    }\n\n    // No ContentItem can dock with groundItem.  However Stack can have a GroundItem parent and Stack requires that\n    // its parent implement dock() function.  Accordingly this function is implemented but throws an exception as it should\n    // never be called\n    dock(): void {\n        throw new AssertError('GID87731');\n    }\n\n    // No ContentItem can dock with groundItem.  However Stack can have a GroundItem parent and Stack requires that\n    // its parent implement validateDocking() function.  Accordingly this function is implemented but throws an exception as it should\n    // never be called\n    validateDocking(): void {\n        throw new AssertError('GIVD87732');\n    }\n\n    getAllContentItems(): ContentItem[] {\n        const result: ContentItem[] = [this];\n        this.deepGetAllContentItems(this.contentItems, result);\n        return result;\n    }\n\n    getConfigMaximisedItems(): ContentItem[] {\n        const result: ContentItem[] = [];\n        this.deepFilterContentItems(this.contentItems, result, (item) => {\n            if (ContentItem.isStack(item) && item.initialWantMaximise) {\n                return true;\n            } else {\n                if (ContentItem.isComponentItem(item) && item.initialWantMaximise) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        });\n\n        return result;\n    }\n\n    getItemsByPopInParentId(popInParentId: string): ContentItem[] {\n        const result: ContentItem[] = [];\n        this.deepFilterContentItems(this.contentItems, result, (item) => item.popInParentIds.includes(popInParentId));\n        return result;\n    }\n\n    toConfig(): ResolvedItemConfig {\n        throw new Error('Cannot generate GroundItem config');\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setActiveComponentItem(item: ComponentItem, focus: boolean, suppressFocusEvent: boolean): void {\n        // only applicable if ComponentItem is root and then it always has focus\n    }\n\n    private updateNodeSize(): void {\n        const { width, height } = getElementWidthAndHeight(this._containerElement);\n\n        setElementWidth(this.element, width);\n        setElementHeight(this.element, height);\n\n        /*\n         * GroundItem can be empty\n         */\n        if (this.contentItems.length > 0) {\n            setElementWidth(this.contentItems[0].element, width);\n            setElementHeight(this.contentItems[0].element, height);\n        }\n    }\n\n    private deepGetAllContentItems(content: readonly ContentItem[], result: ContentItem[]): void {\n        for (let i = 0; i < content.length; i++) {\n            const contentItem = content[i];\n            result.push(contentItem);\n            this.deepGetAllContentItems(contentItem.contentItems, result);\n        }\n    }\n\n    private deepFilterContentItems(content: readonly ContentItem[], result: ContentItem[],\n        checkAcceptFtn: ((this: void, item: ContentItem) => boolean)\n    ): void {\n        for (let i = 0; i < content.length; i++) {\n            const contentItem = content[i];\n            if (checkAcceptFtn(contentItem)) {\n                result.push(contentItem);\n            }\n            this.deepFilterContentItems(contentItem.contentItems, result, checkAcceptFtn);\n        }\n    }\n\n}\n\n/** @internal */\nexport namespace GroundItem {\n    export interface Area extends ContentItem.Area {\n        side: keyof typeof Area.Side;\n    }\n\n    export namespace Area {\n        export const enum Side {\n            y2,\n            x2,\n            y1,\n            x1,\n        }\n\n        export type Sides = { [side in keyof typeof Side]: keyof typeof Side; }\n\n        export const oppositeSides: Sides = {\n            y2: 'y1',\n            x2: 'x1',\n            y1: 'y2',\n            x1: 'x2',\n        };\n    }\n\n    export function createElement(document: Document): HTMLDivElement {\n        const element = document.createElement('div');\n        element.classList.add(DomConstants.ClassName.GoldenLayout);\n        element.classList.add(DomConstants.ClassName.Item);\n        element.classList.add(DomConstants.ClassName.Root);\n        return element;\n    }\n}\n","import { ComponentItemConfig, ItemConfig, RowOrColumnItemConfig, StackItemConfig } from '../config/config'\nimport { ResolvedRowOrColumnItemConfig, ResolvedStackItemConfig } from '../config/resolved-config'\nimport { Splitter } from '../controls/splitter'\nimport { AssertError, UnexpectedNullError } from '../errors/internal-error'\nimport { LayoutManager } from '../layout-manager'\nimport { DomConstants } from '../utils/dom-constants'\nimport { ItemType, JsonValue, WidthOrHeightPropertyName } from '../utils/types'\nimport {\n    getElementHeight,\n    getElementWidth,\n    getElementWidthAndHeight,\n    numberToPixels,\n    pixelsToNumber,\n    setElementHeight,\n    setElementWidth\n} from \"../utils/utils\"\nimport { ComponentItem } from './component-item'\nimport { ContentItem } from './content-item'\n\n/** @public */\nexport class RowOrColumn extends ContentItem {\n    /** @internal */\n    private readonly _childElementContainer: HTMLElement;\n    /** @internal */\n    private readonly _configType: 'row' | 'column';\n    /** @internal */\n    private readonly _isColumn: boolean;\n    /** @internal */\n    private readonly _splitterSize: number;\n    /** @internal */\n    private readonly _splitterGrabSize: number;\n    /** @internal */\n    private readonly _dimension: WidthOrHeightPropertyName;\n    /** @internal */\n    private readonly _splitter: Splitter[] = [];\n    /** @internal */\n    private _splitterPosition: number | null;\n    /** @internal */\n    private _splitterMinPosition: number | null;\n    /** @internal */\n    private _splitterMaxPosition: number | null;\n\n    /** @internal */\n    constructor(isColumn: boolean, layoutManager: LayoutManager, config: ResolvedRowOrColumnItemConfig,\n        /** @internal */\n        private _rowOrColumnParent: ContentItem\n    ) {\n        super(layoutManager, config, _rowOrColumnParent, RowOrColumn.createElement(document, isColumn));\n\n        this.isRow = !isColumn;\n        this.isColumn = isColumn;\n\n        this._childElementContainer = this.element;\n        this._splitterSize = layoutManager.layoutConfig.dimensions.borderWidth;\n        this._splitterGrabSize = layoutManager.layoutConfig.dimensions.borderGrabWidth;\n        this._isColumn = isColumn;\n        this._dimension = isColumn ? 'height' : 'width';\n        this._splitterPosition = null;\n        this._splitterMinPosition = null;\n        this._splitterMaxPosition = null;\n\n        switch (config.type) {\n            case ItemType.row:\n            case ItemType.column:\n                this._configType = config.type;\n                break;\n            default:\n                throw new AssertError('ROCCCT00925');\n        }\n    }\n\n    newComponent(componentType: JsonValue, componentState?: JsonValue, title?: string, index?: number): ComponentItem {\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        };\n        return this.newItem(itemConfig, index) as ComponentItem;\n    }\n\n    addComponent(componentType: JsonValue, componentState?: JsonValue, title?: string, index?: number): number {\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        };\n        return this.addItem(itemConfig, index);\n    }\n\n    newItem(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig,  index?: number): ContentItem {\n        index = this.addItem(itemConfig, index);\n        const createdItem = this.contentItems[index];\n\n        if (ContentItem.isStack(createdItem) && (ItemConfig.isComponent(itemConfig))) {\n            // createdItem is a Stack which was created to hold wanted component.  Return component\n            return createdItem.contentItems[0];\n        } else {\n            return createdItem;\n        }\n    }\n\n    addItem(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig,\n        index?: number\n    ): number {\n        this.layoutManager.checkMinimiseMaximisedStack();\n        const resolvedItemConfig = ItemConfig.resolve(itemConfig);\n        const contentItem = this.layoutManager.createAndInitContentItem(resolvedItemConfig, this);\n        return this.addChild(contentItem, index, false);\n    }\n\n    /**\n     * Add a new contentItem to the Row or Column\n     *\n     * @param contentItem -\n     * @param index - The position of the new item within the Row or Column.\n     *                If no index is provided the item will be added to the end\n     * @param suspendResize - If true the items won't be resized. This will leave the item in\n     *                        an inconsistent state and is only intended to be used if multiple\n     *                        children need to be added in one go and resize is called afterwards\n     *\n     * @returns\n     */\n    override addChild(contentItem: ContentItem, index?: number, suspendResize?: boolean): number {\n\n        // contentItem = this.layoutManager._$normalizeContentItem(contentItem, this);\n\n        if (index === undefined) {\n            index = this.contentItems.length;\n        }\n\n        if (this.contentItems.length > 0) {\n            const splitterElement = this.createSplitter(Math.max(0, index - 1)).element;\n\n            if (index > 0) {\n                this.contentItems[index - 1].element.insertAdjacentElement('afterend', splitterElement);\n                splitterElement.insertAdjacentElement('afterend', contentItem.element);\n            } else {\n                this.contentItems[0].element.insertAdjacentElement('beforebegin', splitterElement);\n                splitterElement.insertAdjacentElement('beforebegin', contentItem.element);\n            }\n        } else {\n            this._childElementContainer.appendChild(contentItem.element);\n        }\n\n        super.addChild(contentItem, index);\n\n        const newItemSize = (1 / this.contentItems.length) * 100;\n\n        if (suspendResize === true) {\n            this.emitBaseBubblingEvent('stateChanged');\n            return index;\n        }\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            if (this.contentItems[i] === contentItem) {\n                contentItem[this._dimension] = newItemSize;\n            } else {\n                const itemSize = this.contentItems[i][this._dimension] *= (100 - newItemSize) / 100;\n                this.contentItems[i][this._dimension] = itemSize;\n            }\n        }\n\n        this.updateSize(false);\n        this.emitBaseBubblingEvent('stateChanged');\n\n        return index;\n    }\n\n    /**\n     * Removes a child of this element\n     *\n     * @param contentItem -\n     * @param keepChild - If true the child will be removed, but not destroyed\n     *\n     */\n    override removeChild(contentItem: ContentItem, keepChild: boolean): void {\n        const index = this.contentItems.indexOf(contentItem);\n        const splitterIndex = Math.max(index - 1, 0);\n\n        if (index === -1) {\n            throw new Error('Can\\'t remove child. ContentItem is not child of this Row or Column');\n        }\n\n        /**\n         * Remove the splitter before the item or after if the item happens\n         * to be the first in the row/column\n         */\n        if (this._splitter[splitterIndex]) {\n            this._splitter[splitterIndex].destroy();\n            this._splitter.splice(splitterIndex, 1);\n        }\n\n        super.removeChild(contentItem, keepChild);\n\n        if (this.contentItems.length === 1 && this.isClosable === true) {\n            const childItem = this.contentItems[0];\n            this.contentItems.length = 0;\n            this._rowOrColumnParent.replaceChild(this, childItem, true);\n        } else {\n            this.updateSize(false);\n            this.emitBaseBubblingEvent('stateChanged');\n        }\n    }\n\n    /**\n     * Replaces a child of this Row or Column with another contentItem\n     */\n    override replaceChild(oldChild: ContentItem, newChild: ContentItem): void {\n        const size = oldChild[this._dimension];\n        super.replaceChild(oldChild, newChild);\n        newChild[this._dimension] = size;\n        this.updateSize(false);\n        this.emitBaseBubblingEvent('stateChanged');\n    }\n\n    /**\n     * Called whenever the dimensions of this item or one of its parents change\n     */\n    override updateSize(force: boolean): void {\n        this.layoutManager.beginVirtualSizedContainerAdding();\n        try {\n            this.updateNodeSize();\n            this.updateContentItemsSize(force);\n        } finally {\n            this.layoutManager.endVirtualSizedContainerAdding();\n        }\n    }\n\n    /**\n     * Invoked recursively by the layout manager. ContentItem.init appends\n     * the contentItem's DOM elements to the container, RowOrColumn init adds splitters\n     * in between them\n     * @internal\n     */\n    override init(): void {\n        if (this.isInitialised === true) return;\n\n        this.updateNodeSize();\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            this._childElementContainer.appendChild(this.contentItems[i].element);\n        }\n\n        super.init();\n\n        for (let i = 0; i < this.contentItems.length - 1; i++) {\n            this.contentItems[i].element.insertAdjacentElement('afterend', this.createSplitter(i).element);\n        }\n\n        this.initContentItems();\n    }\n\n    toConfig(): ResolvedRowOrColumnItemConfig {\n        const result: ResolvedRowOrColumnItemConfig = {\n            type: this.type as 'row' | 'column',\n            content: this.calculateConfigContent() as (ResolvedRowOrColumnItemConfig | ResolvedStackItemConfig)[],\n            width: this.width,\n            minWidth: this.minWidth,\n            height: this.height,\n            minHeight: this.minHeight,\n            id: this.id,\n            isClosable: this.isClosable,\n        }\n        return result;\n    }\n\n    /** @internal */\n    protected override setParent(parent: ContentItem): void {\n        this._rowOrColumnParent = parent;\n        super.setParent(parent);\n    }\n\n    /** @internal */\n    private updateNodeSize(): void {\n        if (this.contentItems.length > 0) {\n            this.calculateRelativeSizes();\n            this.setAbsoluteSizes();\n        }\n        this.emitBaseBubblingEvent('stateChanged');\n        this.emit('resize');\n    }\n\n    /**\n     * Turns the relative sizes calculated by calculateRelativeSizes into\n     * absolute pixel values and applies them to the children's DOM elements\n     *\n     * Assigns additional pixels to counteract Math.floor\n     * @internal\n     */\n    private setAbsoluteSizes() {\n        const sizeData = this.calculateAbsoluteSizes();\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            if (sizeData.additionalPixel - i > 0) {\n                sizeData.itemSizes[i]++;\n            }\n\n            if (this._isColumn) {\n                setElementWidth(this.contentItems[i].element, sizeData.totalWidth);\n                setElementHeight(this.contentItems[i].element, sizeData.itemSizes[i]);\n            } else {\n                setElementWidth(this.contentItems[i].element, sizeData.itemSizes[i]);\n                setElementHeight(this.contentItems[i].element, sizeData.totalHeight);\n            }\n        }\n    }\n\n    /**\n     * Calculates the absolute sizes of all of the children of this Item.\n     * @returns Set with absolute sizes and additional pixels.\n     * @internal\n     */\n    private calculateAbsoluteSizes() {\n        const totalSplitterSize = (this.contentItems.length - 1) * this._splitterSize;\n        let { width: totalWidth, height: totalHeight } = getElementWidthAndHeight(this.element);\n\n        if (this._isColumn) {\n            totalHeight -= totalSplitterSize;\n        } else {\n            totalWidth -= totalSplitterSize;\n        }\n\n        let totalAssigned = 0;\n        const itemSizes = [];\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            let itemSize: number;\n            if (this._isColumn) {\n                itemSize = Math.floor(totalHeight * (this.contentItems[i].height / 100));\n            } else {\n                itemSize = Math.floor(totalWidth * (this.contentItems[i].width / 100));\n            }\n\n            totalAssigned += itemSize;\n            itemSizes.push(itemSize);\n        }\n\n        const additionalPixel = Math.floor((this._isColumn ? totalHeight : totalWidth) - totalAssigned);\n\n        return {\n            itemSizes: itemSizes,\n            additionalPixel: additionalPixel,\n            totalWidth: totalWidth,\n            totalHeight: totalHeight\n        };\n    }\n\n    /**\n     * Calculates the relative sizes of all children of this Item. The logic\n     * is as follows:\n     *\n     * - Add up the total size of all items that have a configured size\n     *\n     * - If the total == 100 (check for floating point errors)\n     *        Excellent, job done\n     *\n     * - If the total is \\> 100,\n     *        set the size of items without set dimensions to 1/3 and add this to the total\n     *        set the size off all items so that the total is hundred relative to their original size\n     *\n     * - If the total is \\< 100\n     *        If there are items without set dimensions, distribute the remainder to 100 evenly between them\n     *        If there are no items without set dimensions, increase all items sizes relative to\n     *        their original size so that they add up to 100\n     *\n     * @internal\n     */\n    private calculateRelativeSizes() {\n\n        let total = 0;\n        const itemsWithoutSetDimension: ContentItem[] = [];\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            if (this.contentItems[i][this._dimension] !== undefined) {\n                total += this.contentItems[i][this._dimension];\n            } else {\n                itemsWithoutSetDimension.push(this.contentItems[i]);\n            }\n        }\n\n        /**\n         * Everything adds up to hundred, all good :-)\n         */\n        if (Math.round(total) === 100) {\n            this.respectMinItemWidth();\n            return;\n        }\n\n        /**\n         * Allocate the remaining size to the items without a set dimension\n         */\n        if (Math.round(total) < 100 && itemsWithoutSetDimension.length > 0) {\n            for (let i = 0; i < itemsWithoutSetDimension.length; i++) {\n                itemsWithoutSetDimension[i][this._dimension] = (100 - total) / itemsWithoutSetDimension.length;\n            }\n            this.respectMinItemWidth();\n            return;\n        }\n\n        /**\n         * If the total is > 100, but there are also items without a set dimension left, assing 50\n         * as their dimension and add it to the total\n         *\n         * This will be reset in the next step\n         */\n        if (Math.round(total) > 100) {\n            for (let i = 0; i < itemsWithoutSetDimension.length; i++) {\n                itemsWithoutSetDimension[i][this._dimension] = 50;\n                total += 50;\n            }\n        }\n\n        /**\n         * Set every items size relative to 100 relative to its size to total\n         */\n        for (let i = 0; i < this.contentItems.length; i++) {\n            this.contentItems[i][this._dimension] = (this.contentItems[i][this._dimension] / total) * 100;\n        }\n\n        this.respectMinItemWidth();\n    }\n\n    /**\n     * Adjusts the column widths to respect the dimensions minItemWidth if set.\n     * @internal\n     */\n    private respectMinItemWidth() {\n        interface Entry {\n            width: number;\n        }\n\n        const minItemWidth = this.layoutManager.layoutConfig.dimensions.minItemWidth;\n        let totalOverMin = 0;\n        let totalUnderMin = 0;\n        const entriesOverMin: Entry[] = [];\n        const allEntries: Entry[] = [];\n\n        if (this._isColumn || !minItemWidth || this.contentItems.length <= 1) {\n            return;\n        }\n\n        const sizeData = this.calculateAbsoluteSizes();\n\n        /**\n         * Figure out how much we are under the min item size total and how much room we have to use.\n         */\n        for (let i = 0; i < sizeData.itemSizes.length; i++) {\n            const itemSize = sizeData.itemSizes[i];\n\n            let entry: Entry;\n            if (itemSize < minItemWidth) {\n                totalUnderMin += minItemWidth - itemSize;\n                entry = {\n                    width: minItemWidth\n                };\n\n            } else {\n                totalOverMin += itemSize - minItemWidth;\n                entry = {\n                    width: itemSize\n                };\n                entriesOverMin.push(entry);\n            }\n\n            allEntries.push(entry);\n        }\n\n        /**\n         * If there is nothing under min, or there is not enough over to make up the difference, do nothing.\n         */\n        if (totalUnderMin === 0 || totalUnderMin > totalOverMin) {\n            return;\n        }\n\n        /**\n         * Evenly reduce all columns that are over the min item width to make up the difference.\n         */\n        const reducePercent = totalUnderMin / totalOverMin;\n        let remainingWidth = totalUnderMin;\n        for (let i = 0; i < entriesOverMin.length; i++) {\n            const entry = entriesOverMin[i];\n            const reducedWidth = Math.round((entry.width - minItemWidth) * reducePercent);\n            remainingWidth -= reducedWidth;\n            entry.width -= reducedWidth;\n        }\n\n        /**\n         * Take anything remaining from the last item.\n         */\n        if (remainingWidth !== 0) {\n            allEntries[allEntries.length - 1].width -= remainingWidth;\n        }\n\n        /**\n         * Set every items size relative to 100 relative to its size to total\n         */\n        for (let i = 0; i < this.contentItems.length; i++) {\n            this.contentItems[i].width = (allEntries[i].width / sizeData.totalWidth) * 100;\n        }\n    }\n\n    /**\n     * Instantiates a new Splitter, binds events to it and adds\n     * it to the array of splitters at the position specified as the index argument\n     *\n     * What it doesn't do though is append the splitter to the DOM\n     *\n     * @param index - The position of the splitter\n     *\n     * @returns\n     * @internal\n     */\n    private createSplitter(index: number): Splitter {\n        const splitter = new Splitter(this._isColumn, this._splitterSize, this._splitterGrabSize);\n        splitter.on('drag', (offsetX, offsetY) => this.onSplitterDrag(splitter, offsetX, offsetY));\n        splitter.on('dragStop', () => this.onSplitterDragStop(splitter));\n        splitter.on('dragStart', () => this.onSplitterDragStart(splitter));\n        this._splitter.splice(index, 0, splitter);\n        return splitter;\n    }\n\n    /**\n     * Locates the instance of Splitter in the array of\n     * registered splitters and returns a map containing the contentItem\n     * before and after the splitters, both of which are affected if the\n     * splitter is moved\n     *\n     * @returns A map of contentItems that the splitter affects\n     * @internal\n     */\n    private getItemsForSplitter(splitter: Splitter) {\n        const index = this._splitter.indexOf(splitter);\n\n        return {\n            before: this.contentItems[index],\n            after: this.contentItems[index + 1]\n        };\n    }\n\n    /**\n     * Gets the minimum dimensions for the given item configuration array\n     * @internal\n     */\n    private getMinimumDimensions(arr: readonly ContentItem[]) {\n        let minWidth = 0;\n        let minHeight = 0;\n\n        for (let i = 0; i < arr.length; ++i) {\n            minWidth = Math.max(arr[i].minWidth ?? 0, minWidth);\n            minHeight = Math.max(arr[i].minHeight ?? 0, minHeight);\n        }\n\n        return {\n            horizontal: minWidth,\n            vertical: minHeight\n        };\n    }\n\n    /**\n     * Invoked when a splitter's dragListener fires dragStart. Calculates the splitters\n     * movement area once (so that it doesn't need calculating on every mousemove event)\n     * @internal\n     */\n    private onSplitterDragStart(splitter: Splitter) {\n        const items = this.getItemsForSplitter(splitter);\n        const minSize = this.layoutManager.layoutConfig.dimensions[this._isColumn ? 'minItemHeight' : 'minItemWidth'];\n\n        const beforeMinDim = this.getMinimumDimensions(items.before.contentItems);\n        const beforeMinSize = this._isColumn ? beforeMinDim.vertical : beforeMinDim.horizontal;\n\n        const afterMinDim = this.getMinimumDimensions(items.after.contentItems);\n        const afterMinSize = this._isColumn ? afterMinDim.vertical : afterMinDim.horizontal;\n\n        this._splitterPosition = 0;\n        this._splitterMinPosition = -1 * (pixelsToNumber(items.before.element.style[this._dimension]) - (beforeMinSize || minSize));\n        this._splitterMaxPosition = pixelsToNumber(items.after.element.style[this._dimension]) - (afterMinSize || minSize);\n    }\n\n    /**\n     * Invoked when a splitter's DragListener fires drag. Updates the splitter's DOM position,\n     * but not the sizes of the elements the splitter controls in order to minimize resize events\n     *\n     * @param splitter -\n     * @param offsetX - Relative pixel values to the splitter's original position. Can be negative\n     * @param offsetY - Relative pixel values to the splitter's original position. Can be negative\n     * @internal\n     */\n    private onSplitterDrag(splitter: Splitter, offsetX: number, offsetY: number) {\n        let offset = this._isColumn ? offsetY : offsetX;\n\n        if (this._splitterMinPosition === null || this._splitterMaxPosition === null) {\n            throw new UnexpectedNullError('ROCOSD59226');\n        }\n        offset = Math.max(offset, this._splitterMinPosition);\n        offset = Math.min(offset, this._splitterMaxPosition);\n\n        this._splitterPosition = offset;\n        const offsetPixels = numberToPixels(offset);\n        if (this._isColumn) {\n            splitter.element.style.top = offsetPixels;\n        } else {\n            splitter.element.style.left = offsetPixels;\n        }\n    }\n\n    /**\n     * Invoked when a splitter's DragListener fires dragStop. Resets the splitters DOM position,\n     * and applies the new sizes to the elements before and after the splitter and their children\n     * on the next animation frame\n     * @internal\n     */\n    private onSplitterDragStop(splitter: Splitter) {\n        if (this._splitterPosition === null) {\n            throw new UnexpectedNullError('ROCOSDS66932');\n        } else {\n            const items = this.getItemsForSplitter(splitter);\n            const sizeBefore = pixelsToNumber(items.before.element.style[this._dimension]);\n            const sizeAfter = pixelsToNumber(items.after.element.style[this._dimension]);\n            const splitterPositionInRange = (this._splitterPosition + sizeBefore) / (sizeBefore + sizeAfter);\n            const totalRelativeSize = items.before[this._dimension] + items.after[this._dimension];\n\n            items.before[this._dimension] = splitterPositionInRange * totalRelativeSize;\n            items.after[this._dimension] = (1 - splitterPositionInRange) * totalRelativeSize;\n\n            splitter.element.style.top = numberToPixels(0);\n            splitter.element.style.left = numberToPixels(0);\n\n            globalThis.requestAnimationFrame(() => this.updateSize(false));\n        }\n    }\n}\n\n/** @public */\nexport namespace RowOrColumn {\n    /** @internal */\n    export function getElementDimensionSize(element: HTMLElement, dimension: WidthOrHeightPropertyName): number {\n        if (dimension === 'width') {\n            return getElementWidth(element);\n        } else {\n            return getElementHeight(element);\n        }\n    }\n\n    /** @internal */\n    export function setElementDimensionSize(element: HTMLElement, dimension: WidthOrHeightPropertyName, value: number): void {\n        if (dimension === 'width') {\n            return setElementWidth(element, value);\n        } else {\n            return setElementHeight(element, value);\n        }\n    }\n\n    /** @internal */\n    export function createElement(document: Document, isColumn: boolean): HTMLDivElement {\n        const element = document.createElement('div');\n        element.classList.add(DomConstants.ClassName.Item);\n        if (isColumn) {\n            element.classList.add(DomConstants.ClassName.Column);\n        } else {\n            element.classList.add(DomConstants.ClassName.Row);\n        }\n        return element;\n    }\n}\n","import { ComponentItemConfig, ItemConfig } from '../config/config';\nimport { ResolvedComponentItemConfig, ResolvedHeaderedItemConfig, ResolvedItemConfig, ResolvedStackItemConfig } from '../config/resolved-config';\nimport { Header } from '../controls/header';\nimport { AssertError, UnexpectedNullError, UnexpectedUndefinedError } from '../errors/internal-error';\nimport { LayoutManager } from '../layout-manager';\nimport { DomConstants } from '../utils/dom-constants';\nimport { DragListener } from '../utils/drag-listener';\nimport { EventEmitter } from '../utils/event-emitter';\nimport { getJQueryOffset } from '../utils/jquery-legacy';\nimport { AreaLinkedRect, ItemType, JsonValue, Side, WidthAndHeight, WidthOrHeightPropertyName } from '../utils/types';\nimport {\n    getElementHeight,\n    getElementWidth,\n    getElementWidthAndHeight,\n    numberToPixels,\n    setElementDisplayVisibility\n} from '../utils/utils';\nimport { ComponentItem } from './component-item';\nimport { ComponentParentableItem } from './component-parentable-item';\nimport { ContentItem } from './content-item';\n\n/** @public */\nexport class Stack extends ComponentParentableItem {\n    /** @internal */\n    private readonly _headerConfig: ResolvedHeaderedItemConfig.Header | undefined;\n    /** @internal */\n    private readonly _header: Header;\n    /** @internal */\n    private readonly _childElementContainer: HTMLElement;\n    /** @internal */\n    private readonly _maximisedEnabled: boolean;\n    /** @internal */\n    private _activeComponentItem: ComponentItem | undefined;\n    /** @internal */\n    private _dropSegment: Stack.Segment;\n    /** @internal */\n    private _dropIndex: number;\n    /** @internal */\n    private _contentAreaDimensions: Stack.ContentAreaDimensions;\n    /** @internal */\n    private _headerSideChanged = false;\n    /** @internal */\n    private readonly _initialWantMaximise: boolean;\n    /** @internal */\n    private _initialActiveItemIndex: number;\n\n    /** @internal */\n    private _resizeListener = () => this.handleResize();\n    /** @internal */\n    private _maximisedListener = () => this.handleMaximised();\n    /** @internal */\n    private _minimisedListener = () => this.handleMinimised();\n\n    get childElementContainer(): HTMLElement { return this._childElementContainer; }\n    get header(): Header { return this._header; }\n    get headerShow(): boolean { return this._header.show; }\n    get headerSide(): Side { return this._header.side; }\n    get headerLeftRightSided(): boolean { return this._header.leftRightSided; }\n    /** @internal */\n    get contentAreaDimensions(): Stack.ContentAreaDimensions | undefined { return this._contentAreaDimensions; }\n    /** @internal */\n    get initialWantMaximise(): boolean { return this._initialWantMaximise; }\n    get isMaximised(): boolean { return this === this.layoutManager.maximisedStack; }\n    get stackParent(): ContentItem {\n        if (!this.parent) {\n            throw new Error('Stack should always have a parent');\n        }\n        return this.parent;\n    }\n\n    /** @internal */\n    constructor(layoutManager: LayoutManager, config: ResolvedStackItemConfig, parent: ContentItem) {\n        super(layoutManager, config, parent, Stack.createElement(document));\n\n        this._headerConfig = config.header;\n        const layoutHeaderConfig = layoutManager.layoutConfig.header;\n        const configContent = config.content;\n        // If stack has only one component, then we can also check this for header settings\n        let componentHeaderConfig: ResolvedHeaderedItemConfig.Header | undefined;\n        if (configContent.length !== 1) {\n            componentHeaderConfig = undefined;\n        } else {\n            const firstChildItemConfig = configContent[0];\n            componentHeaderConfig = (firstChildItemConfig as ResolvedHeaderedItemConfig).header; // will be undefined if not component (and wont be stack)\n        }\n\n        this._initialWantMaximise = config.maximised;\n        this._initialActiveItemIndex = config.activeItemIndex ?? 0; // make sure defined\n\n        // check for defined value for each item in order of Stack (this Item), Component (first child), Manager.\n        const show = this._headerConfig?.show ?? componentHeaderConfig?.show ?? layoutHeaderConfig.show;\n        const popout = this._headerConfig?.popout ?? componentHeaderConfig?.popout ?? layoutHeaderConfig.popout;\n        const maximise = this._headerConfig?.maximise ?? componentHeaderConfig?.maximise ?? layoutHeaderConfig.maximise;\n        const close = this._headerConfig?.close ?? componentHeaderConfig?.close ?? layoutHeaderConfig.close;\n        const minimise = this._headerConfig?.minimise ?? componentHeaderConfig?.minimise ?? layoutHeaderConfig.minimise;\n        const tabDropdown = this._headerConfig?.tabDropdown ?? componentHeaderConfig?.tabDropdown ?? layoutHeaderConfig.tabDropdown;\n        this._maximisedEnabled = maximise !== false;\n        const headerSettings: Header.Settings = {\n            show: show !== false,\n            side: show === false ? Side.top : show,\n            popoutEnabled: popout !== false,\n            popoutLabel: popout === false ? '' : popout,\n            maximiseEnabled: this._maximisedEnabled,\n            maximiseLabel: maximise === false ? '' : maximise,\n            closeEnabled: close !== false,\n            closeLabel: close === false ? '' : close,\n            minimiseEnabled: true,\n            minimiseLabel: minimise,\n            tabDropdownEnabled: tabDropdown !== false,\n            tabDropdownLabel: tabDropdown === false ? '' : tabDropdown,\n        };\n\n        this._header = new Header(layoutManager,\n            this, headerSettings,\n            config.isClosable && close !== false,\n            () => this.getActiveComponentItem(),\n            () => this.remove(),\n            () => this.handlePopoutEvent(),\n            () => this.toggleMaximise(),\n            (ev) => this.handleHeaderClickEvent(ev),\n            (ev) => this.handleHeaderTouchStartEvent(ev),\n            (item) => this.handleHeaderComponentRemoveEvent(item),\n            (item) => this.handleHeaderComponentFocusEvent(item),\n            (x, y, dragListener, item) => this.handleHeaderComponentStartDragEvent(x, y, dragListener, item),\n        );\n\n        // this._dropZones = {};\n\n        this.isStack = true;\n\n        this._childElementContainer = document.createElement('section');\n        this._childElementContainer.classList.add(DomConstants.ClassName.Items);\n\n        this.on('resize', this._resizeListener);\n        if (this._maximisedEnabled) {\n            this.on('maximised', this._maximisedListener);\n            this.on('minimised', this._minimisedListener);\n        }\n\n        this.element.appendChild(this._header.element);\n        this.element.appendChild(this._childElementContainer);\n\n        this.setupHeaderPosition();\n        this._header.updateClosability();\n    }\n\n    /** @internal */\n    override updateSize(force: boolean): void {\n        this.layoutManager.beginVirtualSizedContainerAdding();\n        try {\n            this.updateNodeSize();\n            this.updateContentItemsSize(force);\n        } finally {\n            this.layoutManager.endVirtualSizedContainerAdding();\n        }\n    }\n\n    /** @internal */\n    override init(): void {\n        if (this.isInitialised === true) return;\n\n        this.updateNodeSize();\n\n        for (let i = 0; i < this.contentItems.length; i++) {\n            this._childElementContainer.appendChild(this.contentItems[i].element);\n        }\n\n        super.init();\n\n        const contentItems = this.contentItems;\n        const contentItemCount = contentItems.length;\n        if (contentItemCount > 0) { // contentItemCount will be 0 on drag drop\n            if (this._initialActiveItemIndex < 0 || this._initialActiveItemIndex >= contentItemCount) {\n                throw new Error(`ActiveItemIndex out of range: ${this._initialActiveItemIndex} id: ${this.id}`);\n            } else {\n                for (let i = 0; i < contentItemCount; i++) {\n                    const contentItem = contentItems[i];\n                    if (!(contentItem instanceof ComponentItem)) {\n                        throw new Error(`Stack Content Item is not of type ComponentItem: ${i} id: ${this.id}`);\n                    } else {\n                        this._header.createTab(contentItem, i);\n                        contentItem.hide();\n                        contentItem.container.setBaseLogicalZIndex();\n                    }\n                }\n\n                this.setActiveComponentItem(contentItems[this._initialActiveItemIndex] as ComponentItem, false);\n\n                this._header.updateTabSizes();\n            }\n        }\n\n        this._header.updateClosability();\n        this.initContentItems();\n    }\n\n    /** @deprecated Use {@link (Stack:class).setActiveComponentItem} */\n    setActiveContentItem(item: ContentItem): void {\n        if (!ContentItem.isComponentItem(item)) {\n            throw new Error('Stack.setActiveContentItem: item is not a ComponentItem');\n        } else {\n            this.setActiveComponentItem(item, false);\n        }\n    }\n\n    setActiveComponentItem(componentItem: ComponentItem, focus: boolean, suppressFocusEvent = false): void {\n        if (this._activeComponentItem !== componentItem) {\n            if (this.contentItems.indexOf(componentItem) === -1) {\n                throw new Error('componentItem is not a child of this stack');\n            } else {\n                this.layoutManager.beginSizeInvalidation();\n                try {\n                    if (this._activeComponentItem !== undefined) {\n                        this._activeComponentItem.hide();\n                    }\n                    this._activeComponentItem = componentItem;\n                    this._header.processActiveComponentChanged(componentItem);\n                    componentItem.show();\n                } finally {\n                    this.layoutManager.endSizeInvalidation();\n                }\n\n                this.emit('activeContentItemChanged', componentItem);\n                this.layoutManager.emit('activeContentItemChanged', componentItem);\n                this.emitStateChangedEvent();\n            }\n        }\n\n        if (this.focused || focus) {\n            this.layoutManager.setFocusedComponentItem(componentItem, suppressFocusEvent);\n        }\n    }\n\n    /** @deprecated Use {@link (Stack:class).getActiveComponentItem} */\n    getActiveContentItem(): ContentItem | null {\n        return this.getActiveComponentItem() ?? null;\n    }\n\n    getActiveComponentItem(): ComponentItem | undefined {\n        return this._activeComponentItem;\n    }\n\n    /** @internal */\n    focusActiveContentItem(): void {\n        this._activeComponentItem?.focus();\n    }\n\n    /** @internal */\n    override setFocusedValue(value: boolean): void {\n        this._header.applyFocusedValue(value);\n        super.setFocusedValue(value);\n    }\n\n    /** @internal */\n    setRowColumnClosable(value: boolean): void {\n        this._header.setRowColumnClosable(value);\n    }\n\n    newComponent(componentType: JsonValue, componentState?: JsonValue, title?: string, index?: number): ComponentItem {\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        };\n        return this.newItem(itemConfig, index) as ComponentItem;\n    }\n\n    addComponent(componentType: JsonValue, componentState?: JsonValue, title?: string, index?: number): number {\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        };\n        return this.addItem(itemConfig, index);\n    }\n\n    newItem(itemConfig: ComponentItemConfig,  index?: number): ContentItem {\n        index = this.addItem(itemConfig, index);\n        return this.contentItems[index];\n    }\n\n    addItem(itemConfig: ComponentItemConfig, index?: number): number {\n        this.layoutManager.checkMinimiseMaximisedStack();\n\n        const resolvedItemConfig = ItemConfig.resolve(itemConfig);\n        const contentItem = this.layoutManager.createAndInitContentItem(resolvedItemConfig, this);\n        return this.addChild(contentItem, index);\n    }\n\n    override addChild(contentItem: ContentItem, index?: number, focus = false): number {\n        if(index !== undefined && index > this.contentItems.length){\n            index -= 1;\n            throw new AssertError('SAC99728'); // undisplayChild() removed so this condition should no longer occur\n        }\n\n        if (!(contentItem instanceof ComponentItem)) {\n            throw new AssertError('SACC88532'); // Stacks can only have Component children\n        } else {\n            index = super.addChild(contentItem, index);\n            this._childElementContainer.appendChild(contentItem.element);\n            this._header.createTab(contentItem, index);\n            this.setActiveComponentItem(contentItem, focus);\n            this._header.updateTabSizes();\n            this.updateSize(false);\n            contentItem.container.setBaseLogicalZIndex();\n            this._header.updateClosability();\n            this.emitStateChangedEvent();\n            return index;\n        }\n    }\n\n    override removeChild(contentItem: ContentItem, keepChild: boolean): void {\n        const componentItem = contentItem as ComponentItem;\n        const index = this.contentItems.indexOf(componentItem);\n        const stackWillBeDeleted = this.contentItems.length === 1;\n\n        if (this._activeComponentItem === componentItem) {\n            if (componentItem.focused) {\n                componentItem.blur();\n            }\n            if (!stackWillBeDeleted) {\n                // At this point we're already sure we have at least one content item left *after*\n                // removing contentItem, so we can safely assume index 1 is a valid one if\n                // the index of contentItem is 0, otherwise we just use the previous content item.\n                const newActiveComponentIdx = index === 0 ? 1 : index - 1;\n                this.setActiveComponentItem(this.contentItems[newActiveComponentIdx] as ComponentItem, false);\n            }\n        }\n\n        this._header.removeTab(componentItem);\n\n        super.removeChild(componentItem, keepChild);\n\n        if (!stackWillBeDeleted) {\n            this._header.updateClosability();\n        }\n\n        this.emitStateChangedEvent();\n    }\n\n    /**\n     * Maximises the Item or minimises it if it is already maximised\n     */\n    toggleMaximise(): void {\n        if (this.isMaximised) {\n            this.minimise();\n        } else {\n            this.maximise();\n        }\n    }\n\n    maximise(): void {\n        if (!this.isMaximised) {\n            this.layoutManager.setMaximisedStack(this);\n            const contentItems = this.contentItems;\n            const contentItemCount = contentItems.length;\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                if (contentItem instanceof ComponentItem) {\n                    contentItem.enterStackMaximised();\n                } else {\n                    throw new AssertError('SMAXI87773');\n                }\n            }\n            this.emitStateChangedEvent();\n        }\n    }\n\n    minimise(): void {\n        if (this.isMaximised) {\n            this.layoutManager.setMaximisedStack(undefined);\n            const contentItems = this.contentItems;\n            const contentItemCount = contentItems.length;\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                if (contentItem instanceof ComponentItem) {\n                    contentItem.exitStackMaximised();\n                } else {\n                    throw new AssertError('SMINI87773');\n                }\n            }\n            this.emitStateChangedEvent();\n        }\n    }\n\n    /** @internal */\n    override destroy(): void {\n        if (this._activeComponentItem?.focused) {\n            this._activeComponentItem.blur();\n        }\n        super.destroy();\n        this.off('resize', this._resizeListener);\n        if (this._maximisedEnabled) {\n            this.off('maximised', this._maximisedListener);\n            this.off('minimised', this._minimisedListener);\n        }\n        this._header.destroy();\n    }\n\n    toConfig(): ResolvedStackItemConfig {\n        let activeItemIndex: number | undefined;\n        if (this._activeComponentItem) {\n            activeItemIndex = this.contentItems.indexOf(this._activeComponentItem);\n            if (activeItemIndex < 0) {\n                throw new Error('active component item not found in stack');\n            }\n        }\n        if (this.contentItems.length > 0 && activeItemIndex === undefined) {\n            throw new Error('expected non-empty stack to have an active component item');\n        } else {\n            const result: ResolvedStackItemConfig = {\n                type: 'stack',\n                content: this.calculateConfigContent() as ResolvedComponentItemConfig[],\n                width: this.width,\n                minWidth: this.minWidth,\n                height: this.height,\n                minHeight: this.minHeight,\n                id: this.id,\n                isClosable: this.isClosable,\n                maximised: this.isMaximised,\n                header: this.createHeaderConfig(),\n                activeItemIndex,\n            }\n            return result;\n        }\n    }\n\n    /**\n     * Ok, this one is going to be the tricky one: The user has dropped a {@link (ContentItem:class)} onto this stack.\n     *\n     * It was dropped on either the stacks header or the top, right, bottom or left bit of the content area\n     * (which one of those is stored in this._dropSegment). Now, if the user has dropped on the header the case\n     * is relatively clear: We add the item to the existing stack... job done (might be good to have\n     * tab reordering at some point, but lets not sweat it right now)\n     *\n     * If the item was dropped on the content part things are a bit more complicated. If it was dropped on either the\n     * top or bottom region we need to create a new column and place the items accordingly.\n     * Unless, of course if the stack is already within a column... in which case we want\n     * to add the newly created item to the existing column...\n     * either prepend or append it, depending on wether its top or bottom.\n     *\n     * Same thing for rows and left / right drop segments... so in total there are 9 things that can potentially happen\n     * (left, top, right, bottom) * is child of the right parent (row, column) + header drop\n     *\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    override onDrop(contentItem: ContentItem, area: ContentItem.Area): void {\n        /*\n         * The item was dropped on the header area. Just add it as a child of this stack and\n         * get the hell out of this logic\n         */\n        if (this._dropSegment === Stack.Segment.Header) {\n            this.resetHeaderDropZone();\n            if (this._dropIndex === undefined) {\n                throw new UnexpectedUndefinedError('SODDI68990');\n            } else {\n                this.addChild(contentItem, this._dropIndex);\n                return;\n            }\n        }\n\n        /*\n         * The stack is empty. Let's just add the element.\n         */\n        if (this._dropSegment === Stack.Segment.Body) {\n            this.addChild(contentItem, 0, true);\n            return;\n        }\n\n        /*\n         * The item was dropped on the top-, left-, bottom- or right- part of the content. Let's\n         * aggregate some conditions to make the if statements later on more readable\n         */\n        const isVertical = this._dropSegment === Stack.Segment.Top || this._dropSegment === Stack.Segment.Bottom;\n        const isHorizontal = this._dropSegment === Stack.Segment.Left || this._dropSegment === Stack.Segment.Right;\n        const insertBefore = this._dropSegment === Stack.Segment.Top || this._dropSegment === Stack.Segment.Left;\n        const hasCorrectParent = (isVertical && this.stackParent.isColumn) || (isHorizontal && this.stackParent.isRow);\n        const dimension = isVertical ? 'height' : 'width';\n\n        /*\n         * The content item can be either a component or a stack. If it is a component, wrap it into a stack\n         */\n        if (contentItem.isComponent) {\n            const itemConfig = ResolvedStackItemConfig.createDefault();\n            itemConfig.header = this.createHeaderConfig();\n            const stack = this.layoutManager.createAndInitContentItem(itemConfig, this);\n            stack.addChild(contentItem);\n            contentItem = stack;\n        }\n\n\n        /*\n         * If the contentItem that's being dropped is not dropped on a Stack (cases which just passed above and\n         * which would wrap the contentItem in a Stack) we need to check whether contentItem is a RowOrColumn.\n         * If it is, we need to re-wrap it in a Stack like it was when it was dragged by its Tab (it was dragged!).\n         */\n        if(contentItem.type === ItemType.row || contentItem.type === ItemType.column){\n            const itemConfig = ResolvedStackItemConfig.createDefault();\n            itemConfig.header = this.createHeaderConfig();\n            const stack = this.layoutManager.createContentItem(itemConfig, this);\n            stack.addChild(contentItem)\n            contentItem = stack\n        }\n\n        /*\n         * If the item is dropped on top or bottom of a column or left and right of a row, it's already\n         * layd out in the correct way. Just add it as a child\n         */\n        if (hasCorrectParent) {\n            const index = this.stackParent.contentItems.indexOf(this);\n            this.stackParent.addChild(contentItem, insertBefore ? index : index + 1, true);\n            this[dimension] *= 0.5;\n            contentItem[dimension] = this[dimension];\n            this.stackParent.updateSize(false);\n            /*\n             * This handles items that are dropped on top or bottom of a row or left / right of a column. We need\n             * to create the appropriate contentItem for them to live in\n             */\n        } else {\n            const type = isVertical ? ItemType.column : ItemType.row;\n            const itemConfig = ResolvedItemConfig.createDefault(type) as ResolvedItemConfig;\n            const rowOrColumn = this.layoutManager.createContentItem(itemConfig, this);\n            this.stackParent.replaceChild(this, rowOrColumn);\n\n            rowOrColumn.addChild(contentItem, insertBefore ? 0 : undefined, true);\n            rowOrColumn.addChild(this, insertBefore ? undefined : 0, true);\n\n            this[dimension] = 50;\n            contentItem[dimension] = 50;\n            rowOrColumn.updateSize(false);\n        }\n    }\n\n    /**\n     * If the user hovers above the header part of the stack, indicate drop positions for tabs.\n     * otherwise indicate which segment of the body the dragged item would be dropped on\n     *\n     * @param x - Absolute Screen X\n     * @param y - Absolute Screen Y\n     * @internal\n     */\n    override highlightDropZone(x: number, y: number): void {\n        for (const key in this._contentAreaDimensions) {\n            const segment = key as Stack.Segment;\n            const area = this._contentAreaDimensions[segment].hoverArea;\n\n            if (area.x1 < x && area.x2 > x && area.y1 < y && area.y2 > y) {\n\n                if (segment === Stack.Segment.Header) {\n                    this._dropSegment = Stack.Segment.Header;\n                    this.highlightHeaderDropZone(this._header.leftRightSided ? y : x);\n                } else {\n                    this.resetHeaderDropZone();\n                    this.highlightBodyDropZone(segment);\n                }\n\n                return;\n            }\n        }\n    }\n\n    /** @internal */\n    getArea(): ContentItem.Area | null {\n        if (this.element.style.display === 'none') {\n            return null;\n        }\n\n        const headerArea = super.getElementArea(this._header.element);\n        const contentArea = super.getElementArea(this._childElementContainer);\n        if (headerArea === null || contentArea === null) {\n            throw new UnexpectedNullError('SGAHC13086');\n        }\n        const contentWidth = contentArea.x2 - contentArea.x1;\n        const contentHeight = contentArea.y2 - contentArea.y1;\n\n        this._contentAreaDimensions = {\n            header: {\n                hoverArea: {\n                    x1: headerArea.x1,\n                    y1: headerArea.y1,\n                    x2: headerArea.x2,\n                    y2: headerArea.y2\n                },\n                highlightArea: {\n                    x1: headerArea.x1,\n                    y1: headerArea.y1,\n                    x2: headerArea.x2,\n                    y2: headerArea.y2\n                }\n            }\n        };\n\n        /**\n         * Highlight the entire body if the stack is empty\n         */\n        if (this.contentItems.length === 0) {\n\n            this._contentAreaDimensions.body = {\n                hoverArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1,\n                    x2: contentArea.x2,\n                    y2: contentArea.y2\n                },\n                highlightArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1,\n                    x2: contentArea.x2,\n                    y2: contentArea.y2\n                }\n            };\n\n            return super.getElementArea(this.element);\n        } else {\n            this._contentAreaDimensions.left = {\n                hoverArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1,\n                    x2: contentArea.x1 + contentWidth * 0.25,\n                    y2: contentArea.y2\n                },\n                highlightArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1,\n                    x2: contentArea.x1 + contentWidth * 0.5,\n                    y2: contentArea.y2\n                }\n            };\n\n            this._contentAreaDimensions.top = {\n                hoverArea: {\n                    x1: contentArea.x1 + contentWidth * 0.25,\n                    y1: contentArea.y1,\n                    x2: contentArea.x1 + contentWidth * 0.75,\n                    y2: contentArea.y1 + contentHeight * 0.5\n                },\n                highlightArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1,\n                    x2: contentArea.x2,\n                    y2: contentArea.y1 + contentHeight * 0.5\n                }\n            };\n\n            this._contentAreaDimensions.right = {\n                hoverArea: {\n                    x1: contentArea.x1 + contentWidth * 0.75,\n                    y1: contentArea.y1,\n                    x2: contentArea.x2,\n                    y2: contentArea.y2\n                },\n                highlightArea: {\n                    x1: contentArea.x1 + contentWidth * 0.5,\n                    y1: contentArea.y1,\n                    x2: contentArea.x2,\n                    y2: contentArea.y2\n                }\n            };\n\n            this._contentAreaDimensions.bottom = {\n                hoverArea: {\n                    x1: contentArea.x1 + contentWidth * 0.25,\n                    y1: contentArea.y1 + contentHeight * 0.5,\n                    x2: contentArea.x1 + contentWidth * 0.75,\n                    y2: contentArea.y2\n                },\n                highlightArea: {\n                    x1: contentArea.x1,\n                    y1: contentArea.y1 + contentHeight * 0.5,\n                    x2: contentArea.x2,\n                    y2: contentArea.y2\n                }\n            };\n\n            return super.getElementArea(this.element);\n        }\n    }\n\n    /**\n     * Programmatically operate with header position.\n     *\n     * @param position -\n     *\n     * @returns previous header position\n     * @internal\n     */\n    positionHeader(position: Side): void {\n        if (this._header.side !== position) {\n            this._header.setSide(position);\n            this._headerSideChanged = true;\n            this.setupHeaderPosition();\n        }\n    }\n\n    /** @internal */\n    private updateNodeSize(): void {\n        if (this.element.style.display !== 'none') {\n            const content: WidthAndHeight = getElementWidthAndHeight(this.element);\n\n            if (this._header.show) {\n                const dimension = this._header.leftRightSided ? WidthOrHeightPropertyName.width : WidthOrHeightPropertyName.height;\n                content[dimension] -= this.layoutManager.layoutConfig.dimensions.headerHeight;\n            }\n            this._childElementContainer.style.width = numberToPixels(content.width);\n            this._childElementContainer.style.height = numberToPixels(content.height);\n            for (let i = 0; i < this.contentItems.length; i++) {\n                this.contentItems[i].element.style.width = numberToPixels(content.width);\n                this.contentItems[i].element.style.height = numberToPixels(content.height);\n            }\n            this.emit('resize');\n            this.emitStateChangedEvent();\n        }\n    }\n\n    /** @internal */\n    private highlightHeaderDropZone(x: number): void {\n        // Only walk over the visible tabs\n        const tabsLength = this._header.lastVisibleTabIndex + 1;\n\n        const dropTargetIndicator = this.layoutManager.dropTargetIndicator;\n        if (dropTargetIndicator === null) {\n            throw new UnexpectedNullError('SHHDZDTI97110');\n        }\n\n        let area: AreaLinkedRect;\n\n        // Empty stack\n        if (tabsLength === 0) {\n            const headerOffset = getJQueryOffset(this._header.element);\n\n            const elementHeight = getElementHeight(this._header.element);\n            area = {\n                x1: headerOffset.left,\n                x2: headerOffset.left + 100,\n                y1: headerOffset.top + elementHeight - 20,\n                y2: headerOffset.top + elementHeight,\n            };\n\n            this._dropIndex = 0;\n        } else {\n            let tabIndex = 0;\n            // This indicates whether our cursor is exactly over a tab\n            let isAboveTab = false;\n            let tabTop: number;\n            let tabLeft: number;\n            let tabWidth: number;\n            let tabElement: HTMLElement;\n            do {\n                tabElement = this._header.tabs[tabIndex].element;\n                const offset = getJQueryOffset(tabElement);\n                if (this._header.leftRightSided) {\n                    tabLeft = offset.top;\n                    tabTop = offset.left;\n                    tabWidth = getElementHeight(tabElement);\n                } else {\n                    tabLeft = offset.left;\n                    tabTop = offset.top;\n                    tabWidth = getElementWidth(tabElement);\n                }\n\n                if (x >= tabLeft && x < tabLeft + tabWidth) {\n                    isAboveTab = true;\n                } else {\n                    tabIndex++;\n                }\n            } while (tabIndex < tabsLength && !isAboveTab);\n\n            // If we're not above any tabs, or to the right of any tab, we are out of the area, so give up\n            if (isAboveTab === false && x < tabLeft) {\n                return;\n            }\n\n            const halfX = tabLeft + tabWidth / 2;\n\n            if (x < halfX) {\n                this._dropIndex = tabIndex;\n                tabElement.insertAdjacentElement('beforebegin', this.layoutManager.tabDropPlaceholder);\n            } else {\n                this._dropIndex = Math.min(tabIndex + 1, tabsLength);\n                tabElement.insertAdjacentElement('afterend', this.layoutManager.tabDropPlaceholder);\n            }\n\n            const tabDropPlaceholderOffset = getJQueryOffset(this.layoutManager.tabDropPlaceholder);\n            const tabDropPlaceholderWidth = getElementWidth(this.layoutManager.tabDropPlaceholder)\n            if (this._header.leftRightSided) {\n                const placeHolderTop = tabDropPlaceholderOffset.top;\n                area = {\n                    x1: tabTop,\n                    x2: tabTop + tabElement.clientHeight,\n                    y1: placeHolderTop,\n                    y2: placeHolderTop + tabDropPlaceholderWidth,\n                };\n            } else {\n                const placeHolderLeft = tabDropPlaceholderOffset.left;\n\n                area = {\n                    x1: placeHolderLeft,\n                    x2: placeHolderLeft + tabDropPlaceholderWidth,\n                    y1: tabTop,\n                    y2: tabTop + tabElement.clientHeight,\n                };\n            }\n        }\n\n        dropTargetIndicator.highlightArea(area);\n        return;\n    }\n\n    /** @internal */\n    private resetHeaderDropZone() {\n        this.layoutManager.tabDropPlaceholder.remove();\n    }\n\n    /** @internal */\n    private setupHeaderPosition() {\n        setElementDisplayVisibility(this._header.element, this._header.show);\n        this.element.classList.remove(DomConstants.ClassName.Left, DomConstants.ClassName.Right, DomConstants.ClassName.Bottom);\n        if (this._header.leftRightSided) {\n            this.element.classList.add('lm_' + this._header.side);\n        }\n\n        //if ([Side.right, Side.bottom].includes(this._header.side)) {\n        //    // move the header behind the content.\n        //    this.element.appendChild(this._header.element);\n        //}\n        this.updateSize(false);\n    }\n\n    /** @internal */\n    private highlightBodyDropZone(segment: Stack.Segment): void {\n        if (this._contentAreaDimensions === undefined) {\n            throw new UnexpectedUndefinedError('SHBDZC82265');\n        } else {\n            const highlightArea = this._contentAreaDimensions[segment].highlightArea;\n            const dropTargetIndicator = this.layoutManager.dropTargetIndicator;\n            if (dropTargetIndicator === null) {\n                throw new UnexpectedNullError('SHBDZD96110');\n            } else {\n                dropTargetIndicator.highlightArea(highlightArea);\n                this._dropSegment = segment;\n            }\n        }\n    }\n\n    /** @internal */\n    private handleResize() {\n        this._header.updateTabSizes()\n    }\n\n    /** @internal */\n    private handleMaximised() {\n        this._header.processMaximised();\n    }\n\n    /** @internal */\n    private handleMinimised() {\n        this._header.processMinimised();\n    }\n\n    /** @internal */\n    private handlePopoutEvent() {\n        this.popout();\n    }\n\n    /** @internal */\n    private handleHeaderClickEvent(ev: MouseEvent) {\n        const eventName = EventEmitter.headerClickEventName;\n        const bubblingEvent = new EventEmitter.ClickBubblingEvent(eventName, this, ev);\n        this.emit(eventName, bubblingEvent);\n    }\n\n    /** @internal */\n    private handleHeaderTouchStartEvent(ev: TouchEvent) {\n        const eventName = EventEmitter.headerTouchStartEventName;\n        const bubblingEvent = new EventEmitter.TouchStartBubblingEvent(eventName, this, ev);\n        this.emit(eventName, bubblingEvent);\n    }\n\n    /** @internal */\n    private handleHeaderComponentRemoveEvent(item: ComponentItem) {\n        this.removeChild(item, false);\n    }\n\n    /** @internal */\n    private handleHeaderComponentFocusEvent(item: ComponentItem) {\n        this.setActiveComponentItem(item, true);\n    }\n\n    /** @internal */\n    private handleHeaderComponentStartDragEvent(x: number, y: number, dragListener: DragListener, componentItem: ComponentItem) {\n        if (this.isMaximised === true) {\n            this.toggleMaximise();\n        }\n        this.layoutManager.startComponentDrag(x, y, dragListener, componentItem, this);\n    }\n\n    /** @internal */\n    private createHeaderConfig() {\n        if (!this._headerSideChanged) {\n            return ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig);\n        } else {\n            const show = this._header.show ? this._header.side : false;\n\n            let result = ResolvedHeaderedItemConfig.Header.createCopy(this._headerConfig, show);\n            if (result === undefined) {\n                result = {\n                    show,\n                    popout: undefined,\n                    maximise: undefined,\n                    close: undefined,\n                    minimise: undefined,\n                    tabDropdown: undefined,\n                };\n            }\n            return result;\n        }\n    }\n\n    /** @internal */\n    private emitStateChangedEvent() {\n        this.emitBaseBubblingEvent('stateChanged');\n    }\n}\n\n/** @public */\nexport namespace Stack {\n    /** @internal */\n    export const enum Segment {\n        Header = 'header',\n        Body = 'body',\n        Left = 'left',\n        Right = 'right',\n        Top = 'top',\n        Bottom = 'bottom',\n    }\n\n    /** @internal */\n    export interface ContentAreaDimension {\n        hoverArea: AreaLinkedRect;\n        highlightArea: AreaLinkedRect;\n    }\n\n    /** @internal */\n    export type ContentAreaDimensions = {\n        [segment: string]: ContentAreaDimension;\n    };\n\n    /** @internal */\n    export function createElement(document: Document): HTMLDivElement {\n        const element = document.createElement('div');\n        element.classList.add(DomConstants.ClassName.Item);\n        element.classList.add(DomConstants.ClassName.Stack);\n        return element;\n    }\n}\n","import { ComponentItemConfig, ItemConfig, LayoutConfig, RowOrColumnItemConfig, StackItemConfig } from './config/config';\nimport {\n    ResolvedComponentItemConfig,\n    ResolvedItemConfig,\n    ResolvedLayoutConfig,\n    ResolvedPopoutLayoutConfig,\n    ResolvedRootItemConfig,\n    ResolvedRowOrColumnItemConfig,\n    ResolvedStackItemConfig\n} from \"./config/resolved-config\";\nimport { ComponentContainer } from './container/component-container';\nimport { BrowserPopout } from './controls/browser-popout';\nimport { DragProxy } from './controls/drag-proxy';\nimport { DragSource } from './controls/drag-source';\nimport { DropTargetIndicator } from './controls/drop-target-indicator';\nimport { TransitionIndicator } from './controls/transition-indicator';\nimport { ConfigurationError } from './errors/external-error';\nimport { AssertError, UnexpectedNullError, UnexpectedUndefinedError, UnreachableCaseError } from './errors/internal-error';\nimport { ComponentItem } from './items/component-item';\nimport { ComponentParentableItem } from './items/component-parentable-item';\nimport { ContentItem } from './items/content-item';\nimport { GroundItem } from './items/ground-item';\nimport { RowOrColumn } from './items/row-or-column';\nimport { Stack } from './items/stack';\nimport { ConfigMinifier } from './utils/config-minifier';\nimport { DomConstants } from './utils/dom-constants';\nimport { DragListener } from './utils/drag-listener';\nimport { EventEmitter } from './utils/event-emitter';\nimport { EventHub } from './utils/event-hub';\nimport { I18nStringId, I18nStrings, i18nStrings } from './utils/i18n-strings';\nimport { ItemType, JsonValue, Rect, ResponsiveMode } from './utils/types';\nimport {\n    getElementWidthAndHeight,\n    removeFromArray,\n    setElementHeight,\n    setElementWidth\n} from './utils/utils';\n\n/** @internal */\ndeclare global {\n    interface Window {\n        __glInstance: LayoutManager;\n    }\n}\n\n/**\n * The main class that will be exposed as GoldenLayout.\n */\n\n/** @public */\nexport abstract class LayoutManager extends EventEmitter {\n    /** Whether the layout will be automatically be resized to container whenever the container's size is changed\n     * Default is true if <body> is the container otherwise false\n     * Default will be changed to true for any container in the future\n     */\n    resizeWithContainerAutomatically = false;\n    /** The debounce interval (in milliseconds) used whenever a layout is automatically resized.  0 means next tick */\n    resizeDebounceInterval = 100;\n    /** Extend the current debounce delay time period if it is triggered during the delay.\n     * If this is true, the layout will only resize when its container has stopped being resized.\n     * If it is false, the layout will resize at intervals while its container is being resized.\n     */\n    resizeDebounceExtendedWhenPossible = true;\n\n    /** @internal */\n    private _containerElement: HTMLElement;\n    /** @internal */\n    private _isInitialised = false;\n    /** @internal */\n    private _groundItem: GroundItem | undefined = undefined;\n    /** @internal */\n    private _openPopouts: BrowserPopout[] = [];\n    /** @internal */\n    private _dropTargetIndicator: DropTargetIndicator | null = null;\n    /** @internal */\n    private _transitionIndicator: TransitionIndicator | null = null;\n    /** @internal */\n    private _resizeTimeoutId: ReturnType<typeof setTimeout> | undefined;\n    /** @internal */\n    private _itemAreas: ContentItem.Area[] = [];\n    /** @internal */\n    private _maximisedStack: Stack | undefined;\n    /** @internal */\n    private _maximisePlaceholder = LayoutManager.createMaximisePlaceElement(document);\n    /** @internal */\n    private _tabDropPlaceholder = LayoutManager.createTabDropPlaceholderElement(document);\n    /** @internal */\n    private _dragSources: DragSource[] = [];\n    /** @internal */\n    private _updatingColumnsResponsive = false;\n    /** @internal */\n    private _firstLoad = true;\n    /** @internal */\n    private _eventHub = new EventHub(this);\n    /** @internal */\n    private _width: number | null = null;\n    /** @internal */\n    private _height: number | null = null;\n    /** @internal */\n    private _focusedComponentItem: ComponentItem | undefined;\n    /** @internal */\n    private _virtualSizedContainers: ComponentContainer[] = [];\n    /** @internal */\n    private _virtualSizedContainerAddingBeginCount = 0;\n    /** @internal */\n    private _sizeInvalidationBeginCount = 0;\n    /** @internal */\n    protected _constructorOrSubWindowLayoutConfig: LayoutConfig | undefined; // protected for backwards compatibility\n\n    /** @internal */\n    private _resizeObserver = new ResizeObserver(() => this.handleContainerResize());\n    /** @internal */\n    private _windowUnloadListener = () => this.onUnload();\n    /** @internal */\n    private _maximisedStackBeforeDestroyedListener = (ev: EventEmitter.BubblingEvent) => this.cleanupBeforeMaximisedStackDestroyed(ev);\n\n    readonly isSubWindow: boolean;\n    layoutConfig: ResolvedLayoutConfig;\n\n    beforeVirtualRectingEvent: LayoutManager.BeforeVirtualRectingEvent | undefined;\n    afterVirtualRectingEvent: LayoutManager.AfterVirtualRectingEvent | undefined;\n\n    get container(): HTMLElement { return this._containerElement; }\n    get isInitialised(): boolean { return this._isInitialised; }\n    /** @internal */\n    get groundItem(): GroundItem | undefined { return this._groundItem; }\n    /** @internal @deprecated use {@link (LayoutManager:class).groundItem} instead */\n    get root(): GroundItem | undefined { return this._groundItem; }\n    get openPopouts(): BrowserPopout[] { return this._openPopouts; }\n    /** @internal */\n    get dropTargetIndicator(): DropTargetIndicator | null { return this._dropTargetIndicator; }\n    /** @internal @deprecated To be removed */\n    get transitionIndicator(): TransitionIndicator | null { return this._transitionIndicator; }\n    get width(): number | null { return this._width; }\n    get height(): number | null { return this._height; }\n    /**\n     * Retrieves the {@link (EventHub:class)} instance associated with this layout manager.\n     * This can be used to propagate events between the windows\n     * @public\n     */\n    get eventHub(): EventHub { return this._eventHub; }\n    get rootItem(): ContentItem | undefined {\n        if (this._groundItem === undefined) {\n            throw new Error('Cannot access rootItem before init');\n        } else {\n            const groundContentItems = this._groundItem.contentItems;\n            if (groundContentItems.length === 0) {\n                return undefined;\n            } else {\n                return this._groundItem.contentItems[0];\n            }\n        }\n    }\n    get focusedComponentItem(): ComponentItem | undefined { return this._focusedComponentItem; }\n    /** @internal */\n    get tabDropPlaceholder(): HTMLElement { return this._tabDropPlaceholder; }\n    get maximisedStack(): Stack | undefined { return this._maximisedStack; }\n\n    /** @deprecated indicates deprecated constructor use */\n    get deprecatedConstructor(): boolean { return !this.isSubWindow && this._constructorOrSubWindowLayoutConfig !== undefined; }\n\n\n    /**\n    * @param container - A Dom HTML element. Defaults to body\n    * @internal\n    */\n    constructor(parameters: LayoutManager.ConstructorParameters) {\n        super();\n\n        this.isSubWindow = parameters.isSubWindow;\n\n        this._constructorOrSubWindowLayoutConfig = parameters.constructorOrSubWindowLayoutConfig;\n\n        I18nStrings.checkInitialise();\n        ConfigMinifier.checkInitialise();\n\n        if (parameters.containerElement !== undefined) {\n            this._containerElement = parameters.containerElement;\n        }\n    }\n\n    /**\n     * Destroys the LayoutManager instance itself as well as every ContentItem\n     * within it. After this is called nothing should be left of the LayoutManager.\n     */\n    destroy(): void {\n        if (this._isInitialised) {\n            if (this.layoutConfig.settings.closePopoutsOnUnload === true) {\n                for (let i = 0; i < this._openPopouts.length; i++) {\n                    this._openPopouts[i].close();\n                }\n            }\n\n            this._resizeObserver.disconnect();\n            this.checkClearResizeTimeout();\n            globalThis.removeEventListener('unload', this._windowUnloadListener);\n            globalThis.removeEventListener('beforeunload', this._windowUnloadListener);\n\n            if (this._groundItem !== undefined) {\n                this._groundItem.destroy();\n            }\n            this._tabDropPlaceholder.remove();\n            if (this._dropTargetIndicator !== null) {\n                this._dropTargetIndicator.destroy();\n            }\n            if (this._transitionIndicator !== null) {\n                this._transitionIndicator.destroy();\n            }\n            this._eventHub.destroy();\n\n            for (const dragSource of this._dragSources) {\n                dragSource.destroy();\n            }\n            this._dragSources = [];\n\n            this._isInitialised = false;\n        }\n    }\n\n    /**\n     * Takes a GoldenLayout configuration object and\n     * replaces its keys and values recursively with\n     * one letter codes\n     * @deprecated use {@link (ResolvedLayoutConfig:namespace).minifyConfig} instead\n     */\n    minifyConfig(config: ResolvedLayoutConfig): ResolvedLayoutConfig {\n        return ResolvedLayoutConfig.minifyConfig(config);\n    }\n\n    /**\n     * Takes a configuration Object that was previously minified\n     * using minifyConfig and returns its original version\n     * @deprecated use {@link (ResolvedLayoutConfig:namespace).unminifyConfig} instead\n     */\n    unminifyConfig(config: ResolvedLayoutConfig): ResolvedLayoutConfig {\n        return ResolvedLayoutConfig.unminifyConfig(config);\n    }\n\n    /** @internal */\n    abstract bindComponent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent;\n    /** @internal */\n    abstract unbindComponent(container: ComponentContainer, virtual: boolean, component: ComponentContainer.Component | undefined): void;\n\n    /**\n     * Called from GoldenLayout class. Finishes of init\n     * @internal\n     */\n    init(): void {\n        this.setContainer();\n        this._dropTargetIndicator = new DropTargetIndicator(/*this.container*/);\n        this._transitionIndicator = new TransitionIndicator();\n        this.updateSizeFromContainer();\n\n        let subWindowRootConfig: ComponentItemConfig | undefined;\n        if (this.isSubWindow) {\n            if (this._constructorOrSubWindowLayoutConfig === undefined) {\n                // SubWindow LayoutConfig should have been generated by constructor\n                throw new UnexpectedUndefinedError('LMIU07155');\n            } else {\n                if (ItemConfig.isComponent(this._constructorOrSubWindowLayoutConfig.root)) {\n                    subWindowRootConfig = this._constructorOrSubWindowLayoutConfig.root;\n                } else {\n                    // SubWindow LayoutConfig must have Component as Root\n                    throw new AssertError('LMIC07155');\n                }\n                const resolvedLayoutConfig = LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);\n                // remove root from layoutConfig\n                this.layoutConfig = {\n                    ...resolvedLayoutConfig,\n                    root: undefined,\n                }\n            }\n        } else {\n            if (this._constructorOrSubWindowLayoutConfig === undefined) {\n                this.layoutConfig = ResolvedLayoutConfig.createDefault(); // will overwritten be loaded via loadLayout\n            } else {\n                // backwards compatibility\n                this.layoutConfig = LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);\n            }\n        }\n        const layoutConfig = this.layoutConfig;\n        this._groundItem = new GroundItem(this, layoutConfig.root, this._containerElement);\n        this._groundItem.init();\n\n        this.checkLoadedLayoutMaximiseItem();\n\n        this.bindEvents();\n        this._isInitialised = true;\n        this.adjustColumnsResponsive();\n        this.emit('initialised');\n\n        if (subWindowRootConfig !== undefined) {\n            // must be SubWindow\n            this.loadComponentAsRoot(subWindowRootConfig);\n        }\n    }\n\n    /**\n     * Loads a new layout\n     * @param layoutConfig - New layout to be loaded\n     */\n    loadLayout(layoutConfig: LayoutConfig): void {\n        if (!this.isInitialised) {\n            // In case application not correctly using legacy constructor\n            throw new Error('GoldenLayout: Need to call init() if LayoutConfig with defined root passed to constructor')\n        } else {\n            if (this._groundItem === undefined) {\n                throw new UnexpectedUndefinedError('LMLL11119');\n            } else {\n                this.createSubWindows(); // still needs to be tested\n\n                this.layoutConfig = LayoutConfig.resolve(layoutConfig);\n                this._groundItem.loadRoot(this.layoutConfig.root);\n                this.checkLoadedLayoutMaximiseItem();\n                this.adjustColumnsResponsive();\n            }\n        }\n    }\n\n    /**\n     * Creates a layout configuration object based on the the current state\n     *\n     * @public\n     * @returns GoldenLayout configuration\n     */\n    saveLayout(): ResolvedLayoutConfig {\n        if (this._isInitialised === false) {\n            throw new Error('Can\\'t create config, layout not yet initialised');\n        } else {\n\n            // if (root !== undefined && !(root instanceof ContentItem)) {\n            //     throw new Error('Root must be a ContentItem');\n            // }\n\n            /*\n            * Content\n            */\n            if (this._groundItem === undefined) {\n                throw new UnexpectedUndefinedError('LMTC18244');\n            } else {\n                const groundContent = this._groundItem.calculateConfigContent();\n\n                let rootItemConfig: ResolvedRootItemConfig | undefined;\n                if (groundContent.length !== 1) {\n                    rootItemConfig = undefined;\n                } else {\n                    rootItemConfig = groundContent[0];\n                }\n\n                /*\n                * Retrieve config for subwindows\n                */\n                this.reconcilePopoutWindows();\n                const openPopouts: ResolvedPopoutLayoutConfig[] = [];\n                for (let i = 0; i < this._openPopouts.length; i++) {\n                    openPopouts.push(this._openPopouts[i].toConfig());\n                }\n\n                const config: ResolvedLayoutConfig = {\n                    root: rootItemConfig,\n                    openPopouts,\n                    settings:  ResolvedLayoutConfig.Settings.createCopy(this.layoutConfig.settings),\n                    dimensions: ResolvedLayoutConfig.Dimensions.createCopy(this.layoutConfig.dimensions),\n                    header: ResolvedLayoutConfig.Header.createCopy(this.layoutConfig.header),\n                    resolved: true,\n                }\n\n                return config;\n            }\n        }\n    }\n\n    /**\n     * Removes any existing layout. Effectively, an empty layout will be loaded.\n     */\n\n    clear(): void {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMCL11129');\n        } else {\n            this._groundItem.clearRoot();\n        }\n    }\n\n    /**\n     * @deprecated Use {@link (LayoutManager:class).saveLayout}\n     */\n    toConfig(): ResolvedLayoutConfig {\n        return this.saveLayout();\n    }\n\n    /**\n     * Adds a new ComponentItem.  Will use default location selectors to ensure a location is found and\n     * component is successfully added\n     * @param componentTypeName - Name of component type to be created.\n     * @param state - Optional initial state to be assigned to component\n     * @returns New ComponentItem created.\n     */\n    newComponent(componentType: JsonValue, componentState?: JsonValue, title?: string): ComponentItem {\n        const componentItem = this.newComponentAtLocation(componentType, componentState, title);\n        if (componentItem === undefined) {\n            throw new AssertError('LMNC65588');\n        } else {\n            return componentItem;\n        }\n    }\n\n    /**\n     * Adds a ComponentItem at the first valid selector location.\n     * @param componentTypeName - Name of component type to be created.\n     * @param state - Optional initial state to be assigned to component\n     * @param locationSelectors - Array of location selectors used to find location in layout where component\n     * will be added. First location in array which is valid will be used. If locationSelectors is undefined,\n     * {@link (LayoutManager:namespace).defaultLocationSelectors} will be used\n     * @returns New ComponentItem created or undefined if no valid location selector was in array.\n     */\n    newComponentAtLocation(componentType: JsonValue, componentState?: JsonValue, title?: string,\n        locationSelectors?: LayoutManager.LocationSelector[]\n    ): ComponentItem | undefined{\n        if (this._groundItem === undefined) {\n            throw new Error('Cannot add component before init');\n        } else {\n            const location = this.addComponentAtLocation(componentType, componentState, title, locationSelectors);\n            if (location === undefined) {\n                return undefined;\n            } else {\n                const createdItem = location.parentItem.contentItems[location.index];\n                if (!ContentItem.isComponentItem(createdItem)) {\n                    throw new AssertError('LMNC992877533');\n                } else {\n                    return createdItem;\n                }\n            }\n        }\n    }\n\n    /**\n     * Adds a new ComponentItem.  Will use default location selectors to ensure a location is found and\n     * component is successfully added\n     * @param componentType - Type of component to be created.\n     * @param state - Optional initial state to be assigned to component\n     * @returns Location of new ComponentItem created.\n     */\n    addComponent(componentType: JsonValue, componentState?: JsonValue, title?: string): LayoutManager.Location {\n        const location = this.addComponentAtLocation(componentType, componentState, title);\n        if (location === undefined) {\n            throw new AssertError('LMAC99943');\n        } else {\n            return location;\n        }\n    }\n\n    /**\n     * Adds a ComponentItem at the first valid selector location.\n     * @param componentType - Type of component to be created.\n     * @param state - Optional initial state to be assigned to component\n     * @param locationSelectors - Array of location selectors used to find determine location in layout where component\n     * will be added. First location in array which is valid will be used. If undefined,\n     * {@link (LayoutManager:namespace).defaultLocationSelectors} will be used.\n     * @returns Location of new ComponentItem created or undefined if no valid location selector was in array.\n     */\n    addComponentAtLocation(componentType: JsonValue, componentState?: JsonValue, title?: string,\n        locationSelectors?: readonly LayoutManager.LocationSelector[]\n    ): LayoutManager.Location | undefined {\n        const itemConfig: ComponentItemConfig = {\n            type: 'component',\n            componentType,\n            componentState,\n            title,\n        };\n\n        return this.addItemAtLocation(itemConfig, locationSelectors);\n    }\n\n    /**\n     * Adds a new ContentItem.  Will use default location selectors to ensure a location is found and\n     * component is successfully added\n     * @param itemConfig - ResolvedItemConfig of child to be added.\n     * @returns New ContentItem created.\n    */\n    newItem(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig): ContentItem {\n        const contentItem = this.newItemAtLocation(itemConfig);\n        if (contentItem === undefined) {\n            throw new AssertError('LMNC65588');\n        } else {\n            return contentItem;\n        }\n    }\n\n    /**\n     * Adds a new child ContentItem under the root ContentItem.  If a root does not exist, then create root ContentItem instead\n     * @param itemConfig - ResolvedItemConfig of child to be added.\n     * @param locationSelectors - Array of location selectors used to find determine location in layout where ContentItem\n     * will be added. First location in array which is valid will be used. If undefined,\n     * {@link (LayoutManager:namespace).defaultLocationSelectors} will be used.\n     * @returns New ContentItem created or undefined if no valid location selector was in array. */\n    newItemAtLocation(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig,\n        locationSelectors?: readonly LayoutManager.LocationSelector[]\n    ): ContentItem | undefined {\n        if (this._groundItem === undefined) {\n            throw new Error('Cannot add component before init');\n        } else {\n            const location = this.addItemAtLocation(itemConfig, locationSelectors);\n            if (location === undefined) {\n                return undefined;\n            } else {\n                const createdItem = location.parentItem.contentItems[location.index];\n                return createdItem;\n            }\n        }\n    }\n\n    /**\n     * Adds a new ContentItem.  Will use default location selectors to ensure a location is found and\n     * component is successfully added.\n     * @param itemConfig - ResolvedItemConfig of child to be added.\n     * @returns Location of new ContentItem created. */\n    addItem(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig): LayoutManager.Location {\n        const location = this.addItemAtLocation(itemConfig);\n        if (location === undefined) {\n            throw new AssertError('LMAI99943');\n        } else {\n            return location;\n        }\n    }\n\n    /**\n     * Adds a ContentItem at the first valid selector location.\n     * @param itemConfig - ResolvedItemConfig of child to be added.\n     * @param locationSelectors - Array of location selectors used to find determine location in layout where ContentItem\n     * will be added. First location in array which is valid will be used. If undefined,\n     * {@link (LayoutManager:namespace).defaultLocationSelectors} will be used.\n     * @returns Location of new ContentItem created or undefined if no valid location selector was in array. */\n    addItemAtLocation(itemConfig: RowOrColumnItemConfig | StackItemConfig | ComponentItemConfig,\n        locationSelectors?: readonly LayoutManager.LocationSelector[]\n    ): LayoutManager.Location | undefined {\n        if (this._groundItem === undefined) {\n            throw new Error('Cannot add component before init');\n        } else {\n            if (locationSelectors === undefined) {\n                // defaultLocationSelectors should always find a location\n                locationSelectors = LayoutManager.defaultLocationSelectors;\n            }\n\n            const location = this.findFirstLocation(locationSelectors);\n            if (location === undefined) {\n                return undefined;\n            } else {\n                let parentItem = location.parentItem;\n                let addIdx: number;\n                switch (parentItem.type) {\n                    case ItemType.ground: {\n                        const groundItem = parentItem as GroundItem;\n                        addIdx = groundItem.addItem(itemConfig, location.index);\n                        if (addIdx >= 0) {\n                            parentItem = this._groundItem.contentItems[0]; // was added to rootItem\n                        } else {\n                            addIdx = 0; // was added as rootItem (which is the first and only ContentItem in GroundItem)\n                        }\n                        break;\n                    }\n                    case ItemType.row:\n                    case ItemType.column: {\n                        const rowOrColumn = parentItem as RowOrColumn;\n                        addIdx = rowOrColumn.addItem(itemConfig, location.index);\n                        break;\n                    }\n                    case ItemType.stack: {\n                        if (!ItemConfig.isComponent(itemConfig)) {\n                            throw Error(i18nStrings[I18nStringId.ItemConfigIsNotTypeComponent]);\n                        } else {\n                            const stack = parentItem as Stack;\n                            addIdx = stack.addItem(itemConfig, location.index);\n                            break;\n                        }\n                    }\n                    case ItemType.component: {\n                        throw new AssertError('LMAIALC87444602');\n                    }\n                    default:\n                        throw new UnreachableCaseError('LMAIALU98881733', parentItem.type);\n                }\n\n                if (ItemConfig.isComponent(itemConfig)) {\n                    // see if stack was inserted\n                    const item = parentItem.contentItems[addIdx];\n                    if (ContentItem.isStack(item)) {\n                        parentItem = item;\n                        addIdx = 0;\n                    }\n                }\n\n                location.parentItem = parentItem;\n                location.index = addIdx;\n\n                return location;\n            }\n        }\n    }\n\n    /** Loads the specified component ResolvedItemConfig as root.\n     * This can be used to display a Component all by itself.  The layout cannot be changed other than having another new layout loaded.\n     * Note that, if this layout is saved and reloaded, it will reload with the Component as a child of a Stack.\n    */\n    loadComponentAsRoot(itemConfig: ComponentItemConfig): void {\n        if (this._groundItem === undefined) {\n            throw new Error('Cannot add item before init');\n        } else {\n            this._groundItem.loadComponentAsRoot(itemConfig);\n        }\n    }\n\n    /** @deprecated Use {@link (LayoutManager:class).setSize} */\n    updateSize(width: number, height: number): void {\n        this.setSize(width, height);\n    }\n\n    /**\n     * Updates the layout managers size\n     *\n     * @param width - Width in pixels\n     * @param height - Height in pixels\n     */\n    setSize(width: number, height: number): void {\n        this._width = width;\n        this._height = height;\n\n        if (this._isInitialised === true) {\n            if (this._groundItem === undefined) {\n                throw new UnexpectedUndefinedError('LMUS18881');\n            } else {\n                this._groundItem.setSize(this._width, this._height);\n\n                if (this._maximisedStack) {\n                    const { width, height } = getElementWidthAndHeight(this._containerElement);\n                    setElementWidth(this._maximisedStack.element, width);\n                    setElementHeight(this._maximisedStack.element, height);\n                    this._maximisedStack.updateSize(false);\n                }\n\n                this.adjustColumnsResponsive();\n            }\n        }\n    }\n\n    /** @internal */\n    beginSizeInvalidation(): void {\n        this._sizeInvalidationBeginCount++;\n    }\n\n    /** @internal */\n    endSizeInvalidation(): void {\n        if (--this._sizeInvalidationBeginCount === 0) {\n            this.updateSizeFromContainer();\n        }\n    }\n\n    /** @internal */\n    updateSizeFromContainer(): void {\n        const { width, height } = getElementWidthAndHeight(this._containerElement);\n        this.setSize(width, height);\n    }\n\n    /**\n     * Update the size of the root ContentItem.  This will update the size of all contentItems in the tree\n     * @param force - In some cases the size is not updated if it has not changed. In this case, events\n     * (such as ComponentContainer.virtualRectingRequiredEvent) are not fired. Setting force to true, ensures the size is updated regardless, and\n     * the respective events are fired. This is sometimes necessary when a component's size has not changed but it has become visible, and the\n     * relevant events need to be fired.\n     */\n    updateRootSize(force = false): void {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMURS28881');\n        } else {\n            this._groundItem.updateSize(force);\n        }\n    }\n\n    /** @public */\n    createAndInitContentItem(config: ResolvedItemConfig, parent: ContentItem): ContentItem {\n        const newItem = this.createContentItem(config, parent);\n        newItem.init();\n        return newItem;\n    }\n\n    /**\n     * Recursively creates new item tree structures based on a provided\n     * ItemConfiguration object\n     *\n     * @param config - ResolvedItemConfig\n     * @param parent - The item the newly created item should be a child of\n     * @internal\n     */\n    createContentItem(config: ResolvedItemConfig, parent: ContentItem): ContentItem {\n        if (typeof config.type !== 'string') {\n            throw new ConfigurationError('Missing parameter \\'type\\'', JSON.stringify(config));\n        }\n\n        /**\n         * We add an additional stack around every component that's not within a stack anyways.\n         */\n        if (\n            // If this is a component\n            ResolvedItemConfig.isComponentItem(config) &&\n\n            // and it's not already within a stack\n            !(parent instanceof Stack) &&\n\n            // and we have a parent\n            !!parent &&\n\n            // and it's not the topmost item in a new window\n            !(this.isSubWindow === true && parent instanceof GroundItem)\n        ) {\n            const stackConfig: ResolvedStackItemConfig = {\n                type: ItemType.stack,\n                content: [config],\n                width: config.width,\n                minWidth: config.minWidth,\n                height: config.height,\n                minHeight: config.minHeight,\n                id: config.id,\n                maximised: config.maximised,\n                isClosable: config.isClosable,\n                activeItemIndex: 0,\n                header: undefined,\n            };\n\n            config = stackConfig;\n        }\n\n        const contentItem = this.createContentItemFromConfig(config, parent);\n        return contentItem;\n    }\n\n    findFirstComponentItemById(id: string): ComponentItem | undefined {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMFFCIBI82446');\n        } else {\n            return this.findFirstContentItemTypeByIdRecursive(ItemType.component, id, this._groundItem) as ComponentItem;\n        }\n    }\n\n    /**\n     * Creates a popout window with the specified content at the specified position\n     *\n     * @param itemConfigOrContentItem - The content of the popout window's layout manager derived from either\n     * a {@link (ContentItem:class)} or {@link (ItemConfig:interface)} or ResolvedItemConfig content (array of {@link (ItemConfig:interface)})\n     * @param positionAndSize - The width, height, left and top of Popout window\n     * @param parentId -The id of the element this item will be appended to when popIn is called\n     * @param indexInParent - The position of this item within its parent element\n     */\n\n    createPopout(itemConfigOrContentItem: ContentItem | ResolvedRootItemConfig,\n        positionAndSize: ResolvedPopoutLayoutConfig.Window,\n        parentId: string | null,\n        indexInParent: number | null\n    ): BrowserPopout {\n        if (itemConfigOrContentItem instanceof ContentItem) {\n            return this.createPopoutFromContentItem(itemConfigOrContentItem, positionAndSize, parentId, indexInParent);\n        } else {\n            return this.createPopoutFromItemConfig(itemConfigOrContentItem, positionAndSize, parentId, indexInParent);\n        }\n    }\n\n    /** @internal */\n    createPopoutFromContentItem(item: ContentItem,\n        window: ResolvedPopoutLayoutConfig.Window | undefined,\n        parentId: string | null,\n        indexInParent: number | null | undefined,\n    ): BrowserPopout {\n        /**\n         * If the item is the only component within a stack or for some\n         * other reason the only child of its parent the parent will be destroyed\n         * when the child is removed.\n         *\n         * In order to support this we move up the tree until we find something\n         * that will remain after the item is being popped out\n         */\n        let parent = item.parent;\n        let child = item;\n        while (parent !== null && parent.contentItems.length === 1 && !parent.isGround) {\n            child = parent;\n            parent = parent.parent;\n        }\n\n        if (parent === null) {\n            throw new UnexpectedNullError('LMCPFCI00834');\n        } else {\n            if (indexInParent === undefined) {\n                indexInParent = parent.contentItems.indexOf(child);\n            }\n\n            if (parentId !== null) {\n                parent.addPopInParentId(parentId);\n            }\n\n            if (window === undefined) {\n                const windowLeft = globalThis.screenX || globalThis.screenLeft;\n                const windowTop = globalThis.screenY || globalThis.screenTop;\n                const offsetLeft = item.element.offsetLeft;\n                const offsetTop = item.element.offsetTop\n                // const { left: offsetLeft, top: offsetTop } = getJQueryLeftAndTop(item.element);\n                const { width, height } = getElementWidthAndHeight(item.element);\n\n                window = {\n                    left: windowLeft + offsetLeft,\n                    top: windowTop + offsetTop,\n                    width,\n                    height,\n                };\n            }\n\n            const itemConfig = item.toConfig();\n            item.remove();\n\n            if (!ResolvedRootItemConfig.isRootItemConfig(itemConfig)) {\n                throw new Error(`${i18nStrings[I18nStringId.PopoutCannotBeCreatedWithGroundItemConfig]}`);\n            } else {\n                return this.createPopoutFromItemConfig(itemConfig, window, parentId, indexInParent);\n            }\n        }\n    }\n\n    /** @internal */\n    beginVirtualSizedContainerAdding(): void {\n        if (++this._virtualSizedContainerAddingBeginCount === 0) {\n            this._virtualSizedContainers.length = 0;\n        }\n    }\n\n    /** @internal */\n    addVirtualSizedContainer(container: ComponentContainer): void {\n        this._virtualSizedContainers.push(container);\n    }\n\n    /** @internal */\n    endVirtualSizedContainerAdding(): void {\n        if (--this._virtualSizedContainerAddingBeginCount === 0) {\n            const count = this._virtualSizedContainers.length;\n            if (count > 0) {\n                this.fireBeforeVirtualRectingEvent(count);\n                for (let i = 0; i < count; i++) {\n                    const container = this._virtualSizedContainers[i];\n                    container.notifyVirtualRectingRequired();\n                }\n                this.fireAfterVirtualRectingEvent();\n                this._virtualSizedContainers.length = 0;\n            }\n        }\n    }\n\n    /** @internal */\n    fireBeforeVirtualRectingEvent(count: number): void {\n        if (this.beforeVirtualRectingEvent !== undefined) {\n            this.beforeVirtualRectingEvent(count);\n        }\n    }\n\n    /** @internal */\n    fireAfterVirtualRectingEvent(): void {\n        if (this.afterVirtualRectingEvent !== undefined) {\n            this.afterVirtualRectingEvent();\n        }\n    }\n\n    /** @internal */\n    private createPopoutFromItemConfig(rootItemConfig: ResolvedRootItemConfig,\n        window: ResolvedPopoutLayoutConfig.Window,\n        parentId: string | null,\n        indexInParent: number | null\n    ) {\n        const layoutConfig = this.toConfig();\n\n        const popoutLayoutConfig: ResolvedPopoutLayoutConfig = {\n            root: rootItemConfig,\n            openPopouts: [],\n            settings: layoutConfig.settings,\n            dimensions: layoutConfig.dimensions,\n            header: layoutConfig.header,\n            window,\n            parentId,\n            indexInParent,\n            resolved: true,\n        }\n\n        return this.createPopoutFromPopoutLayoutConfig(popoutLayoutConfig);\n    }\n\n    /** @internal */\n    createPopoutFromPopoutLayoutConfig(config: ResolvedPopoutLayoutConfig): BrowserPopout {\n        const configWindow = config.window;\n        const initialWindow: Rect = {\n            left: configWindow.left ?? (globalThis.screenX || globalThis.screenLeft + 20),\n            top: configWindow.top ?? (globalThis.screenY || globalThis.screenTop + 20),\n            width: configWindow.width ?? 500,\n            height: configWindow.height ?? 309,\n        };\n\n\n        const browserPopout = new BrowserPopout(config, initialWindow, this);\n\n        browserPopout.on('initialised', () => this.emit('windowOpened', browserPopout));\n        browserPopout.on('closed', () => this.reconcilePopoutWindows());\n\n        this._openPopouts.push(browserPopout);\n\n        return browserPopout;\n    }\n\n    /**\n     * Attaches DragListener to any given DOM element\n     * and turns it into a way of creating new ComponentItems\n     * by 'dragging' the DOM element into the layout\n     *\n     * @param element - The HTML element which will be listened to for commencement of drag.\n     * @param componentTypeOrItemConfigCallback - Type of component to be created, or a callback which will provide the ItemConfig\n     * to be used to create the component.\n     * @param componentState - Optional initial state of component.  This will be ignored if componentTypeOrFtn is a function.\n     *\n     * @returns an opaque object that identifies the DOM element\n\t *          and the attached itemConfig. This can be used in\n\t *          removeDragSource() later to get rid of the drag listeners.\n     */\n    newDragSource(element: HTMLElement, itemConfigCallback: () => DragSource.ComponentItemConfig): DragSource;\n    newDragSource(element: HTMLElement, componentType: JsonValue, componentState?: JsonValue, title?: JsonValue): DragSource;\n    newDragSource(element: HTMLElement,\n        componentTypeOrItemConfigCallback: JsonValue | (() => DragSource.ComponentItemConfig),\n        componentState?: JsonValue,\n        title?: string,\n    ): DragSource {\n        const dragSource = new DragSource(this, element, [], componentTypeOrItemConfigCallback, componentState, title);\n        this._dragSources.push(dragSource);\n\n        return dragSource;\n    }\n\n    /**\n\t * Removes a DragListener added by createDragSource() so the corresponding\n\t * DOM element is not a drag source any more.\n\t */\n\tremoveDragSource(dragSource: DragSource): void {\n\t\tremoveFromArray(dragSource, this._dragSources );\n\t\tdragSource.destroy();\n    }\n\n    /** @internal */\n    startComponentDrag(x: number, y: number, dragListener: DragListener, componentItem: ComponentItem, stack: Stack): void {\n        new DragProxy(\n            x,\n            y,\n            dragListener,\n            this,\n            componentItem,\n            stack\n        );\n    }\n\n    /**\n     * Programmatically focuses an item. This focuses the specified component item\n     * and the item emits a focus event\n     *\n     * @param item - The component item to be focused\n     * @param suppressEvent - Whether to emit focus event\n     */\n    focusComponent(item: ComponentItem, suppressEvent = false): void {\n        item.focus(suppressEvent);\n    }\n\n    /**\n     * Programmatically blurs (defocuses) the currently focused component.\n     * If a component item is focused, then it is blurred and and the item emits a blur event\n     *\n     * @param item - The component item to be blurred\n     * @param suppressEvent - Whether to emit blur event\n     */\n    clearComponentFocus(suppressEvent = false): void {\n        this.setFocusedComponentItem(undefined, suppressEvent);\n    }\n\n    /**\n     * Programmatically focuses a component item or removes focus (blurs) from an existing focused component item.\n     *\n     * @param item - If defined, specifies the component item to be given focus.  If undefined, clear component focus.\n     * @param suppressEvents - Whether to emit focus and blur events\n     * @internal\n     */\n    setFocusedComponentItem(item: ComponentItem | undefined, suppressEvents = false): void {\n        if (item !== this._focusedComponentItem) {\n\n            let newFocusedParentItem: ComponentParentableItem | undefined;\n            if (item === undefined) {\n                newFocusedParentItem === undefined;\n            } else {\n                newFocusedParentItem = item.parentItem;\n            }\n\n            if (this._focusedComponentItem !== undefined) {\n                const oldFocusedItem = this._focusedComponentItem;\n                this._focusedComponentItem = undefined;\n                oldFocusedItem.setBlurred(suppressEvents);\n                const oldFocusedParentItem = oldFocusedItem.parentItem;\n                if (newFocusedParentItem === oldFocusedParentItem) {\n                    newFocusedParentItem = undefined;\n                } else {\n                    oldFocusedParentItem.setFocusedValue(false);\n                }\n            }\n\n            if (item !== undefined) {\n                this._focusedComponentItem = item;\n                item.setFocused(suppressEvents);\n                if (newFocusedParentItem !== undefined) {\n                    newFocusedParentItem.setFocusedValue(true);\n                }\n            }\n        }\n    }\n\n    /** @internal */\n    private createContentItemFromConfig(config: ResolvedItemConfig, parent: ContentItem): ContentItem {\n        switch (config.type) {\n            case ItemType.ground: throw new AssertError('LMCCIFC68871');\n            case ItemType.row: return new RowOrColumn(false, this, config as ResolvedRowOrColumnItemConfig, parent);\n            case ItemType.column: return new RowOrColumn(true, this, config as ResolvedRowOrColumnItemConfig, parent);\n            case ItemType.stack: return new Stack(this, config as ResolvedStackItemConfig, parent);\n            case ItemType.component:\n                return new ComponentItem(this, config as ResolvedComponentItemConfig, parent as Stack);\n            default:\n                throw new UnreachableCaseError('CCC913564', config.type, 'Invalid Config Item type specified');\n        }\n    }\n\n    /**\n     * This should only be called from stack component.\n     * Stack will look after docking processing associated with maximise/minimise\n     * @internal\n     **/\n    setMaximisedStack(stack: Stack | undefined): void {\n        if (stack === undefined) {\n            if (this._maximisedStack !== undefined) {\n                this.processMinimiseMaximisedStack();\n            }\n        } else {\n            if (stack !== this._maximisedStack) {\n                if (this._maximisedStack !== undefined) {\n                    this.processMinimiseMaximisedStack();\n                }\n\n                this.processMaximiseStack(stack);\n            }\n        }\n    }\n\n    checkMinimiseMaximisedStack(): void {\n        if (this._maximisedStack !== undefined) {\n            this._maximisedStack.minimise();\n        }\n    }\n\n    // showAllActiveContentItems() was called from ContentItem.show().  Not sure what its purpose was so have commented out\n    // Everything seems to work ok without this.  Have left commented code just in case there was a reason for it becomes\n    // apparent\n\n    // /** @internal */\n    // showAllActiveContentItems(): void {\n    //     const allStacks = this.getAllStacks();\n\n    //     for (let i = 0; i < allStacks.length; i++) {\n    //         const stack = allStacks[i];\n    //         const activeContentItem = stack.getActiveComponentItem();\n\n    //         if (activeContentItem !== undefined) {\n    //             if (!(activeContentItem instanceof ComponentItem)) {\n    //                 throw new AssertError('LMSAACIS22298');\n    //             } else {\n    //                 activeContentItem.container.show();\n    //             }\n    //         }\n    //     }\n    // }\n\n    // hideAllActiveContentItems() was called from ContentItem.hide().  Not sure what its purpose was so have commented out\n    // Everything seems to work ok without this.  Have left commented code just in case there was a reason for it becomes\n    // apparent\n\n    // /** @internal */\n    // hideAllActiveContentItems(): void {\n    //     const allStacks = this.getAllStacks();\n\n    //     for (let i = 0; i < allStacks.length; i++) {\n    //         const stack = allStacks[i];\n    //         const activeContentItem = stack.getActiveComponentItem();\n\n    //         if (activeContentItem !== undefined) {\n    //             if (!(activeContentItem instanceof ComponentItem)) {\n    //                 throw new AssertError('LMSAACIH22298');\n    //             } else {\n    //                 activeContentItem.container.hide();\n    //             }\n    //         }\n    //     }\n    // }\n\n    /** @internal */\n    private cleanupBeforeMaximisedStackDestroyed(event: EventEmitter.BubblingEvent) {\n\t\tif (this._maximisedStack !== null && this._maximisedStack === event.target) {\n\t\t\tthis._maximisedStack.off('beforeItemDestroyed', this._maximisedStackBeforeDestroyedListener);\n\t\t\tthis._maximisedStack = undefined;\n\t\t}\n    }\n\n    /**\n     * This method is used to get around sandboxed iframe restrictions.\n     * If 'allow-top-navigation' is not specified in the iframe's 'sandbox' attribute\n     * (as is the case with codepens) the parent window is forbidden from calling certain\n     * methods on the child, such as window.close() or setting document.location.href.\n     *\n     * This prevented GoldenLayout popouts from popping in in codepens. The fix is to call\n     * _$closeWindow on the child window's gl instance which (after a timeout to disconnect\n     * the invoking method from the close call) closes itself.\n     *\n     * @internal\n     */\n    closeWindow(): void {\n        globalThis.setTimeout(() => globalThis.close(), 1);\n    }\n\n    /** @internal */\n    getArea(x: number, y: number): ContentItem.Area | null {\n        let matchingArea = null;\n        let smallestSurface = Infinity;\n\n        for (let i = 0; i < this._itemAreas.length; i++) {\n            const area = this._itemAreas[i];\n\n            if (\n                x > area.x1 &&\n                x < area.x2 &&\n                y > area.y1 &&\n                y < area.y2 &&\n                smallestSurface > area.surface\n            ) {\n                smallestSurface = area.surface;\n                matchingArea = area;\n            }\n        }\n\n        return matchingArea;\n    }\n\n    /** @internal */\n    calculateItemAreas(): void {\n        const allContentItems = this.getAllContentItems();\n        /**\n         * If the last item is dragged out, highlight the entire container size to\n         * allow to re-drop it. this.ground.contentiItems.length === 0 at this point\n         *\n         * Don't include ground into the possible drop areas though otherwise since it\n         * will used for every gap in the layout, e.g. splitters\n         */\n        const groundItem = this._groundItem;\n        if (groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMCIAR44365');\n        } else {\n            if (allContentItems.length === 1) {\n                // No root ContentItem (just Ground ContentItem)\n                const groundArea = groundItem.getElementArea();\n                if (groundArea === null) {\n                    throw new UnexpectedNullError('LMCIARA44365')\n                } else {\n                    this._itemAreas = [groundArea];\n                }\n                return;\n            } else {\n                if (groundItem.contentItems[0].isStack) {\n                    // if root is Stack, then split stack and sides of Layout are same, so skip sides\n                    this._itemAreas = [];\n                } else {\n                    // sides of layout\n                    this._itemAreas = groundItem.createSideAreas();\n                }\n\n                for (let i = 0; i < allContentItems.length; i++) {\n                    const stack = allContentItems[i];\n                    if (ContentItem.isStack(stack)) {\n                        const area = stack.getArea();\n\n                        if (area === null) {\n                            continue;\n                        } else {\n                            this._itemAreas.push(area);\n                            const stackContentAreaDimensions = stack.contentAreaDimensions;\n                            if (stackContentAreaDimensions === undefined) {\n                                throw new UnexpectedUndefinedError('LMCIASC45599');\n                            } else {\n                                const highlightArea = stackContentAreaDimensions.header.highlightArea\n                                const surface = (highlightArea.x2 - highlightArea.x1) * (highlightArea.y2 - highlightArea.y1);\n\n                                const header: ContentItem.Area = {\n                                    x1: highlightArea.x1,\n                                    x2: highlightArea.x2,\n                                    y1: highlightArea.y1,\n                                    y2: highlightArea.y2,\n                                    contentItem: stack,\n                                    surface,\n                                };\n                                this._itemAreas.push(header);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Called as part of loading a new layout (including initial init()).\n     * Checks to see layout has a maximised item. If so, it maximises that item.\n     * @internal\n     */\n    private checkLoadedLayoutMaximiseItem() {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMCLLMI43432');\n        } else {\n            const configMaximisedItems = this._groundItem.getConfigMaximisedItems();\n\n            if (configMaximisedItems.length > 0) {\n                let item = configMaximisedItems[0];\n                if (ContentItem.isComponentItem(item)) {\n                    const stack = item.parent;\n                    if (stack === null) {\n                        throw new UnexpectedNullError('LMXLLMI69999');\n                    } else {\n                        item = stack;\n                    }\n                }\n                if (!ContentItem.isStack(item)) {\n                    throw new AssertError('LMCLLMI19993');\n                } else {\n                    item.maximise();\n                }\n            }\n        }\n    }\n\n    /** @internal */\n    private processMaximiseStack(stack: Stack): void {\n        this._maximisedStack = stack;\n        stack.on('beforeItemDestroyed', this._maximisedStackBeforeDestroyedListener);\n        stack.element.classList.add(DomConstants.ClassName.Maximised);\n        stack.element.insertAdjacentElement('afterend', this._maximisePlaceholder);\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMMXI19993');\n        } else {\n            this._groundItem.element.prepend(stack.element);\n            const { width, height } = getElementWidthAndHeight(this._containerElement);\n            setElementWidth(stack.element, width);\n            setElementHeight(stack.element, height);\n            stack.updateSize(true);\n            stack.focusActiveContentItem();\n            this._maximisedStack.emit('maximised');\n            this.emit('stateChanged');\n        }\n    }\n\n    /** @internal */\n    private processMinimiseMaximisedStack(): void {\n        if (this._maximisedStack === undefined) {\n            throw new AssertError('LMMMS74422');\n        } else {\n            const stack = this._maximisedStack;\n            if (stack.parent === null) {\n                throw new UnexpectedNullError('LMMI13668');\n            } else {\n                stack.element.classList.remove(DomConstants.ClassName.Maximised);\n                this._maximisePlaceholder.insertAdjacentElement('afterend', stack.element);\n                this._maximisePlaceholder.remove();\n                this.updateRootSize(true);\n                this._maximisedStack = undefined;\n                stack.off('beforeItemDestroyed', this._maximisedStackBeforeDestroyedListener);\n                stack.emit('minimised');\n                this.emit('stateChanged');\n            }\n        }\n    }\n\n    /**\n     * Iterates through the array of open popout windows and removes the ones\n     * that are effectively closed. This is necessary due to the lack of reliably\n     * listening for window.close / unload events in a cross browser compatible fashion.\n     * @internal\n     */\n    private reconcilePopoutWindows() {\n        const openPopouts: BrowserPopout[] = [];\n\n        for (let i = 0; i < this._openPopouts.length; i++) {\n            if (this._openPopouts[i].getWindow().closed === false) {\n                openPopouts.push(this._openPopouts[i]);\n            } else {\n                this.emit('windowClosed', this._openPopouts[i]);\n            }\n        }\n\n        if (this._openPopouts.length !== openPopouts.length) {\n            this._openPopouts = openPopouts;\n            this.emit('stateChanged');\n        }\n\n    }\n\n    /**\n     * Returns a flattened array of all content items,\n     * regardles of level or type\n     * @internal\n     */\n    private getAllContentItems() {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMGACI13130');\n        } else {\n            return this._groundItem.getAllContentItems();\n        }\n    }\n\n    /**\n     * Binds to DOM/BOM events on init\n     * @internal\n     */\n    private bindEvents() {\n        this._resizeObserver.observe(this._containerElement);\n        globalThis.addEventListener('unload', this._windowUnloadListener, { passive: true });\n        globalThis.addEventListener('beforeunload', this._windowUnloadListener, { passive: true });\n    }\n\n    /**\n     * Creates Subwindows (if there are any). Throws an error\n     * if popouts are blocked.\n     * @internal\n     */\n    private createSubWindows() {\n        for (let i = 0; i < this.layoutConfig.openPopouts.length; i++) {\n            const popoutConfig = this.layoutConfig.openPopouts[i];\n            this.createPopoutFromPopoutLayoutConfig(popoutConfig);\n        }\n    }\n\n    /**\n     * Debounces resize events\n     * @internal\n     */\n    private handleContainerResize(): void {\n        if (this.resizeWithContainerAutomatically) {\n            this.processResizeWithDebounce();\n        }\n    }\n\n    /**\n     * Debounces resize events\n     * @internal\n     */\n    private processResizeWithDebounce(): void {\n        if (this.resizeDebounceExtendedWhenPossible) {\n            this.checkClearResizeTimeout();\n        }\n\n        if (this._resizeTimeoutId === undefined) {\n            this._resizeTimeoutId = setTimeout(\n                () => {\n                    this._resizeTimeoutId = undefined;\n                    this.beginSizeInvalidation();\n                    this.endSizeInvalidation();\n                },\n                this.resizeDebounceInterval,\n            );\n        }\n    }\n\n    private checkClearResizeTimeout() {\n        if (this._resizeTimeoutId !== undefined) {\n            clearTimeout(this._resizeTimeoutId);\n            this._resizeTimeoutId = undefined;\n        }\n    }\n\n    /**\n     * Determines what element the layout will be created in\n     * @internal\n     */\n    private setContainer() {\n        const bodyElement = document.body;\n        const containerElement = this._containerElement ?? bodyElement;\n\n        if (containerElement === bodyElement) {\n            this.resizeWithContainerAutomatically = true;\n\n            const documentElement = document.documentElement;\n            documentElement.style.height = '100%';\n            documentElement.style.margin = '0';\n            documentElement.style.padding = '0';\n            documentElement.style.overflow = 'clip';\n            bodyElement.style.height = '100%';\n            bodyElement.style.margin = '0';\n            bodyElement.style.padding = '0';\n            bodyElement.style.overflow = 'clip';\n        }\n\n        this._containerElement = containerElement;\n    }\n\n    /**\n     * Called when the window is closed or the user navigates away\n     * from the page\n     * @internal\n     */\n    private onUnload(): void {\n        this.destroy();\n    }\n\n    /**\n     * Adjusts the number of columns to be lower to fit the screen and still maintain minItemWidth.\n     * @internal\n     */\n    private adjustColumnsResponsive() {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMACR20883');\n        } else {\n            this._firstLoad = false;\n            // If there is no min width set, or not content items, do nothing.\n            if (this.useResponsiveLayout() &&\n                !this._updatingColumnsResponsive &&\n                this._groundItem.contentItems.length > 0 &&\n                this._groundItem.contentItems[0].isRow)\n            {\n                if (this._groundItem === undefined || this._width === null) {\n                    throw new UnexpectedUndefinedError('LMACR77412');\n                } else {\n                    // If there is only one column, do nothing.\n                    const columnCount = this._groundItem.contentItems[0].contentItems.length;\n                    if (columnCount <= 1) {\n                        return;\n                    } else {\n                        // If they all still fit, do nothing.\n                        const minItemWidth = this.layoutConfig.dimensions.minItemWidth;\n                        const totalMinWidth = columnCount * minItemWidth;\n                        if (totalMinWidth <= this._width) {\n                            return;\n                        } else {\n                            // Prevent updates while it is already happening.\n                            this._updatingColumnsResponsive = true;\n\n                            // Figure out how many columns to stack, and put them all in the first stack container.\n                            const finalColumnCount = Math.max(Math.floor(this._width / minItemWidth), 1);\n                            const stackColumnCount = columnCount - finalColumnCount;\n\n                            const rootContentItem = this._groundItem.contentItems[0];\n                            const allStacks = this.getAllStacks();\n                            if (allStacks.length === 0) {\n                                throw new AssertError('LMACRS77413')\n                            } else {\n                                const firstStackContainer = allStacks[0];\n                                for (let i = 0; i < stackColumnCount; i++) {\n                                    // Stack from right.\n                                    const column = rootContentItem.contentItems[rootContentItem.contentItems.length - 1];\n                                    this.addChildContentItemsToContainer(firstStackContainer, column);\n                                }\n\n                                this._updatingColumnsResponsive = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Determines if responsive layout should be used.\n     *\n     * @returns True if responsive layout should be used; otherwise false.\n     * @internal\n     */\n    private useResponsiveLayout() {\n        const settings = this.layoutConfig.settings;\n        const alwaysResponsiveMode = settings.responsiveMode === ResponsiveMode.always;\n        const onLoadResponsiveModeAndFirst = settings.responsiveMode === ResponsiveMode.onload && this._firstLoad;\n        return alwaysResponsiveMode || onLoadResponsiveModeAndFirst;\n    }\n\n    /**\n     * Adds all children of a node to another container recursively.\n     * @param container - Container to add child content items to.\n     * @param node - Node to search for content items.\n     * @internal\n     */\n    private addChildContentItemsToContainer(container: ContentItem, node: ContentItem) {\n        const contentItems = node.contentItems;\n        if (node instanceof Stack) {\n            for (let i = 0; i < contentItems.length; i++) {\n                const item = contentItems[i];\n                node.removeChild(item, true);\n                container.addChild(item);\n            }\n        } else {\n            for (let i = 0; i < contentItems.length; i++) {\n                const item = contentItems[i];\n                this.addChildContentItemsToContainer(container, item);\n            }\n        }\n    }\n\n    /**\n     * Finds all the stacks.\n     * @returns The found stack containers.\n     * @internal\n     */\n    private getAllStacks() {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMFASC52778');\n        } else {\n            const stacks: Stack[] = [];\n            this.findAllStacksRecursive(stacks, this._groundItem);\n\n            return stacks;\n        }\n    }\n\n    /** @internal */\n    private findFirstContentItemType(type: ItemType): ContentItem | undefined {\n        if (this._groundItem === undefined) {\n            throw new UnexpectedUndefinedError('LMFFCIT82446');\n        } else {\n            return this.findFirstContentItemTypeRecursive(type, this._groundItem);\n        }\n    }\n\n    /** @internal */\n    private findFirstContentItemTypeRecursive(type: ItemType, node: ContentItem): ContentItem | undefined {\n        const contentItems = node.contentItems;\n        const contentItemCount = contentItems.length;\n        if (contentItemCount === 0) {\n            return undefined;\n        } else {\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                if (contentItem.type === type) {\n                    return contentItem;\n                }\n            }\n\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                const foundContentItem = this.findFirstContentItemTypeRecursive(type, contentItem);\n                if (foundContentItem !== undefined) {\n                    return foundContentItem;\n                }\n            }\n\n            return undefined;\n        }\n    }\n\n    /** @internal */\n    private findFirstContentItemTypeByIdRecursive(type: ItemType, id: string, node: ContentItem): ContentItem | undefined {\n        const contentItems = node.contentItems;\n        const contentItemCount = contentItems.length;\n        if (contentItemCount === 0) {\n            return undefined;\n        } else {\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                if (contentItem.type === type && contentItem.id === id) {\n                    return contentItem;\n                }\n            }\n\n            for (let i = 0; i < contentItemCount; i++) {\n                const contentItem = contentItems[i];\n                const foundContentItem = this.findFirstContentItemTypeByIdRecursive(type, id, contentItem);\n                if (foundContentItem !== undefined) {\n                    return foundContentItem;\n                }\n            }\n\n            return undefined;\n        }\n    }\n\n    /**\n     * Finds all the stack containers.\n     *\n     * @param stacks - Set of containers to populate.\n     * @param node - Current node to process.\n     * @internal\n     */\n    private findAllStacksRecursive(stacks: Stack[], node: ContentItem) {\n        const contentItems = node.contentItems;\n        for (let i = 0; i < contentItems.length; i++) {\n            const item = contentItems[i];\n            if (item instanceof Stack) {\n                stacks.push(item);\n            } else {\n                if (!item.isComponent) {\n                    this.findAllStacksRecursive(stacks, item);\n                }\n            }\n        }\n    }\n\n    /** @internal */\n    private findFirstLocation(selectors: readonly LayoutManager.LocationSelector[]): LayoutManager.Location | undefined {\n        const count = selectors.length;\n        for (let i = 0; i < count; i++) {\n            const selector = selectors[i];\n            const location = this.findLocation(selector);\n            if (location !== undefined) {\n                return location;\n            }\n        }\n        return undefined;\n    }\n\n    /** @internal */\n    private findLocation(selector: LayoutManager.LocationSelector): LayoutManager.Location | undefined {\n        const selectorIndex = selector.index;\n        switch (selector.typeId) {\n            case LayoutManager.LocationSelector.TypeId.FocusedItem: {\n                if (this._focusedComponentItem === undefined) {\n                    return undefined\n                } else {\n                    const parentItem = this._focusedComponentItem.parentItem;\n                    const parentContentItems = parentItem.contentItems;\n                    const parentContentItemCount = parentContentItems.length;\n                    if (selectorIndex === undefined) {\n                        return { parentItem, index: parentContentItemCount };\n                    } else {\n                        const focusedIndex = parentContentItems.indexOf(this._focusedComponentItem);\n                        const index = focusedIndex + selectorIndex;\n                        if (index < 0 || index > parentContentItemCount) {\n                            return undefined;\n                        } else {\n                            return { parentItem, index };\n                        }\n                    }\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.FocusedStack: {\n                if (this._focusedComponentItem === undefined) {\n                    return undefined\n                } else {\n                    const parentItem = this._focusedComponentItem.parentItem;\n                    return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.FirstStack: {\n                const parentItem = this.findFirstContentItemType(ItemType.stack);\n                if (parentItem === undefined) {\n                    return undefined;\n                } else {\n                    return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.FirstRowOrColumn: {\n                let parentItem = this.findFirstContentItemType(ItemType.row);\n                if (parentItem !== undefined) {\n                    return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                } else {\n                    parentItem = this.findFirstContentItemType(ItemType.column);\n                    if (parentItem !== undefined) {\n                        return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                    } else {\n                        return undefined;\n                    }\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.FirstRow: {\n                const parentItem = this.findFirstContentItemType(ItemType.row);\n                if (parentItem === undefined) {\n                    return undefined;\n                } else {\n                    return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.FirstColumn: {\n                const parentItem = this.findFirstContentItemType(ItemType.column);\n                if (parentItem === undefined) {\n                    return undefined;\n                } else {\n                    return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.Empty: {\n                if (this._groundItem === undefined) {\n                    throw new UnexpectedUndefinedError('LMFLRIF18244');\n                } else {\n                    if (this.rootItem !== undefined) {\n                        return undefined;\n                    } else {\n                        if (selectorIndex === undefined || selectorIndex === 0)\n                            return { parentItem: this._groundItem, index: 0 };\n                        else {\n                            return undefined;\n                        }\n                    }\n                }\n            }\n            case LayoutManager.LocationSelector.TypeId.Root: {\n                if (this._groundItem === undefined) {\n                    throw new UnexpectedUndefinedError('LMFLF18244');\n                } else {\n                    const groundContentItems = this._groundItem.contentItems;\n                    if (groundContentItems.length === 0) {\n                        if (selectorIndex === undefined || selectorIndex === 0)\n                            return { parentItem: this._groundItem, index: 0 };\n                        else {\n                            return undefined;\n                        }\n                    } else {\n                        const parentItem = groundContentItems[0];\n                        return this.tryCreateLocationFromParentItem(parentItem, selectorIndex);\n                    }\n                }\n            }\n        }\n    }\n\n    /** @internal */\n    private tryCreateLocationFromParentItem(parentItem: ContentItem,\n        selectorIndex: number | undefined\n    ): LayoutManager.Location | undefined {\n        const parentContentItems = parentItem.contentItems;\n        const parentContentItemCount = parentContentItems.length;\n        if (selectorIndex === undefined) {\n            return { parentItem, index: parentContentItemCount };\n        } else {\n            if (selectorIndex < 0 || selectorIndex > parentContentItemCount) {\n                return undefined;\n            } else {\n                return { parentItem, index: selectorIndex };\n            }\n        }\n    }\n}\n\n/** @public */\nexport namespace LayoutManager {\n    export type BeforeVirtualRectingEvent = (this: void, count: number) => void;\n    export type AfterVirtualRectingEvent = (this: void) => void;\n\n    /** @internal */\n    export interface ConstructorParameters {\n        constructorOrSubWindowLayoutConfig: LayoutConfig | undefined;\n        isSubWindow: boolean;\n        containerElement: HTMLElement | undefined;\n    }\n\n    /** @internal */\n    export function createMaximisePlaceElement(document: Document): HTMLElement {\n        const element = document.createElement('div');\n        element.classList.add(DomConstants.ClassName.MaximisePlace);\n        return element;\n    }\n\n    /** @internal */\n    export function createTabDropPlaceholderElement(document: Document): HTMLElement {\n        const element = document.createElement('div');\n        element.classList.add(DomConstants.ClassName.DropTabPlaceholder);\n        return element;\n    }\n\n    /**\n     * Specifies a location of a ContentItem without referencing the content item.\n     * Used to specify where a new item is to be added\n     * @public\n     */\n    export interface Location {\n        parentItem: ContentItem;\n        index: number;\n    }\n\n    /**\n     * A selector used to specify a unique location in the layout\n     * @public\n     */\n    export interface LocationSelector {\n        /** Specifies selector algorithm */\n        typeId: LocationSelector.TypeId;\n        /** Used by algorithm to determine index in found ContentItem */\n        index?: number;\n    }\n\n    /** @public */\n    export namespace LocationSelector {\n        export const enum TypeId {\n            /** Stack with focused Item. Index specifies offset from index of focused item (eg 1 is the position after focused item) */\n            FocusedItem,\n            /** Stack with focused Item. Index specfies ContentItems index */\n            FocusedStack,\n            /** First stack found in layout */\n            FirstStack,\n            /** First Row or Column found in layout (rows are searched first) */\n            FirstRowOrColumn,\n            /** First Row in layout */\n            FirstRow,\n            /** First Column in layout */\n            FirstColumn,\n            /** Finds a location if layout is empty. The found location will be the root ContentItem. */\n            Empty,\n            /** Finds root if layout is empty, otherwise a child under root */\n            Root,\n        }\n    }\n\n    /**\n     * Default LocationSelectors array used if none is specified.  Will always find a location.\n     * @public\n     */\n    export const defaultLocationSelectors: readonly LocationSelector[] = [\n        { typeId: LocationSelector.TypeId.FocusedStack, index: undefined },\n        { typeId: LocationSelector.TypeId.FirstStack, index: undefined },\n        { typeId: LocationSelector.TypeId.FirstRowOrColumn, index: undefined },\n        { typeId: LocationSelector.TypeId.Root, index: undefined },\n    ];\n\n    /**\n     * LocationSelectors to try to get location next to existing focused item\n     * @public\n     */\n    export const afterFocusedItemIfPossibleLocationSelectors: readonly LocationSelector[] = [\n        { typeId: LocationSelector.TypeId.FocusedItem, index: 1 },\n        { typeId: LocationSelector.TypeId.FirstStack, index: undefined },\n        { typeId: LocationSelector.TypeId.FirstRowOrColumn, index: undefined },\n        { typeId: LocationSelector.TypeId.Root, index: undefined },\n    ];\n}\n","/**\n * Minifies and unminifies configs by replacing frequent keys\n * and values with one letter substitutes. Config options must\n * retain array position/index, add new options at the end.\n * @internal\n*/\n\nexport namespace ConfigMinifier {\n\n    export type YY = 'id' | 'title';\n    export const enum XX {\n        id = 'id'\n    }\n    const keys: readonly string[] = [\n        'settings',\n        'hasHeaders',\n        'constrainDragToContainer',\n        'selectionEnabled',\n        'dimensions',\n        'borderWidth',\n        'minItemHeight',\n        'minItemWidth',\n        'headerHeight',\n        'dragProxyWidth',\n        'dragProxyHeight',\n        'labels',\n        'close',\n        'maximise',\n        'minimise',\n        'popout',\n        'content',\n        'componentType',\n        'componentState',\n        'id',\n        'width',\n        'type',\n        'height',\n        'isClosable',\n        'title',\n        'popoutWholeStack',\n        'openPopouts',\n        'parentId',\n        'activeItemIndex',\n        'reorderEnabled',\n        'borderGrabWidth',\n\n\n\n\n        //Maximum 36 entries, do not cross this line!\n    ];\n\n    const values: readonly (boolean | string)[] = [\n        true,\n        false,\n        'row',\n        'column',\n        'stack',\n        'component',\n        'close',\n        'maximise',\n        'minimise',\n        'open in new window'\n    ];\n\n    export function checkInitialise(): void {\n        if (keys.length > 36) {\n            throw new Error('Too many keys in config minifier map');\n        }\n    }\n\n    export function translateObject(from: Record<string, unknown>, minify: boolean): Record<string, unknown> {\n        const to: Record<string, unknown> = {};\n        for (const key in from) {\n            if (from.hasOwnProperty(key)) { // In case something has extended Object prototypes\n                let translatedKey: string;\n                if (minify) {\n                    translatedKey = minifyKey(key);\n                } else {\n                    translatedKey = unminifyKey(key);\n                }\n\n                const fromValue = from[key];\n                to[translatedKey] = translateValue(fromValue, minify);\n            }\n        }\n\n        return to;\n    }\n\n    function translateArray(from: unknown[], minify: boolean) {\n        const length = from.length;\n        const to = new Array<unknown>(length);\n        for (let i = 0; i < length; i++) {\n            // In original code, array indices were numbers and not translated\n            const fromValue = from[i];\n            to[i] = translateValue(fromValue, minify);\n        }\n        return to;\n    }\n\n    function translateValue(from: unknown, minify: boolean) {\n        if (typeof from === 'object') {\n            if (from === null) {\n                return null;\n            } else {\n                if (Array.isArray(from)) {\n                    return translateArray(from, minify);\n                } else {\n                    return translateObject(from as Record<string, unknown>, minify);\n                }\n            }\n        } else {\n            if (minify) {\n                return minifyValue(from);\n            } else {\n                return unminifyValue(from);\n            }\n        }\n    }\n\n    function minifyKey(value: string) {\n        /**\n         * If a value actually is a single character, prefix it\n         * with ___ to avoid mistaking it for a minification code\n         */\n        if (typeof value === 'string' && value.length === 1) {\n            return '___' + value;\n        }\n    \n        const index = indexOfKey(value);\n    \n        /**\n         * value not found in the dictionary, return it unmodified\n         */\n        if (index === -1) {\n            return value;\n    \n            /**\n             * value found in dictionary, return its base36 counterpart\n             */\n        } else {\n            return index.toString(36);\n        }\n    }\n\n    function unminifyKey(key: string) {\n        /**\n         * value is a single character. Assume that it's a translation\n         * and return the original value from the dictionary\n         */\n        if (key.length === 1) {\n            return keys[parseInt(key, 36)];\n        }\n    \n        /**\n         * value originally was a single character and was prefixed with ___\n         * to avoid mistaking it for a translation. Remove the prefix\n         * and return the original character\n         */\n        if (key.substr(0, 3) === '___') {\n            return key[3];\n        }\n        /**\n         * value was not minified\n         */\n        return key;\n    }\n\n    function minifyValue(value: unknown) {\n        /**\n         * If a value actually is a single character, prefix it\n         * with ___ to avoid mistaking it for a minification code\n         */\n        if (typeof value === 'string' && value.length === 1) {\n            return '___' + value;\n        }\n    \n        const index = indexOfValue(value);\n    \n        /**\n         * value not found in the dictionary, return it unmodified\n         */\n        if (index === -1) {\n            return value;\n    \n            /**\n             * value found in dictionary, return its base36 counterpart\n             */\n        } else {\n            return index.toString(36);\n        }\n    }\n\n    function unminifyValue(value: unknown) {\n        /**\n         * value is a single character. Assume that it's a translation\n         * and return the original value from the dictionary\n         */\n        if (typeof value === 'string' && value.length === 1) {\n            return values[parseInt(value, 36)];\n        }\n\n        /**\n         * value originally was a single character and was prefixed with ___\n         * to avoid mistaking it for a translation. Remove the prefix\n         * and return the original character\n         */\n        if (typeof value === 'string' && value.substr(0, 3) === '___') {\n            return value[3];\n        }\n        /**\n         * value was not minified\n         */\n        return value;\n    }\n\n    function indexOfKey(key: string) {\n        for (let i = 0; i < keys.length; i++) {\n            if (keys[i] === key) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    function indexOfValue(value: unknown) {\n        for (let i = 0; i < values.length; i++) {\n            if (values[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}\n","import { DomConstants } from './dom-constants';\nimport { EventEmitter } from './event-emitter';\n\n/** @internal */\nexport class DragListener extends EventEmitter {\n    private _timeout: ReturnType<typeof setTimeout> | undefined;\n    private _allowableTargets: HTMLElement[];\n    private _oDocument: Document;\n    private _eBody: HTMLElement;\n    private _nDelay: number;\n    private _nDistance: number;\n    private _nX: number;\n    private _nY: number;\n    private _nOriginalX: number;\n    private _nOriginalY: number;\n    private _dragging: boolean;\n    private _pointerTracking = false;\n\n    private _pointerDownEventListener = (ev: PointerEvent) => this.onPointerDown(ev);\n    private _pointerMoveEventListener = (ev: PointerEvent) => this.onPointerMove(ev);\n    private _pointerUpEventListener = (ev: PointerEvent) => this.onPointerUp(ev);\n\n    constructor(private _eElement: HTMLElement, extraAllowableChildTargets: HTMLElement[]) {\n        super();\n\n        this._timeout = undefined;\n\n        this._allowableTargets = [_eElement, ...extraAllowableChildTargets];\n        this._oDocument = document;\n        this._eBody = document.body;\n\n        /**\n         * The delay after which to start the drag in milliseconds\n         * Do NOT make too short (previous value of 200 was not long enough for my touchpad)\n         * Should generally rely on the mouse move to start drag.  Not this delay.\n         */\n        this._nDelay = 1800;\n\n        /**\n         * The distance the mouse needs to be moved to qualify as a drag\n         * Previous comment: works better with delay only\n         * ???\n         * Probably somehow needs tuning for different devices\n         */\n        this._nDistance = 10;\n\n        this._nX = 0;\n        this._nY = 0;\n\n        this._nOriginalX = 0;\n        this._nOriginalY = 0;\n\n        this._dragging = false;\n\n        this._eElement.addEventListener('pointerdown', this._pointerDownEventListener, { passive: true });\n    }\n\n    destroy(): void {\n        this.checkRemovePointerTrackingEventListeners();\n\n        this._eElement.removeEventListener('pointerdown', this._pointerDownEventListener);\n    }\n\n    cancelDrag(): void {\n        this.processDragStop(undefined);\n    }\n\n    private onPointerDown(oEvent: PointerEvent) {\n        if (this._allowableTargets.includes(oEvent.target as HTMLElement) && oEvent.isPrimary) {\n            const coordinates = this.getPointerCoordinates(oEvent);\n            this.processPointerDown(coordinates);\n        }\n    }\n\n    private processPointerDown(coordinates: DragListener.PointerCoordinates) {\n        this._nOriginalX = coordinates.x;\n        this._nOriginalY = coordinates.y;\n\n        this._oDocument.addEventListener('pointermove', this._pointerMoveEventListener);\n        this._oDocument.addEventListener('pointerup', this._pointerUpEventListener, { passive: true });\n        this._pointerTracking = true;\n\n        this._timeout = setTimeout(\n            () => {\n                try {\n                    this.startDrag()\n                }\n                catch (err) {\n                    console.error(err);\n                    throw err;\n                }\n            }\n            , this._nDelay);\n    }\n\n    private onPointerMove(oEvent: PointerEvent) {\n        if (this._pointerTracking) {\n            this.processDragMove(oEvent);\n            oEvent.preventDefault();\n        }\n    }\n\n    private processDragMove(dragEvent: PointerEvent) {\n        this._nX = dragEvent.pageX - this._nOriginalX;\n        this._nY = dragEvent.pageY - this._nOriginalY;\n\n        if (this._dragging === false) {\n            if (\n                Math.abs(this._nX) > this._nDistance ||\n                Math.abs(this._nY) > this._nDistance\n            ) {\n                this.startDrag();\n            }\n        }\n\n        if (this._dragging) {\n            this.emit('drag', this._nX, this._nY, dragEvent);\n        }\n    }\n\n    private onPointerUp(oEvent: PointerEvent) {\n        this.processDragStop(oEvent);\n    }\n\n    private processDragStop(dragEvent?: PointerEvent) {\n        if (this._timeout !== undefined) {\n            clearTimeout(this._timeout);\n            this._timeout = undefined;\n        }\n\n        this.checkRemovePointerTrackingEventListeners();\n    \n        if (this._dragging === true) {\n            this._eBody.classList.remove(DomConstants.ClassName.Dragging);\n            this._eElement.classList.remove(DomConstants.ClassName.Dragging);\n            this._oDocument.querySelector('iframe')?.style.setProperty('pointer-events', '');\n            this._dragging = false;\n            this.emit('dragStop', dragEvent);\n        }\n    }\n\n    private checkRemovePointerTrackingEventListeners(): void {\n        if (this._pointerTracking) {\n            this._oDocument.removeEventListener('pointermove', this._pointerMoveEventListener);\n            this._oDocument.removeEventListener('pointerup', this._pointerUpEventListener);\n            this._pointerTracking = false;\n        }    \n    }\n\n    private startDrag() {\n        if (this._timeout !== undefined) {\n            clearTimeout(this._timeout);\n            this._timeout = undefined;\n        }\n        this._dragging = true;\n        this._eBody.classList.add(DomConstants.ClassName.Dragging);\n        this._eElement.classList.add(DomConstants.ClassName.Dragging);\n        this._oDocument.querySelector('iframe')?.style.setProperty('pointer-events', 'none');\n        this.emit('dragStart', this._nOriginalX, this._nOriginalY);\n    }\n\n    private getPointerCoordinates(event: PointerEvent) {\n        const result: DragListener.PointerCoordinates = {\n            x: event.pageX,\n            y: event.pageY\n        };\n        return result;\n    }\n\n}\n\n/** @internal */\nexport namespace DragListener {\n    export interface PointerCoordinates {\n        x: number,\n        y: number,\n    }\n}","import { BrowserPopout } from '../controls/browser-popout';\nimport { Tab } from '../controls/tab';\nimport { ComponentItem } from '../items/component-item';\n\n/**\n * A generic and very fast EventEmitter implementation. On top of emitting the actual event it emits an\n * {@link (EventEmitter:namespace).ALL_EVENT} event for every event triggered. This allows to hook into it and proxy events forwards\n * @public\n */\nexport class EventEmitter {\n    /** @internal */\n    private _allEventSubscriptions: EventEmitter.UnknownCallback[] = [];\n    /** @internal */\n    private _subscriptionsMap = new Map<string, EventEmitter.UnknownCallback[]>();\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tryBubbleEvent(name: string, args: unknown[]): void {\n        // overridden by ContentItem\n    }\n\n    /**\n     * Emit an event and notify listeners\n     *\n     * @param eventName - The name of the event\n     * @param args - Additional arguments that will be passed to the listener\n     */\n    emit<K extends keyof EventEmitter.EventParamsMap>(eventName: K, ...args: EventEmitter.EventParamsMap[K]): void {\n        let subcriptions = this._subscriptionsMap.get(eventName);\n\n        if (subcriptions !== undefined) {\n            subcriptions = subcriptions.slice();\n            for (let i = 0; i < subcriptions.length; i++) {\n                const subscription = subcriptions[i];\n                subscription(...args);\n            }\n        }\n\n        this.emitAllEvent(eventName, args);\n        this.tryBubbleEvent(eventName, args);\n    }\n\n    /** @internal */\n    emitUnknown(eventName: string, ...args: EventEmitter.UnknownParams): void {\n        let subs = this._subscriptionsMap.get(eventName);\n\n        if (subs !== undefined) {\n            subs = subs.slice();\n            for (let i = 0; i < subs.length; i++) {\n                subs[i](...args);\n            }\n        }\n\n        this.emitAllEvent(eventName, args);\n        this.tryBubbleEvent(eventName, args);\n    }\n\n    /* @internal **/\n    emitBaseBubblingEvent<K extends keyof EventEmitter.EventParamsMap>(eventName: K): void {\n        const event = new EventEmitter.BubblingEvent(eventName, this);\n        this.emitUnknown(eventName, event);\n    }\n\n    /** @internal */\n    emitUnknownBubblingEvent(eventName: string): void {\n        const event = new EventEmitter.BubblingEvent(eventName, this);\n        this.emitUnknown(eventName, event);\n    }\n\n    /**\n     * Removes a listener for an event.\n     * @param eventName - The name of the event\n     * @param callback - The previously registered callback method (optional)\n     */\n    removeEventListener<K extends keyof EventEmitter.EventParamsMap>(eventName: K, callback: EventEmitter.Callback<K>): void {\n        const unknownCallback = callback as EventEmitter.UnknownCallback;\n        this.removeUnknownEventListener(eventName, unknownCallback);\n    }\n\n    off<K extends keyof EventEmitter.EventParamsMap>(eventName: K, callback: EventEmitter.Callback<K>): void {\n        this.removeEventListener(eventName, callback);\n    }\n\n    /**\n     * Alias for off\n     */\n    unbind = this.removeEventListener;\n\n    /**\n     * Alias for emit\n     */\n    trigger = this.emit;\n\n    /**\n     * Listen for events\n     *\n     * @param eventName - The name of the event to listen to\n     * @param callback - The callback to execute when the event occurs\n     */\n    addEventListener<K extends keyof EventEmitter.EventParamsMap>(eventName: K, callback: EventEmitter.Callback<K>): void {\n        const unknownCallback = callback as EventEmitter.UnknownCallback;\n        this.addUnknownEventListener(eventName, unknownCallback);\n    }\n\n    on<K extends keyof EventEmitter.EventParamsMap>(eventName: K, callback: EventEmitter.Callback<K>): void {\n        this.addEventListener(eventName, callback);\n    }\n\n    /** @internal */\n    private addUnknownEventListener(eventName: string, callback: EventEmitter.UnknownCallback): void {\n        if (eventName === EventEmitter.ALL_EVENT) {\n            this._allEventSubscriptions.push(callback);\n        } else {\n            let subscriptions = this._subscriptionsMap.get(eventName);\n            if (subscriptions !== undefined) {\n                subscriptions.push(callback);\n            } else {\n                subscriptions = [callback];\n                this._subscriptionsMap.set(eventName, subscriptions);\n            }\n        }\n    }\n\n    /** @internal */\n    private removeUnknownEventListener(eventName: string, callback: EventEmitter.UnknownCallback): void {\n        if (eventName === EventEmitter.ALL_EVENT) {\n            this.removeSubscription(eventName, this._allEventSubscriptions, callback);\n        } else {\n            const subscriptions = this._subscriptionsMap.get(eventName);\n            if (subscriptions === undefined) {\n                throw new Error('No subscribtions to unsubscribe for event ' + eventName);\n            } else {\n                this.removeSubscription(eventName, subscriptions, callback);\n            }\n        }\n    }\n\n    /** @internal */\n    private removeSubscription(eventName: string, subscriptions: EventEmitter.UnknownCallback[], callback: EventEmitter.UnknownCallback) {\n        const idx = subscriptions.indexOf(callback);\n        if (idx < 0) {\n            throw new Error('Nothing to unbind for ' + eventName);\n        } else {\n            subscriptions.splice(idx, 1);\n        }\n    }\n\n    /** @internal */\n    private emitAllEvent(eventName: string, args: unknown[]) {\n        const allEventSubscriptionsCount = this._allEventSubscriptions.length;\n        if (allEventSubscriptionsCount > 0) {\n            const unknownArgs = args.slice() as EventEmitter.UnknownParams;\n            unknownArgs.unshift(eventName);\n\n            const allEventSubcriptions = this._allEventSubscriptions.slice();\n\n            for (let i = 0; i < allEventSubscriptionsCount; i++) {\n                allEventSubcriptions[i](...unknownArgs);\n            }\n        }\n    }\n}\n\n/** @public */\nexport namespace EventEmitter {\n    /**\n     * The name of the event that's triggered for every event\n     */\n    export const ALL_EVENT = '__all';\n\n    export const headerClickEventName = 'stackHeaderClick';\n    export const headerTouchStartEventName = 'stackHeaderTouchStart';\n\n    /** @internal */\n    export type UnknownCallback = (this: void, ...args: UnknownParams) => void;\n    export type Callback<K extends keyof EventEmitter.EventParamsMap> = (this: void, ...args: EventParamsMap[K]) => void;\n\n    export interface EventParamsMap {\n        \"__all\": UnknownParams;\n        \"activeContentItemChanged\": ComponentItemParam;\n        \"close\": NoParams;\n        \"closed\": NoParams;\n        \"destroy\": NoParams;\n        \"drag\": DragParams;\n        \"dragStart\": DragStartParams;\n        \"dragStop\": DragStopParams;\n        \"hide\": NoParams;\n        \"initialised\": NoParams;\n        \"itemDropped\": ComponentItemParam;\n        \"maximised\": NoParams;\n        \"minimised\": NoParams;\n        \"open\": NoParams;\n        \"popIn\": NoParams;\n        \"resize\": NoParams;\n        \"show\": NoParams;\n        /** @deprecated - use show instead */\n        \"shown\": NoParams;\n        \"stateChanged\": NoParams;\n        \"tab\": TabParam;\n        \"tabCreated\": TabParam;\n        \"titleChanged\": StringParam;\n        \"windowClosed\": PopoutParam;\n        \"windowOpened\": PopoutParam;\n        \"beforeComponentRelease\": BeforeComponentReleaseParams;\n        \"beforeItemDestroyed\": BubblingEventParam;\n        \"itemCreated\": BubblingEventParam;\n        \"itemDestroyed\": BubblingEventParam;\n        \"focus\": BubblingEventParam;\n        \"blur\": BubblingEventParam;\n        \"stackHeaderClick\": ClickBubblingEventParam;\n        \"stackHeaderTouchStart\": TouchStartBubblingEventParam;\n        \"userBroadcast\": UnknownParams;\n    }\n\n    export type UnknownParams = unknown[];\n    export type NoParams = [];\n    export type UnknownParam = [unknown];\n    export type PopoutParam = [BrowserPopout];\n    export type ComponentItemParam = [ComponentItem];\n    export type TabParam = [Tab];\n    export type BubblingEventParam = [EventEmitter.BubblingEvent]\n    export type StringParam = [string];\n    export type DragStartParams = [originalX: number, originalY: number];\n    export type DragStopParams = [event: PointerEvent | undefined];\n    export type DragParams = [offsetX: number, offsetY: number, event: PointerEvent];\n    export type BeforeComponentReleaseParams = [component: unknown];\n    export type ClickBubblingEventParam = [ClickBubblingEvent];\n    export type TouchStartBubblingEventParam = [TouchStartBubblingEvent];\n\n    export class BubblingEvent {\n        /** @internal */\n        private _isPropagationStopped = false;\n\n        get name(): string { return this._name; }\n        get target(): EventEmitter { return this._target; }\n        /** @deprecated Use {@link (EventEmitter:namespace).(BubblingEvent:class).target} instead */\n        get origin(): EventEmitter { return this._target; }\n        get isPropagationStopped(): boolean { return this._isPropagationStopped; }\n\n        /** @internal */\n        constructor(\n            /** @internal */\n            private readonly _name: string,\n            /** @internal */\n            private readonly _target: EventEmitter) {\n        }\n\n        stopPropagation(): void {\n            this._isPropagationStopped = true;\n        }\n    }\n\n    export class ClickBubblingEvent extends BubblingEvent {\n        get mouseEvent(): MouseEvent { return this._mouseEvent; }\n\n        /** @internal */\n        constructor(name: string, target: EventEmitter,\n            /** @internal */\n            private readonly _mouseEvent: MouseEvent\n        ) {\n            super(name, target);\n        }\n    }\n\n    export class TouchStartBubblingEvent extends BubblingEvent {\n        get touchEvent(): TouchEvent { return this._touchEvent; }\n\n        /** @internal */\n        constructor(name: string, target: EventEmitter,\n            /** @internal */\n            private readonly _touchEvent: TouchEvent\n        ) {\n            super(name, target);\n        }\n    }\n}\n","import { UnexpectedNullError } from '../errors/internal-error';\nimport { LayoutManager } from '../layout-manager';\nimport { EventEmitter } from './event-emitter';\n\n// Add our ChildEvent to WindowEventMap for type safety\n/** @public */\ndeclare global {\n    interface WindowEventMap {\n        [EventHub.ChildEventName]: CustomEvent<EventHub.ChildEventDetail>;\n    }\n}\n\n/**\n * An EventEmitter singleton that propagates events\n * across multiple windows. This is a little bit trickier since\n * windows are allowed to open childWindows in their own right.\n *\n * This means that we deal with a tree of windows. Therefore, we do the event propagation in two phases:\n *\n * - Propagate events from this layout to the parent layout\n *   - Repeat until the event arrived at the root layout\n * - Propagate events to this layout and to all children\n *   - Repeat until all layouts got the event\n *\n * **WARNING**: Only userBroadcast events are propagated between windows.\n * This means the you have to take care of propagating state changes between windows yourself.\n *\n * @public\n */\nexport class EventHub extends EventEmitter {\n\n    /** @internal */\n    private _childEventListener = (childEvent: CustomEvent<EventHub.ChildEventDetail>) => this.onEventFromChild(childEvent);\n\n    /**\n     * Creates a new EventHub instance\n     * @param _layoutManager - the layout manager to synchronize between the windows\n     * @internal\n     */\n    constructor(\n        /** @internal */\n        private _layoutManager: LayoutManager\n    ) {\n        super();\n        globalThis.addEventListener(EventHub.ChildEventName, this._childEventListener, { passive: true });\n    }\n\n    /**\n     * Emit an event and notify listeners\n     *\n     * @param eventName - The name of the event\n     * @param args - Additional arguments that will be passed to the listener\n     * @public\n     */\n    override emit<K extends keyof EventEmitter.EventParamsMap>(eventName: K, ...args: EventEmitter.EventParamsMap[K]): void {\n        if (eventName === 'userBroadcast') {\n            // Explicitly redirect the user broadcast to our overridden method.\n            this.emitUserBroadcast(...args);\n        } else {\n            super.emit(eventName, ...args);\n        }\n    }\n\n    /**\n     * Broadcasts a message to all other currently opened windows.\n     * @public\n     */\n    emitUserBroadcast(...args: EventEmitter.UnknownParams): void {\n        // Step 1: Bubble up the event\n        this.handleUserBroadcastEvent('userBroadcast', args);\n    }\n\n    /**\n     * Destroys the EventHub\n     * @internal\n     */\n    destroy(): void {\n        globalThis.removeEventListener(EventHub.ChildEventName, this._childEventListener);\n    }\n\n    /**\n     * Internal processor to process local events.\n     * @internal\n     */\n    private handleUserBroadcastEvent(eventName: string, args: unknown[]) {\n        if (this._layoutManager.isSubWindow) {\n            // We are a sub window and received an event from one of our children.\n            // So propagate it to the Root.\n            this.propagateToParent(eventName, args);\n        } else {\n            // We are the root window, propagate it to the subtree below us.\n            this.propagateToThisAndSubtree(eventName, args);\n        }\n    }\n\n    /**\n     * Callback for child events raised on the window\n     * @internal\n     */\n    private onEventFromChild(event: CustomEvent<EventHub.ChildEventDetail>) {\n        const detail = event.detail;\n        this.handleUserBroadcastEvent(detail.eventName, detail.args);\n    }\n\n    /**\n     * Propagates the event to the parent by emitting\n     * it on the parent's DOM window\n     * @internal\n     */\n    private propagateToParent(eventName: string, args: unknown[]) {\n        const detail: EventHub.ChildEventDetail = {\n            layoutManager: this._layoutManager,\n            eventName,\n            args: args,\n        }\n\n        const eventInit: EventHub.ChildEventInit = {\n            bubbles: true,\n            cancelable: true,\n            detail,\n        };\n\n        const event = new CustomEvent<EventHub.ChildEventDetail>(EventHub.ChildEventName, eventInit);\n        const opener = globalThis.opener;\n        if (opener === null) {\n            throw new UnexpectedNullError('EHPTP15778')\n        }\n\n        opener.dispatchEvent(event);\n    }\n\n    /**\n     * Propagate events to the whole subtree under this event hub.\n     * @internal\n     */\n    private propagateToThisAndSubtree(eventName: string, args: unknown[]) {\n        this.emitUnknown(eventName, ...args);\n        for (let i = 0; i < this._layoutManager.openPopouts.length; i++) {\n            const childGl = this._layoutManager.openPopouts[i].getGlInstance();\n\n            if (childGl) {\n                childGl.eventHub.propagateToThisAndSubtree(eventName, args);\n            }\n        }\n    }\n}\n\n/** @public */\nexport namespace EventHub {\n\n    /** @internal */\n    export const ChildEventName = 'gl_child_event';\n\n    /** @internal */\n    export type ChildEventDetail = {\n        layoutManager: LayoutManager;\n        eventName: string;\n        args: unknown[];\n    };\n\n    /** @internal */\n    export type ChildEventInit = CustomEventInit<ChildEventDetail>;\n}\n","import { AssertError } from '../errors/internal-error';\n\n/** @public */\nexport const enum I18nStringId {\n    PopoutCannotBeCreatedWithGroundItemConfig,\n    PleaseRegisterAConstructorFunction,\n    ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned,\n    ComponentIsAlreadyRegistered,\n    ComponentIsNotVirtuable,\n    VirtualComponentDoesNotHaveRootHtmlElement,\n    ItemConfigIsNotTypeComponent,\n}\n\n/** @public */\nexport namespace I18nStrings {\n    /** @internal */\n    let initialised = false;\n\n    /** @internal */\n    interface Info {\n        readonly id: I18nStringId;\n        readonly default: string;\n    }\n\n    /** @internal */\n    type InfosObject = { [id in keyof typeof I18nStringId]: Info };\n\n    /** @internal */\n    const infosObject: InfosObject = {\n        PopoutCannotBeCreatedWithGroundItemConfig: {\n            id: I18nStringId.PopoutCannotBeCreatedWithGroundItemConfig,\n            default: 'Popout cannot be created with ground ItemConfig'\n        },\n        PleaseRegisterAConstructorFunction: {\n            id: I18nStringId.PleaseRegisterAConstructorFunction,\n            default: 'Please register a constructor function'\n        },\n        ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned: {\n            id: I18nStringId.ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned,\n            default: 'Component type not registered and BindComponentEvent handler not assigned',\n        },\n        ComponentIsAlreadyRegistered: {\n            id: I18nStringId.ComponentIsAlreadyRegistered,\n            default: 'Component is already registered',\n        },\n        ComponentIsNotVirtuable: {\n            id: I18nStringId.ComponentIsNotVirtuable,\n            default: 'Component is not virtuable. Requires rootHtmlElement field/getter',\n        },\n        VirtualComponentDoesNotHaveRootHtmlElement: {\n            id: I18nStringId.VirtualComponentDoesNotHaveRootHtmlElement,\n            default: 'Virtual component does not have getter \"rootHtmlElement\"',\n        },\n        ItemConfigIsNotTypeComponent: {\n            id: I18nStringId.ItemConfigIsNotTypeComponent,\n            default: 'ItemConfig is not of type component',\n        },\n    }\n\n    export const idCount = Object.keys(infosObject).length;\n    /** @internal */\n    const infos = Object.values(infosObject);\n\n    export function checkInitialise(): void {\n        if (!initialised) {\n            for (let i = 0; i < idCount; i++) {\n                const info = infos[i];\n                if (info.id !== i) {\n                    throw new AssertError('INSI00110', `${i}: ${info.id}`);\n                } else {\n                    i18nStrings[i] = info.default;\n                }\n            }\n        }\n        initialised = true;\n    }\n}\n\n/** @public */\nexport const i18nStrings = new Array<string>(I18nStrings.idCount);\n","import { LeftAndTop } from './types';\nimport { pixelsToNumber } from './utils';\n\n/** @internal */\nexport interface JQueryOffset {\n    top: number;\n    left: number;    \n}\n\n/** @internal */\nexport function getJQueryOffset(element: HTMLElement): JQueryOffset {\n    const rect = element.getBoundingClientRect();\n    return {\n        top: rect.top + document.body.scrollTop,\n        left: rect.left + document.body.scrollLeft,\n    }\n}\n\n/** @internal */\nexport function getJQueryLeftAndTop(element: HTMLElement): LeftAndTop {\n    const style = getComputedStyle(element, null);\n    const leftAndTop: LeftAndTop = {\n        left: pixelsToNumber(style.left),\n        top: pixelsToNumber(style.top),\n    }\n    return leftAndTop;\n}\n","/** @public */\nexport namespace StyleConstants {\n    export const defaultComponentBaseZIndex = 'auto';\n    export const defaultComponentDragZIndex = '32';\n    export const defaultComponentStackMaximisedZIndex = '41';\n}\n","import { StyleConstants } from './style-constants';\n\n/** @internal */\nexport type WidthOrHeightPropertyName = 'width' | 'height';\n\n/** @internal */\nexport namespace WidthOrHeightPropertyName {\n    export const width = 'width';\n    export const height = 'height';\n}\n\n/** @internal */\nexport interface WidthAndHeight {\n    width: number;\n    height: number;\n}\n\n/** @internal */\nexport interface LeftAndTop {\n    left: number;\n    top: number;\n}\n\n/** @public */\nexport type Side = 'top' | 'left' | 'right' | 'bottom';\n/** @public */\nexport namespace Side {\n    export const top = 'top';\n    export const left = 'left';\n    export const right = 'right';\n    export const bottom = 'bottom';\n}\n\n/** @public */\nexport type LogicalZIndex = 'base' | 'drag' | 'stackMaximised';\n/** @public */\nexport namespace LogicalZIndex {\n    export const base = 'base';\n    export const drag = 'drag';\n    export const stackMaximised = 'stackMaximised';\n}\n\n/** @public */\nexport const LogicalZIndexToDefaultMap = {\n    base: StyleConstants.defaultComponentBaseZIndex,\n    drag: StyleConstants.defaultComponentDragZIndex,\n    stackMaximised: StyleConstants.defaultComponentStackMaximisedZIndex,\n}\n\n/** @internal */\nexport interface Rect {\n    left: number,\n    top: number,\n    width: number,\n    height: number,\n}\n\n/** @internal */\nexport interface AreaLinkedRect {\n    x1: number, // left\n    x2: number, // nextLeft\n    y1: number, // top\n    y2: number, // nextTop\n}\n\n/** @public */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type JsonValue = string | number | boolean | null | Json | object | JsonValueArray;\n/** @public */\nexport interface Json {\n    [name: string]: JsonValue;\n}\n/** @public */\nexport type JsonValueArray = Array<JsonValue>\n/** @public */\nexport namespace JsonValue {\n    export function isJson(value: JsonValue): value is Json {\n        return isJsonObject(value);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    export function isJsonObject(value: JsonValue): value is Json | object {\n        return !Array.isArray(value) && value !== null && typeof value === 'object';\n    }\n}\n\n/** @public */\nexport type ItemType = 'ground' | 'row' | 'column' | 'stack' | 'component';\n\n/** @public */\nexport namespace ItemType {\n    export const ground = 'ground';\n    export const row = 'row';\n    export const column = 'column';\n    export const stack = 'stack';\n    export const component = 'component';\n}\n\n/** @public */\nexport type ResponsiveMode = 'none' | 'always' | 'onload';\n/** @public */\nexport namespace ResponsiveMode {\n    export const none = 'none';\n    export const always = 'always';\n    export const onload = 'onload';\n}\n","import { WidthAndHeight } from './types';\n\n/** @internal */\nexport function numberToPixels(value: number): string {\n    return value.toString(10) + 'px';\n}\n\n/** @internal */\nexport function pixelsToNumber(value: string): number {\n    const numberStr = value.replace(\"px\", \"\");\n    return parseFloat(numberStr);\n}\n\n/** @internal */\nexport function getElementWidth(element: HTMLElement): number {\n    return element.offsetWidth;\n}\n\n/** @internal */\nexport function setElementWidth(element: HTMLElement, width: number): void {\n    const widthAsPixels = numberToPixels(width);\n    element.style.width = widthAsPixels;\n}\n\n/** @internal */\nexport function getElementHeight(element: HTMLElement): number {\n    return element.offsetHeight;\n}\n\n/** @internal */\nexport function setElementHeight(element: HTMLElement, height: number): void {\n    const heightAsPixels = numberToPixels(height);\n    element.style.height = heightAsPixels;\n}\n\n/** @internal */\nexport function getElementWidthAndHeight(element: HTMLElement): WidthAndHeight {\n    return {\n        width: element.offsetWidth,\n        height: element.offsetHeight,\n    };\n}\n\n/** @internal */\nexport function setElementDisplayVisibility(element: HTMLElement, visible: boolean): void {\n    if (visible) {\n        element.style.display = '';\n    } else {\n        element.style.display = 'none';\n    }\n}\n\n/** @internal */\nexport function ensureElementPositionAbsolute(element: HTMLElement): void {\n    const absolutePosition = 'absolute';\n    if (element.style.position !== absolutePosition) {\n        element.style.position = absolutePosition;\n    }\n}\n\n/**\n * Replacement for JQuery $.extend(target, obj)\n * @internal\n*/\nexport function extend(target: Record<string, unknown>, obj: Record<string, unknown>): Record<string, unknown> {\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            target[key] = obj[key];\n        }\n    }\n    return target;\n}\n\n/**\n * Replacement for JQuery $.extend(true, target, obj)\n * @internal\n*/\nexport function deepExtend(target: Record<string, unknown>, obj: Record<string, unknown> | undefined): Record<string, unknown> {\n    if (obj !== undefined) {\n        for (const key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                const value = obj[key];\n                const existingTarget = target[key];\n                target[key] = deepExtendValue(existingTarget, value);\n            }\n        }\n    }\n\n    return target;\n}\n\n/** @internal */\nexport function deepExtendValue(existingTarget: unknown, value: unknown): unknown {\n    if (typeof value !== 'object') {\n        return value;\n    } else {\n        if (Array.isArray(value)) {\n            const length = value.length;\n            const targetArray = new Array<unknown>(length);\n            for (let i = 0; i < length; i++) {\n                const element = value[i];\n                targetArray[i] = deepExtendValue({}, element);\n            }\n            return targetArray;\n        } else {\n            if (value === null) {\n                return null;\n            } else {\n                const valueObj = value as Record<string, unknown>;\n                if (existingTarget === undefined) {\n                    return deepExtend({}, valueObj); // overwrite\n                } else {\n                    if (typeof existingTarget !== \"object\") {\n                        return deepExtend({}, valueObj); // overwrite\n                    } else {\n                        if (Array.isArray(existingTarget)) {\n                            return deepExtend({}, valueObj); // overwrite\n                        } else {\n                            if (existingTarget === null) {\n                                return deepExtend({}, valueObj); // overwrite\n                            } else {\n                                const existingTargetObj = existingTarget as Record<string, unknown>;\n                                return deepExtend(existingTargetObj, valueObj); // merge\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\n/** @internal */\nexport function removeFromArray<T>(item: T, array: T[]): void {\n    const index = array.indexOf(item);\n\n    if (index === -1) {\n        throw new Error('Can\\'t remove item from array. Item is not in the array');\n    }\n\n    array.splice(index, 1);\n}\n\n/** @internal */\nexport function getUniqueId(): string {\n    return (Math.random() * 1000000000000000)\n        .toString(36)\n        .replace('.', '');\n}\n","import { LayoutConfig } from './config/config';\nimport { ResolvedComponentItemConfig, ResolvedLayoutConfig, ResolvedPopoutLayoutConfig } from './config/resolved-config';\nimport { ComponentContainer } from './container/component-container';\nimport { BindError } from './errors/external-error';\nimport { UnexpectedUndefinedError } from './errors/internal-error';\nimport { LayoutManager } from './layout-manager';\nimport { DomConstants } from './utils/dom-constants';\nimport { I18nStringId, i18nStrings } from './utils/i18n-strings';\n\n/** @public */\nexport class VirtualLayout extends LayoutManager {\n    /**\n     * @deprecated Use {@link (VirtualLayout:class).bindComponentEvent} and\n     * {@link (VirtualLayout:class).unbindComponentEvent} with virtual components\n     */\n    getComponentEvent: VirtualLayout.GetComponentEventHandler | undefined;\n    /**\n     * @deprecated Use {@link (VirtualLayout:class).bindComponentEvent} and\n     * {@link (VirtualLayout:class).unbindComponentEvent} with virtual components\n     */\n    releaseComponentEvent: VirtualLayout.ReleaseComponentEventHandler | undefined;\n\n    bindComponentEvent: VirtualLayout.BindComponentEventHandler | undefined;\n    unbindComponentEvent: VirtualLayout.UnbindComponentEventHandler | undefined;\n\n    /** @internal @deprecated use while constructor is not determinate */\n    private _bindComponentEventHanlderPassedInConstructor = false; // remove when constructor is determinate\n    /** @internal  @deprecated use while constructor is not determinate */\n    private _creationTimeoutPassed = false; // remove when constructor is determinate\n\n    /**\n     * @param container - A Dom HTML element. Defaults to body\n     * @param bindComponentEventHandler - Event handler to bind components\n     * @param bindComponentEventHandler - Event handler to unbind components\n     * If bindComponentEventHandler is defined, then constructor will be determinate. It will always call the init()\n     * function and the init() function will always complete. This means that the bindComponentEventHandler will be called\n     * if constructor is for a popout window. Make sure bindComponentEventHandler is ready for events.\n     */\n    constructor(\n        container?: HTMLElement,\n        bindComponentEventHandler?: VirtualLayout.BindComponentEventHandler,\n        unbindComponentEventHandler?: VirtualLayout.UnbindComponentEventHandler,\n    );\n    /** @deprecated specify layoutConfig in {@link (LayoutManager:class).loadLayout} */\n    constructor(config: LayoutConfig, container?: HTMLElement);\n    /** @internal */\n    constructor(configOrOptionalContainer: LayoutConfig | HTMLElement | undefined,\n        containerOrBindComponentEventHandler: HTMLElement | VirtualLayout.BindComponentEventHandler | undefined,\n        unbindComponentEventHandler: VirtualLayout.UnbindComponentEventHandler | undefined,\n        skipInit: true,\n    );\n    /** @internal */\n    constructor(configOrOptionalContainer: LayoutConfig | HTMLElement | undefined,\n        containerOrBindComponentEventHandler?: HTMLElement | VirtualLayout.BindComponentEventHandler,\n        unbindComponentEventHandler?: VirtualLayout.UnbindComponentEventHandler,\n        skipInit?: true,\n    ) {\n        super(VirtualLayout.createLayoutManagerConstructorParameters(configOrOptionalContainer, containerOrBindComponentEventHandler));\n\n        if (containerOrBindComponentEventHandler !== undefined) {\n            if (typeof containerOrBindComponentEventHandler === 'function') {\n                this.bindComponentEvent = containerOrBindComponentEventHandler;\n                this._bindComponentEventHanlderPassedInConstructor = true;\n\n                if (unbindComponentEventHandler !== undefined) {\n                    this.unbindComponentEvent = unbindComponentEventHandler;\n                }\n            }\n        }\n\n        if (!this._bindComponentEventHanlderPassedInConstructor) {\n            // backward compatibility\n\n            if (this.isSubWindow) {\n                // document.body.style.visibility = 'hidden';\n                // Set up layoutConfig since constructor is not determinate and may exit early. Other functions may need\n                // this.layoutConfig. this.layoutConfig is again calculated in the same way when init() completes.\n                // Remove this when constructor is determinate.\n                if (this._constructorOrSubWindowLayoutConfig === undefined) {\n                    throw new UnexpectedUndefinedError('VLC98823');\n                } else {\n                    const resolvedLayoutConfig = LayoutConfig.resolve(this._constructorOrSubWindowLayoutConfig);\n                    // remove root from layoutConfig\n                    this.layoutConfig = {\n                        ...resolvedLayoutConfig,\n                        root: undefined,\n                    }\n                }\n            }\n        }\n\n        if (skipInit !== true) {\n            if (!this.deprecatedConstructor) {\n                this.init();\n            }\n        }\n    }\n\n    override destroy(): void {\n        this.bindComponentEvent = undefined;\n        this.unbindComponentEvent = undefined;\n\n        super.destroy();\n    }\n\n\n    /**\n     * Creates the actual layout. Must be called after all initial components\n     * are registered. Recurses through the configuration and sets up\n     * the item tree.\n     *\n     * If called before the document is ready it adds itself as a listener\n     * to the document.ready event\n     * @deprecated LayoutConfig should not be loaded in {@link (LayoutManager:class)} constructor, but rather in a\n     * {@link (LayoutManager:class).loadLayout} call.  If LayoutConfig is not specified in {@link (LayoutManager:class)} constructor,\n     * then init() will be automatically called internally and should not be called externally.\n     */\n    override init(): void {\n\n        /**\n         * If the document isn't ready yet, wait for it.\n         */\n        if (!this._bindComponentEventHanlderPassedInConstructor && (document.readyState === 'loading' || document.body === null)) {\n            document.addEventListener('DOMContentLoaded', () => this.init(), { passive: true });\n            return;\n        }\n\n        /**\n         * If this is a subwindow, wait a few milliseconds for the original\n         * page's js calls to be executed, then replace the bodies content\n         * with GoldenLayout\n         */\n        if (!this._bindComponentEventHanlderPassedInConstructor && this.isSubWindow === true && !this._creationTimeoutPassed) {\n            setTimeout(() => this.init(), 7);\n            this._creationTimeoutPassed = true;\n            return;\n        }\n\n        if (this.isSubWindow === true) {\n            if (!this._bindComponentEventHanlderPassedInConstructor) {\n                this.clearHtmlAndAdjustStylesForSubWindow();\n            }\n\n            // Expose this instance on the window object to allow the opening window to interact with it\n            window.__glInstance = this;\n        }\n\n        super.init();\n    }\n\n    /**\n     * Clears existing HTML and adjusts style to make window suitable to be a popout sub window\n     * Curently is automatically called when window is a subWindow and bindComponentEvent is not passed in the constructor\n     * If bindComponentEvent is not passed in the constructor, the application must either call this function explicitly or\n     * (preferably) make the window suitable as a subwindow.\n     * In the future, it is planned that this function is NOT automatically called in any circumstances.  Applications will\n     * need to determine whether a window is a Golden Layout popout window and either call this function explicitly or\n     * hide HTML not relevant to the popout.\n     * See apitest for an example of how HTML is hidden when popout windows are displayed\n     */\n    clearHtmlAndAdjustStylesForSubWindow(): void {\n        const headElement = document.head;\n\n        const appendNodeLists = new Array<NodeListOf<Element>>(4);\n        appendNodeLists[0] = document.querySelectorAll('body link');\n        appendNodeLists[1] = document.querySelectorAll('body style');\n        appendNodeLists[2] = document.querySelectorAll('template');\n        appendNodeLists[3] = document.querySelectorAll('.gl_keep');\n\n        for (let listIdx = 0; listIdx < appendNodeLists.length; listIdx++) {\n            const appendNodeList = appendNodeLists[listIdx];\n            for (let nodeIdx = 0; nodeIdx < appendNodeList.length; nodeIdx++) {\n                const node = appendNodeList[nodeIdx];\n                headElement.appendChild(node);\n            }\n        }\n\n        const bodyElement = document.body;\n        bodyElement.innerHTML = '';\n        bodyElement.style.visibility = 'visible';\n        this.checkAddDefaultPopinButton();\n\n        /*\n        * This seems a bit pointless, but actually causes a reflow/re-evaluation getting around\n        * slickgrid's \"Cannot find stylesheet.\" bug in chrome\n        */\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const x = document.body.offsetHeight;\n    }\n    /**\n     * Will add button if not popinOnClose specified in settings\n     * @returns true if added otherwise false\n     */\n    checkAddDefaultPopinButton(): boolean {\n        if (this.layoutConfig.settings.popInOnClose) {\n            return false;\n        } else {\n            const popInButtonElement = document.createElement('div');\n            popInButtonElement.classList.add(DomConstants.ClassName.Popin);\n            popInButtonElement.setAttribute('title', this.layoutConfig.header.dock);\n            const iconElement = document.createElement('div');\n            iconElement.classList.add(DomConstants.ClassName.Icon);\n            const bgElement = document.createElement('div');\n            bgElement.classList.add(DomConstants.ClassName.Bg);\n            popInButtonElement.appendChild(iconElement);\n            popInButtonElement.appendChild(bgElement);\n            popInButtonElement.addEventListener('click', () => this.emit('popIn'));\n            document.body.appendChild(popInButtonElement);\n            return true;\n        }\n    }\n\n    /** @internal */\n    override bindComponent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent {\n        if (this.bindComponentEvent !== undefined) {\n            const bindableComponent = this.bindComponentEvent(container, itemConfig);\n            return bindableComponent;\n        } else {\n            if (this.getComponentEvent !== undefined) {\n                return {\n                    virtual: false,\n                    component: this.getComponentEvent(container, itemConfig),\n                }\n            } else {\n                // There is no component registered for this type, and we don't have a getComponentEvent defined.\n                // This might happen when the user pops out a dialog and the component types are not registered upfront.\n                const text = i18nStrings[I18nStringId.ComponentTypeNotRegisteredAndBindComponentEventHandlerNotAssigned];\n                const message = `${text}: ${JSON.stringify(itemConfig)}`\n                throw new BindError(message);\n            }\n        }\n    }\n\n    /** @internal */\n    override unbindComponent(container: ComponentContainer, virtual: boolean, component: ComponentContainer.Component | undefined): void {\n        if (this.unbindComponentEvent !== undefined) {\n            this.unbindComponentEvent(container);\n        } else {\n            if (!virtual && this.releaseComponentEvent !== undefined) {\n                if (component === undefined) {\n                    throw new UnexpectedUndefinedError('VCUCRCU333998');\n                } else {\n                    this.releaseComponentEvent(container, component);\n                }\n            }\n        }\n    }\n}\n\n/** @public */\nexport namespace VirtualLayout {\n    /**\n     * @deprecated Use virtual components with {@link (VirtualLayout:class).bindComponentEvent} and\n     * {@link (VirtualLayout:class).unbindComponentEvent} events.\n     */\n    export type GetComponentEventHandler =\n        (this: void, container: ComponentContainer, itemConfig: ResolvedComponentItemConfig) => ComponentContainer.Component;\n    /**\n     * @deprecated Use virtual components with {@link (VirtualLayout:class).bindComponentEvent} and\n     * {@link (VirtualLayout:class).unbindComponentEvent} events.\n     */\n    export type ReleaseComponentEventHandler =\n        (this: void, container: ComponentContainer, component: ComponentContainer.Component) => void;\n\n    export type BindComponentEventHandler =\n        (this: void, container: ComponentContainer, itemConfig: ResolvedComponentItemConfig) => ComponentContainer.BindableComponent;\n    export type UnbindComponentEventHandler =\n        (this: void, container: ComponentContainer) => void;\n\n    export type BeforeVirtualRectingEvent = (this: void) => void;\n\n    /** @internal\n     * Veriable to hold the state whether we already checked if we are running in a sub window.\n     * Fixes popout and creation of nested golden-layouts.\n     */\n    let subWindowChecked = false;\n\n    /** @internal */\n    export function createLayoutManagerConstructorParameters(configOrOptionalContainer: LayoutConfig | HTMLElement | undefined,\n        containerOrBindComponentEventHandler?: HTMLElement |  VirtualLayout.BindComponentEventHandler):\n        LayoutManager.ConstructorParameters\n    {\n        const windowConfigKey = subWindowChecked ? null : new URL(document.location.href).searchParams.get('gl-window');\n        subWindowChecked = true;\n        const isSubWindow = windowConfigKey !== null;\n\n        let containerElement: HTMLElement | undefined;\n        let config: LayoutConfig | undefined;\n        if (windowConfigKey !== null) {\n            const windowConfigStr = localStorage.getItem(windowConfigKey);\n            if (windowConfigStr === null) {\n                throw new Error('Null gl-window Config');\n            }\n            localStorage.removeItem(windowConfigKey);\n            const minifiedWindowConfig = JSON.parse(windowConfigStr) as ResolvedPopoutLayoutConfig;\n            const resolvedConfig = ResolvedLayoutConfig.unminifyConfig(minifiedWindowConfig);\n            config = LayoutConfig.fromResolved(resolvedConfig)\n\n            if (configOrOptionalContainer instanceof HTMLElement) {\n                containerElement = configOrOptionalContainer;\n            }\n        } else {\n            if (configOrOptionalContainer === undefined) {\n                config = undefined;\n            } else {\n                if (configOrOptionalContainer instanceof HTMLElement) {\n                    config = undefined;\n                    containerElement = configOrOptionalContainer;\n                } else {\n                    // backwards compatibility\n                    config = configOrOptionalContainer;\n                }\n            }\n\n            if (containerElement === undefined) {\n                if (containerOrBindComponentEventHandler instanceof HTMLElement) {\n                    containerElement = containerOrBindComponentEventHandler;\n                }\n            }\n        }\n\n        return {\n            constructorOrSubWindowLayoutConfig: config,\n            isSubWindow,\n            containerElement,\n        };\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint indent: [\"error\", 2] */\n\nimport { GoldenLayout } from \"golden-layout\";\n\nconst config = {\n  settings: {\n    showPopoutIcon: false,\n    showCloseIcon: false,\n  },\n  dimensions: {\n    minItemHeight: 40,\n  },\n  content: [{\n    type: 'row',\n    content: [{\n      type: 'column',\n      width: 40,\n      content: [{\n        type: 'component',\n        isClosable: false,\n        componentName: 'template',\n        title: 'Game',\n        componentState: { id: 'client_wrapper' },\n      }],\n    },\n    {\n      type: 'column',\n      content: [{\n        type: 'row',\n        height: 65,\n        content: [{\n          type: 'stack',\n          content: [{\n            type: 'component',\n            isClosable: false,\n            title: 'Main',\n            componentName: 'template',\n            componentState: { id: 'mainmenu' },\n          },\n          {\n            type: 'component',\n            isClosable: false,\n            title: 'Log',\n            componentName: 'template',\n            componentState: { id: 'log' },\n          }],\n        },\n        {\n          type: 'component',\n          title: 'Music',\n          width: 30,\n          componentName: 'template',\n          componentState: { id: 'music' },\n        }],\n      },\n      {\n        type: 'row',\n        content: [{\n          type: 'component',\n          title: 'Server chat',\n          componentName: 'template',\n          componentState: { id: 'ooc' },\n        }],\n      }],\n    }],\n  }],\n};\n\nconst golden = new GoldenLayout();\ngolden.registerComponentFactoryFunction('template', (container, componentState) => {\n  const template = document.querySelector(`#${componentState.id}`);\n  container.element.innerHTML = template.innerHTML;\n  // TODO: support multiple locales\n  // container.setTitle(document.querySelector(`#${componentState.id} meta[name='frame-title']`).getAttribute(\"content\"));\n});\ngolden.loadLayout(config)\n\n"],"names":["GoldenLayout","config","settings","showPopoutIcon","showCloseIcon","dimensions","minItemHeight","content","type","width","isClosable","componentName","title","componentState","id","height","golden","registerComponentFactoryFunction","container","template","document","querySelector","element","innerHTML","loadLayout"],"sourceRoot":""}